var h;function q(c){function e(b){return c.next(b)}function a(b){return c.throw(b)}return new Promise(function(b,d){function f(g){g.done?b(g.value):Promise.resolve(g.value).then(e,a).then(f,d)}f(c.next())})}function u(c){return q(c())};function x(c){if(!c)return null;var e=c.charAt(0);if("?"==e||"#"==e)c=c.substring(1);var a={};c.split("&").forEach(function(b){var d=b.indexOf("=");0>d?a[decodeURIComponent(b)]="":a[decodeURIComponent(b.substring(0,d))]=decodeURIComponent(b.substring(d+1))});return a}function y(c,e){var a=[],b;for(b in c)e?a.push(b.concat("=").concat(c[b])):a.push(encodeURIComponent(b).concat("=").concat(encodeURIComponent(c[b])));return 0<a.length?"?".concat(a.join("&")):""}
function z(){return new Promise(function(c){setTimeout(c,500)})};function A(){var c=new FileReader;c.addEventListener("load",function(e){e.target.h&&e.target.h(e.target.result)});c.addEventListener("error",function(e){e.target.g&&e.target.g(e.target.error)});return c}FileReader.prototype.h=void 0;FileReader.prototype.g=void 0;function B(c,e){return new Promise(function(a,b){c.h=a;c.g=b;c.readAsArrayBuffer(e)})}function C(c){c=c.replace(/-/g,"+").replace(/_/g,"/");var e=c.length%4;0<e&&(c+="====".slice(e));return c}
function D(c){for(var e=[],a=0;a<c.length;)e.push(String.fromCharCode(c[a])),a++;return e.join("")}function E(c){for(var e=new Uint8Array(c.length),a=0;a<c.length;a++)e[a]=c.charCodeAt(a);return e}
function F(c){var e=forge.md.md5.create();e.update(c);e=e.digest().getBytes();for(var a=forge.md.md5.create(),b=new forge.util.ByteStringBuffer,d="";48>b.length();)a.start(),d&&a.update(d),a.update(c),a.update(e),d=a.digest().getBytes(),b.putBytes(d);b.truncate(b.length()-48);return{key:b.getBytes(32),iv:b.getBytes()}}
function G(){this.h=0;this.g=null;this.j=function(c){const e=this;return u(function*(){e.h=c})};this.write=function(c){const e=this;return u(function*(){e.g||(e.g=[]);e.g.push(c);c=null})};this.cancel=function(){return u(function*(){})};this.i=function(){if(this.g&&0<this.g.length&&(this.g[0]instanceof ArrayBuffer||this.g[0]instanceof Uint8Array)){for(var c=0,e=0;e<this.g.length;e++)c+=this.g[e].byteLength;c=new Uint8Array(c);var a=0;for(e=0;e<this.g.length;++e){var b=this.g[e];b instanceof ArrayBuffer&&
(b=new Uint8Array(b));c.set(b,a);a+=b.byteLength}return c}return null};this.A=function(){var c=this.i();c instanceof Uint8Array||(c=new Uint8Array(c));return new Blob([c],{type:"application/octet-binary"})};this.download=function(c){var e=this.A();if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(e,c);else throw Error("Element for download is not specified.");};this.u=function(){return this.h}}
function H(c){this.blob=null;if(c.ma)if(c.ma instanceof Blob)this.blob=c.ma;else throw Error("blob is not a Blob.");else throw Error("blob must be specified.");this.j=1600;c.N&&(this.j=c.N);this.h=0;this.i=null;this.J=function(e){const a=this;return u(function*(){if(e){if(e>=a.g())throw Error("offset can not be bigger than input size.");a.h=e}else a.h=0;a.i=A()})};this.V=function(){return this.j};this.l=function(){return this.h};this.g=function(){return this.blob.size};this.A=function(){return this.h>=
this.g()};this.K=function(e){const a=this;return u(function*(){if(1==a.i.readyState)return null;var b=a.h;a.h=e?a.h+e:a.h+a.j;return yield B(a.i,a.blob.slice(b,a.h))})};this.F=function(){this.blob=this.i=null}}
function J(c){this.m=!0;this.g=c.Ea;this.iv=this.key="";this.l=null;this.h="";this.j=this.i=0;c.Ca&&(this.m=!1);if(!this.g)throw Error("reader must be specified.");if(c.da)c="string"==typeof c.da?F(c.da):c.da,this.key=c.key,this.iv=c.iv;else throw Error("keycfg must be specified.");this.K=function(){const e=this;return u(function*(){if(e.j)return e.j;if(e.m)return e.j=16*Math.ceil((e.g.g()+1)/16),e.j;0==e.g.g()&&(yield e.o());var a=e.g.g()-16,b=yield e.F(a);e.j=a+b.length;return e.j})};this.o=function(e){const a=
this;return u(function*(){var b=e||0;if(e){if(a.m)throw Error("Can NOT set offset for encryption.");e-=e%16+16;0>e&&(e=0)}yield a.g.J(e);var d=a.iv;b&&(d=yield a.A(16));var f=forge.util.createBuffer(a.key);a.l=a.m?forge.cipher.createCipher("AES-CBC",f):forge.cipher.createDecipher("AES-CBC",f);a.l.start({iv:d});a.i=b;a.h=""})};this.F=function(e){const a=this;return u(function*(){var b=a.g.V(),d="",f=0<=e?e:a.g.l();if(a.i==f&&a.h){if(b<=a.h.length)return a.i+=b,d=a.h.substring(0,b),a.h=a.h.substring(b),
d;d=a.h;f+=a.h.length;a.i+=a.h.length;b-=a.h.length}var g=16*Math.ceil((f%16+b)/16);a.l&&a.i==f||(yield a.o(f));var l=yield a.A(g);a.l.update(forge.util.createBuffer(l));a.g.A()&&a.l.finish();g=a.l.output.getBytes();f<a.g.l()?(f-=a.g.l()-l.length,0<f&&(g=g.substring(f)),g.length>b&&(a.h=g.substring(b),g=g.substring(0,b)),a.i+=b):g="";d?g&&(d=d.concat(g)):g&&(d=g);return d})};this.u=function(){return this.g.l()};this.v=function(){return this.g.A()};this.J=function(){this.g.F();this.l=this.g=null};
this.A=function(e){const a=this;return u(function*(){var b=yield a.g.K(e);return D(new Uint8Array(b))})}}
function K(c){this.g=new J(c);this.h=c.Ga;this.speed=this.l=this.i=0;if(!this.h)throw Error("writer must be specified.");this.start=function(e,a){const b=this;return u(function*(){var d=e||0,f=yield b.g.K();yield b.h.j(f);yield b.g.o(e);b.i=Date.now()+1E3;b.l=d;for(d=b.g.v()?2:0;0==d;)(f=yield b.g.F())&&(yield b.h.write(E(f))),b.g.v()?d=2:a&&!a()&&(d=1);1==d&&(yield b.h.cancel());b.h=null;b.g.J();b.g=null;return 2==d})};this.j=function(){Date.now()>this.i&&(this.speed=1E3*(this.g.u()-this.l)/(Date.now()-
this.i+1E3),this.i=Date.now()+1E3,this.l=this.g.u());return this.speed}};function L(){this.h=!0;this.g=null;this.l=this.V=!1;this.K=function(){var c=null;if(this.h)try{c=window.sessionStorage.getItem("login_state")}catch(e){this.h=!1,console.error(e)}return c};this.A=function(c){var e=this.K();return e&&c==e?!0:!1};this.i=function(c,e){if(this.h)try{return window.sessionStorage.setItem(c,e.toString()),!0}catch(a){this.h=!1,console.error(a)}return!1};this.m=function(c){if(this.h)try{window.sessionStorage.removeItem(c)}catch(e){this.h=!1,console.error(e)}};this.F=function(){var c=
this.j("relay_url");return c?c:""};this.J=function(){var c=null,e=this.u("extra_info");e&&(c=JSON.parse(e));return c&&2==c.length?{ua:c[0],ca:c[1]}:null};this.v=function(c){c?(c="string"===typeof c?c:JSON.stringify([c.ua,c.ca]),this.i("drive_extra",c),this.o("extra_info",c)):(this.m("drive_extra"),this.o("extra_info",null))};this.G=function(){var c=this;return new Promise(function(e,a){if(window.indexedDB){var b=window.indexedDB.open("zgayard1946");b.onerror=function(d){a(d.target.error)};b.onupgradeneeded=
function(d){d.target.result.createObjectStore("settings",{keyPath:"key"})};b.onsuccess=function(d){var f=d.target.result;d=f.transaction("settings","readwrite");d.oncomplete=function(){f.close();e()};d.objectStore("settings").getAll().onsuccess=function(g){c.g={};g.target.result.forEach(function(l){c.g[l.key]=l.value});g=c.g.drive;c.l=g&&c.g[g]&&c.g[g].refresh_token?!0:!1}}}else a(Error("IndexedDB is not supported in your browser settings."))})};this.u=function(c){var e=this.j("drive");return e&&
(e=this.g[e])?e[c]:null};this.o=function(c,e){const a=this;u(function*(){if(a.g){var b=a.j("drive");if(e)a.g[b]||(a.g[b]={}),a.g[b][c]=e;else if(a.g[b]&&a.g[b][c])delete a.g[b][c];else return;a.V=!0}})};this.P=function(c){return new Promise(function(e,a){var b=window.indexedDB.open("zgayard1946");b.onerror=function(d){a(d.target.error)};b.onsuccess=function(d){var f=d.target.result;d=f.transaction("settings","readwrite");d.oncomplete=function(){f.close();e()};d=d.objectStore("settings");c&&c(d)}})};
this.j=function(c){return this.g&&this.g[c]?this.g[c]:null};this.saveData=function(c,e){const a=this;return u(function*(){a.g&&(a.g[c]=e);yield a.P(function(b){b.put({key:c,value:e})})})}};var M={};function aa(c,e,a){this.s=c;this.I=e;this.g=a}function N(c,e){this.o=null;this.u=e;this.h=null;this.g=c;this.U||(this.U=function(){})}function O(c){null==c.o&&(c.o=c.g.F());return c.o}
function P(c,e){return u(function*(){var a="POST",b=c.l().concat(encodeURI(e.L)),d=new Headers;if(e&&e.B)d.append("Authorization",e.B);else if(e&&e.ha){var f="Bearer";e&&e.ia&&(f=e.ia);d.append("Authorization",f+" "+e.ha)}else d.append("Authorization",c.h);if(e&&e.oa)for(var g of e.oa.entries())d.append(g[0],g[1]);e&&e.fa&&(a=e.fa);a=yield fetch(b,{method:a,body:e.va,headers:d,redirect:"follow"});401==a.status&&c.g.l&&!e.Fa&&(a=yield ba(c,e));return a})}h=N.prototype;
h.qa=function(){const c=this;return u(function*(){var e=c.g.l,a={},b,d=x(window.location.search);(b=x(window.location.hash))&&(d=d?Object.assign(d,b):b);if((b=d)&&b.token_type&&b.access_token){c.h=b.token_type+" "+b.access_token;c.g.i("access_token",c.h);if(b&&b.state)if(c.g.A(b.state))c.g.m("login_state");else return"Unauthorized access to this url.";return null}b&&b.code?a.code=b.code:e&&(a.ra=c.g.u("refresh_token"));if(d=c.g.J())a.clientId=d.ua,a.ya=d.ca;if(a.code||a.ra){if(b&&b.state)if(c.g.A(b.state))c.g.m("login_state");
else return"Unauthorized access to this url.";if((a=yield Q(c,a))&&a.token_type&&a.access_token)return d&&a.client_secret_enc&&(d.ca=a.client_secret_enc,c.g.v(d)),c.h=a.token_type+" "+a.access_token,c.g.i("access_token",c.h),e&&a.refresh_token&&c.g.o("refresh_token",a.refresh_token),a.logout&&c.g.i("logout_url",a.logout),null}else if(e&&(a.Aa=!0),(a=yield Q(c,a))&&a.url)return d&&a.client_secret_enc&&(d.ca=a.client_secret_enc,c.g.v(d)),a.state&&(c.g.i("login_state",a.state)||(a.state=c.j())),a.logout&&
c.g.i("logout_url",a.logout),window.location.href=a.url.concat("&state=".concat(encodeURIComponent(a.state))),"redirect";return a&&a.error?"["+a.error+"] "+a.error_description:"Unknown error occured when doing authorization."})};h.ka=function(){return u(function*(){})};h.W=function(){return u(function*(){})};h.ba=function(){return u(function*(){})};h.$=function(){return u(function*(){})};h.ja=function(){return u(function*(){})};h.pa=function(){return u(function*(){})};
h.ta=function(c){return new ca(c,this)};h.Z=function(){return u(function*(){})};h.Ba=function(){};h.sa=function(c){return new da(c,this)};function R(c){return u(function*(){return{xa:c.status,ga:yield c.text()}})}function S(c,e,a,b,d){return u(function*(){var f={L:e,fa:a};T(d,f);f=yield P(c,f);var g=yield R(f);if(b&&f.status!=b)throw Error(JSON.stringify(g));return g})}function U(c,e,a){return u(function*(){return(yield S(c,e,"GET",200,a)).ga})}
function T(c,e){c.ia&&(e.ia=c.ia);c.ha&&(e.ha=c.ha);c.B&&(e.B=c.B)}
function Q(c,e){return u(function*(){if(!e)throw Error("Options are not specified when auth onedrive.");var a=new FormData;a.append("drive_type",c.j());e.clientId&&a.append("client_id",e.clientId);e.Ja&&a.append("redirect_uri",e.Ja);e.ya&&a.append("client_secret",e.ya);e.code?a.append("code",e.code):e.ra?a.append("refresh_token",e.ra):e.Aa&&a.append("need_code",e.Aa);a=yield fetch(c.u,{method:"POST",body:a,credentials:"include",redirect:"follow"});if(200==a.status)return yield a.json();var b=yield a.text();
throw Error(b+" ("+a.status+")");})}function ba(c,e){return u(function*(){console.log("Retry to send ajax.");if(e)e.Fa=!0;else return null;var a=yield c.qa();if(a)return console.error(a),null;e.B=c.h;return yield P(c,e)})}h.za=function(c){return c.ok};
function ea(c){c.la=N;if("function"===typeof Object.create)c.prototype=Object.create(N.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});else{var e=function(){};e.prototype=N.prototype;c.prototype=new e;c.prototype.constructor=c}c.prototype.Ia||(c.prototype.Ia=function(){return this.constructor.la});c.prototype.U||(c.prototype.U=function(...a){return this.constructor.la.call(this,...a)});c.prototype.Ka||(c.prototype.Ka=function(a,...b){return a?this.constructor.la.prototype[a].call(this,
...b):this.constructor.la.call(this,...b)})}function V(c,e,a){ea(a);M[c]=new aa(c,e,a)}var W=-1,X=-9,Y=0;
function ca(c,e){this.m=e;this.o=c;this.v="";this.g=this.l=0;this.h=null;if(!this.o||!this.o.S)throw Error("fnm is not specified.");this.j=function(a){const b=this;return u(function*(){b.l=a;b.v=yield b.m.$(b.o,a)})};this.write=function(a){const b=this;return u(function*(){var d=null;if(b.h){var f=b.h.byteLength;0<f?(d=new Uint8Array(f+a.byteLength),d.set(b.i(b.h),0),d.set(b.i(a),f)):d=b.i(a);b.h=null}else d=b.i(a);var g=new Blob([d],{type:"application/octet-binary"}),l="bytes "+b.g+"-";b.g+=g.size;
l+=b.g-1+"/"+b.l;var k=0,m=function(){const n=this;return u(function*(){var p=new Headers;p.append("Content-Range",l);try{var r=yield fetch(n.v,{method:"PUT",headers:p,body:g,redirect:"follow"});p="";if(e.za(r)){var t=yield n.m.ja(r);if(t==X)throw a=null,p=yield r.text(),Error(p+" ("+r.status+")");if(t!=W&&t!=Y&&t<n.g){var v=a.byteLength;v-=n.g-t;if(0<v){var w=a.slice(v);a=null;n.g>=n.l?yield n.write(w):(n.h=w,n.g=t)}else throw a=null,Error("Can NOT continue to upload buffer.");}}else throw a=null,
p=yield r.text(),Error(p+" ("+r.status+")");}catch(I){if(1>k)k++,yield z(),yield m();else throw g=a=null,I;}})}.bind(b);yield m()})};this.cancel=function(){const a=this;return u(function*(){yield a.m.pa(a.v)})};this.u=function(){return this.l};this.i=function(a){return a instanceof Uint8Array?a:new Uint8Array(a)}}
function da(c,e){this.m=e;this.u=c;this.url="";this.name=null;this.v=this.i=this.h=this.size=0;this.aa=!1;this.G=16E3;c.N&&(this.G=c.N);this.o=this.j=0;this.J=function(a){const b=this;return u(function*(){if(b.aa)if(b.i&&(b.v=b.i,b.i=0),a){if(a>=b.g())throw console.log("offset:"+a+",size:"+b.g()),Error("offset can not be bigger than input size.");b.h=a}else b.h=0;else{var d=yield b.m.Z(b.u);b.aa=!0;if(d){if(b.size=d.C||0,b.url=d.s,b.name=d.I,b.o="1"==d.D?1:0,a){if(a>=b.g())throw Error("offset can not be bigger than input size.");
b.h=a}}else throw Error("Failed to prepare reader.");}})};this.V=function(){return this.G};this.l=function(){return this.h};this.g=function(){return this.size};this.A=function(){return this.h>=this.g()};this.K=function(a){const b=this;return u(function*(){a||(a=b.G);return yield b.P(a)})};this.F=function(){};this.P=function(a){const b=this;return u(function*(){if(a&&b.i)return null;if(a)b.i=a;else if(b.i)a=b.i;else throw Error("size must be specified.");if(b.v)return null;var d=b.h+a-1,f=function(){const g=
this;return u(function*(){var l=g.url,k=new Headers;10<=g.j&&(l=O(g.m),k.append("Zb-Url",g.url));g.m.Ba(k,g.u.B);k.append("Range","bytes="+g.h+"-"+d);try{var m=yield fetch(l,{method:"GET",headers:k,redirect:"follow"});if(g.v){if(g.v=0,g.i)return yield g.P()}else{g.i=0;g.j=10>g.j?1:11;if(200==m.status||206==m.status){2==g.o&&(g.o=1);var n=parseInt(m.headers.get("content-length"),10);if(n)g.h+=n;else{var p=m.headers.get("content-range");if(p){var r=p.indexOf("-");if(0>r)var t=0;else{r++;var v=p.indexOf("/",
r);t=v<=r?0:parseInt(p.slice(r,v),10)}}else t=0;g.h=t?t+1:d+1}200==m.status&&g.h<g.g()?g.h=g.g():g.h>g.g()&&(g.h=g.g());return yield m.arrayBuffer()}if(401==m.status&&1==g.o){console.log("Retry auth.");g.o=2;var w=yield g.m.qa();if(w)console.error(w);else return g.u.B&&delete g.u.B,yield f()}else{var I=yield m.text();throw Error(I+" ("+m.status+")");}}}catch(fa){if(0==g.j&&O(g.m))return g.j=10,yield f();if(1==g.j||11==g.j)return g.j++,yield z(),yield f();throw fa;}})}.bind(b);return yield f()})}}
;V("onedrive","Microsoft OneDrive",function(c,e){this.U(c,e);this.j=function(){return"onedrive"};this.ka=function(a){const b=this;return u(function*(){var d="/me/drive/root/children";if(a){if(a.R){d=function(l){const k=this;return u(function*(){var m={T:""};T(a,m);m=yield k.i(m,l);var n=[];m&&n.push(m);return n})}.bind(b);if(a.O){var f={T:a.O};T(a,f);if(f=yield b.i(f))return yield d(f.Da.concat("/").concat(f.I).concat("/").concat(a.R))}else return yield d("/drive/root:/".concat(a.R));return null}a.O&&
(d="/me/drive/items/"+a.O+"/children")}d=yield U(b,d.concat(y({select:"id,name,parentReference,lastModifiedDateTime,size,folder,file"},!0)),a);var g=[];d&&JSON.parse(d).value.forEach(function(l){g.push(this.Y(l))},b);return g})};this.W=function(a){const b=this;return u(function*(){return yield b.i(a)})};this.ba=function(a){const b=this;return u(function*(){var d="/me/drive/items/".concat(a.X);yield S(b,d,"DELETE",204,a);return 0})};this.$=function(a){const b=this;return u(function*(){var d={L:"/me",
fa:"POST",B:a.B,oa:new Headers({"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache",Pragma:"no-cache"})};d.L=a.H?"/me/drive/items/"+a.H+":/":d.L+"/drive/root:/";d.L+=a.S;d.L+=":/createUploadSession";d.va=JSON.stringify({item:{"@microsoft.graph.conflictBehavior":"replace",name:a.S}});d=yield P(b,d);var f=yield R(d),g="";d.ok&&(g=JSON.parse(f.ga).uploadUrl);return g})};this.ja=function(a){return u(function*(){if(0<=[200,201].indexOf(a.status))return W;if(0>[202].indexOf(a.status))return X;
var b=yield a.text();if((b=JSON.parse(b).nextExpectedRanges)&&b.length){var d=b[0].indexOf("-");if(0<d)return parseInt(b[0].substring(0,d),10)}return Y})};this.pa=function(a){return u(function*(){var b=yield fetch(a,{method:"DELETE",redirect:"follow"});if(!b.ok)throw(yield b.text())+" ("+b.status+")";})};this.Z=function(a){const b=this;return u(function*(){var d="/me/drive/items/".concat(a.s),f={};a.B&&(f.B=a.B);d=yield U(b,d.concat(y({select:"name,size,@microsoft.graph.downloadUrl"},!0)),f);f=null;
d&&(d=JSON.parse(d),f={s:d["@microsoft.graph.downloadUrl"],I:d.name,C:d.size});return f})};this.l=function(){return"https://graph.microsoft.com/v1.0"};this.i=function(a,b){const d=this;return u(function*(){var f=b?b.startsWith("/me")?b:"/me".concat(b):"/me/drive/items/"+a.T;f=yield S(d,f.concat(y({select:"id,name,parentReference,lastModifiedDateTime,size,folder,file"},!0)),"GET",0,a);if(200==f.xa)return d.Y(JSON.parse(f.ga));if(404==f.xa&&b)return null;throw Error(JSON.stringify(f));})};this.Y=function(a){var b=
{s:a.id,I:a.name,C:a.size,ea:a.lastModifiedDateTime,Da:a.parentReference.path,M:a.parentReference.id,D:"0"};a.folder?b.D="1":a.file&&(b.D="2");return b}});V("googledrive","Google Drive",function(c,e){this.U(c,e);this.j=function(){return"googledrive"};this.ka=function(a){const b=this;return u(function*(){var d=b.i("/files"),f="'"+(a.O?a.O:"root")+"' in parents";a.R&&(f=f.concat(" and name = '"+a.R+"'"));d=yield U(b,d.concat(y({fields:"files(id,name,mimeType,parents,modifiedTime,size)",q:f},!0)),a);var g=[];JSON.parse(d).files.forEach(function(l){g.push(this.Y(l))},b);return g})};this.W=function(a){const b=this;return u(function*(){var d=b.i("/files/").concat(a.T);
d=yield U(b,d.concat(y({fields:"id,name,mimeType,parents,modifiedTime,size"},!0)),a);return b.Y(JSON.parse(d))})};this.ba=function(a){const b=this;return u(function*(){var d=b.i("/files/").concat(a.X);yield S(b,d,"DELETE",204,a);return 0})};this.$=function(a,b){const d=this;return u(function*(){var f={R:a.S,B:a.B};a.H&&(f.O=a.H);f=yield d.ka(f);return 0<f.length?yield d.m(a,b,f[0].s):yield d.m(a,b)})};this.ja=function(a){return u(function*(){if(0<=[200,201].indexOf(a.status))return W;if(0>[308].indexOf(a.status))return X;
var b=a.headers.get("range");if(b){var d=b.indexOf("-");if(0<d)return parseInt(b.slice(d+1),10)+1}return Y})};this.Z=function(a){const b=this;return u(function*(){var d=b.i("/files/").concat(a.s),f={T:a.s};a.B&&(f.B=a.B);if(f=yield b.W(f))f.s=b.l().concat(encodeURI(d)).concat(y({alt:"media"})),b.g.l&&(f.D="1");return f})};this.Ba=function(a,b){b?a.append("Authorization",b):a.append("Authorization",this.h?this.h:"")};this.za=function(a){return a.ok||308==a.status};this.l=function(){return"https://www.googleapis.com"};
this.m=function(a,b,d){const f=this;return u(function*(){var g={},l="POST",k="/files?uploadType=resumable";d?(l="PATCH",k="/files/"+d+"?uploadType=resumable"):(g.name=a.S,a.H&&(g.parents=[a.H]));g={L:"/upload".concat(f.i(k)),fa:l,B:a.B,oa:new Headers({"X-Upload-Content-Length":b,"X-Upload-Content-Type":"application/octet-stream","Content-Type":"application/json; charset=UTF-8"}),va:JSON.stringify(g)};g=yield P(f,g);if(g.ok)return g.headers.get("location")||"";g=yield R(g);throw Error(g.ga);})};this.i=
function(a){return"/drive/v3".concat(a)};this.Y=function(a){var b={s:a.id,I:a.name,C:a.size,ea:a.modifiedTime,D:"2"};a.parents&&0<a.parents.length&&(b.M=a.parents[0]);this.A(a.mimeType)&&(b.D="1");return b};this.A=function(a){return"application/vnd.google-apps.folder"==a}});function ha(c,e){this.v=e;this.G=c;this.h=null;this.i=this.size=0;this.j="";this.u=this.m=0;this.o=1600;c.N&&(this.o=c.N);this.J=function(a){const b=this;return u(function*(){var d=yield b.v.Z(b.G);if(d)b.size=d.C||0,d=yield b.v.F(b.G.s),b.h=d,b.h.sort(function(f,g){return f.wa-g.wa}),b.P(a);else throw Error("Failed to prepare reader.");})};this.V=function(){return this.o};this.l=function(){return this.i};this.g=function(){return this.size};this.A=function(){return this.h?this.m>=this.h.length:!0};
this.K=function(a){const b=this;return u(function*(){if(!b.j){var d=yield b.v.v(b.h[b.m].s);b.j=window.atob(C(d))}return yield b.aa(a)})};this.F=function(){this.h=null;this.j=""};this.P=function(a){if(a){if(a>=this.g())throw Error("offset can not be bigger than input size.");this.i=a;var b=0;for(a=0;a<this.h.length&&!(b+=this.h[a].C,this.i<b);a++)this.u=b;if(a<this.h.length)this.m=a;else throw Error("offset can not be bigger than input size.");}else this.m=this.u=this.i=0;this.j=""};this.aa=function(a){const b=
this;return u(function*(){var d=b.i-b.u,f=b.j.length-d;a?a<f&&(f=a):b.o<f&&(f=b.o);var g=E(b.j.substring(d,d+f));b.i+=f;b.j.length==d+f&&(b.j="",b.m++,b.u=b.i);return g.buffer})}}
function ia(c,e){this.g=e;this.h=c;this.data={s:"",I:"",C:0,M:"",D:"2"};this.l=this.i=0;this.j=function(a){const b=this;return u(function*(){b.i=a;b.data.I=b.h.S;b.h.H&&(b.data.M=b.h.H);b.data.s=yield b.g.$(b.h,a)})};this.write=function(a){const b=this;return u(function*(){b.data.C+=a.byteLength;var d=window.btoa(D(b.m(a))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=*$/g,"");b.l++;yield b.g.saveData(b.data.s,b.l,a.byteLength,d);b.data.C>=b.i&&(yield b.g.G(b.data))})};this.cancel=function(){const a=
this;return u(function*(){yield a.g.ba({X:a.data.s})})};this.u=function(){return this.i};this.m=function(a){return a instanceof Uint8Array?a:new Uint8Array(a)}}
V("idxdb","Loacal Indexed DB",function(c,e){this.U(c,e);this.j=function(){return"idxdb"};this.qa=function(){return new Promise(function(){this.Ha()})};this.ka=function(a){const b=this;return u(function*(){return yield b.A(void 0,a.O,a.R)})};this.W=function(a){const b=this;return u(function*(){var d=yield b.A(a.T);return d&&0<d.length?d[0]:null})};this.ba=function(a){const b=this;return u(function*(){function d(l){var k;for(k=0;k<f.length;k++)f[k].s==l?f[k].na=!0:f[k].M==l&&("1"==f[k].D?d(f[k].s):
f[k].na=!0)}var f=[],g=0;yield b.i(function(l){l.getAll().onsuccess=function(k){k.target.result.forEach(function(m){f.push({s:m.key,I:"",M:m.pid})})}});d(a.X);yield b.i(function(l){f.forEach(function(k){k.na&&l.delete(k.s)})});yield b.m(function(l){var k=[];f.forEach(function(m){m.na&&"2"==m.D&&k.push(m.s)});0>k.indexOf(a.X)&&k.push(a.X);l.getAllKeys().onsuccess=function(m){m.target.result.forEach(function(n){var p=n.indexOf(":");0<=k.indexOf(n.substring(0,p))&&(l.delete(n),g+=parseInt(n.substring(n.indexOf("_",
p+1)+1),10))})}});return g})};this.ta=function(a){return new ia(a,this)};this.$=function(a){const b=this;return u(function*(){var d="";a.H&&(d=a.H);return yield b.J(d)})};this.ja=function(){return u(function*(){return Y})};this.pa=function(){return u(function*(){})};this.sa=function(a){return new ha(a,this)};this.Z=function(a){const b=this;return u(function*(){return yield b.W({T:a.s})})};this.l=function(){return""};this.G=function(a){const b=this;return u(function*(){a.ea=b.K();var d={key:a.s,name:a.I,
size:a.C,tms:a.ea,type:a.D};a.M&&(d.pid=a.M);yield b.i(function(f){f.put(d)})})};this.saveData=function(a,b,d,f){const g=this;return u(function*(){yield g.m(function(l){l.put({key:a+":"+b+"_"+d,data:f})})})};this.F=function(a){const b=this;return u(function*(){var d=[];yield b.m(function(f){f.getAllKeys().onsuccess=function(g){g.target.result.forEach(function(l){var k=l.indexOf(":");if(l.substring(0,k)==a){var m=l.substring(k+1);k=m.indexOf("_");d.push({s:l,wa:parseInt(m.substring(0,k),10),C:parseInt(m.substring(k+
1),10)})}})}});return d})};this.v=function(a){const b=this;return u(function*(){var d="";yield b.m(function(f){f.get(a).onsuccess=function(g){d=g.target.result.data}});return d})};this.Ha=function(){new Promise(function(a,b){if(window.indexedDB){var d=window.indexedDB.open("zgalocaldb");d.onerror=function(f){b(f.target.error)};d.onupgradeneeded=function(f){f=f.target.result;f.createObjectStore("items",{keyPath:"key"});f.createObjectStore("datas",{keyPath:"key"})};d.onsuccess=function(f){f.target.result.close();
a()}}else b(Error("IndexedDB is not supported in your browser settings."))})};this.i=function(a){return new Promise(function(b){window.indexedDB.open("zgalocaldb").onsuccess=function(d){var f=d.target.result;d=f.transaction("items","readwrite");d.oncomplete=function(){f.close();b()}.bind(this);d=d.objectStore("items");a&&a(d)}.bind(this)})};this.m=function(a){return new Promise(function(b){window.indexedDB.open("zgalocaldb").onsuccess=function(d){var f=d.target.result;d=f.transaction("datas","readwrite");
d.oncomplete=function(){f.close();b()}.bind(this);d=d.objectStore("datas");a&&a(d)}.bind(this)}.bind(this))};this.A=function(a,b,d){const f=this;return u(function*(){var g=[];yield f.i(function(l){l.getAll().onsuccess=function(k){k.target.result.forEach(function(m){var n=!0;a&&(n=a==m.key);n&&b&&(n=b==m.pid);n&&d&&(n=d==m.name);n&&g.push({s:m.key,I:m.name,C:m.size,ea:m.tms,D:m.type,M:m.pid})})}});return g})};this.K=function(){var a;a||(a=new Date);var b=[],d=[];b.push(a.getFullYear());b.push(a.getMonth()+
1);b.push(a.getDate());d.push("0".concat(a.getHours()).slice(-2));d.push("0".concat(a.getMinutes()).slice(-2));d.push("0".concat(a.getSeconds()).slice(-2));return b.join("-")+" "+d.join(":")};this.J=function(a){const b=this;return u(function*(){var d=-1;yield b.i(function(f){f.getAllKeys().onsuccess=function(g){g.target.result.forEach(function(l){var k=l.indexOf("_");a&&0<k?l.substring(k+1)==a&&(k=parseInt(l.substring(0,k),10),k>d&&(d=k)):!a&&0>k&&(k=parseInt(l,10),k>d&&(d=k))})}});d++;return a?d+
"_"+a:d.toString()})}});function ja(c,e,a){this.h=this.g=null;this.u=c;this.i=1;this.A=e;this.j=a;this.l=0;this.m=function(){const b=this;return u(function*(){var d={type:0,wtype:b.i,size:b.g.g()};b.j(d);var f=new K({Ca:1==b.i,da:b.u,Ea:b.g,Ga:b.h});d=function(){var k={type:1,wtype:this.i,begin:this.l,spd:f.j(),posn:this.g.l(),size:this.g.g()};this.j(k);return this.A()?!1:!0}.bind(b);b.l=Date.now();var g=null,l=yield f.start(0,d).catch(function(k){g=k});d={type:2,wtype:b.i,begin:b.l,posn:b.g.l(),size:b.h.u()};g?d.errr=g.message||
g.La:l?b.h.A&&(d.blob=b.h.A()):d.type=3;b.j(d)})};this.o=function(b,d){const f=this;return u(function*(){f.i=1;f.g=b.sa({s:d,N:16E5});f.h=new G;yield f.m()})};this.v=function(b,d,f,g){const l=this;return u(function*(){l.i=2;l.g=new H({ma:f,N:16E5});l.h=b.ta({S:d,H:g});yield l.m()})}};window=self;self.importScripts("vendor/forge.min.js");self.i=!1;function Z(c,e){return new ja(c,function(){return self.i},function(a){2==a.type&&(a.gtoken=e.h?e.h:"");self.postMessage(a)})}
function ka(c){u(function*(){var e=c.type,a=c.cominf,b={iv:window.atob(C(a.iv)),key:window.atob(C(a.key))};self.postMessage({type:0,wtype:e,size:0});var d=new L;yield d.G().catch(function(g){console.error("IndexedDB is not supported in your browser settings.",g)});var f=M[a.drvid];if(f)switch(d=new f.g(d,"https://zgayard.f5.si/grantauth.php"),d.h=a.gtoken,e){case 1:yield Z(b,d).o(d,c.downinf.targetId);break;case 2:e=c.upinf,yield Z(b,d).v(d,e.fname,e.file,e.ptid)}else self.postMessage({type:2,wtype:e,
size:0,errr:"Drive's name is invalid."})})}self.addEventListener("message",function(c){c=c.data;switch(c.type){case 1:case 2:ka(c);break;default:self.i=!0}});
