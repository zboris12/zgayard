const aa={en:"English",ja:"日本語"},ba={bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png"},ca={avi:"video/x-msvideo",mp4:"video/mp4",mpeg:"video/mpeg"};function q(a){var c=null;if(a)if("string"==typeof a)switch(a.charAt(0)){case "#":c=document.getElementById(a.slice(1))}else a instanceof Event?c=a.srcElement||a.target:c=a;else c=window.event.srcElement||window.event.target;return c}function r(a,c){return(a=a.parentElement)?a.tagName==c?a:r(a,c):null}function da(){var a=document.getElementById("divPwd");return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function ea(a){if(a=q(a))a.style.display="none"}
function t(a){a=q(a);if(a){var c=a.getElementsByTagName("tbody")[0];return{ca:a,G:c}}return null}function fa(a,c){if((a=a.nextElementSibling)&&c)switch(c.charAt(0)){case "#":for(c=c.slice(1);a&&a.id!=c;)a=a.nextElementSibling;break;default:for(c=c.toUpperCase();a&&a.tagName!=c;)a=a.nextElementSibling}return a}
function u(a,c,d){if((a=d?a.lastElementChild:a.previousElementSibling)&&c)switch(c.charAt(0)){case "#":for(c=c.slice(1);a&&a.id!=c;)a=a.previousElementSibling;break;default:for(c=c.toUpperCase();a&&a.tagName!=c;)a=a.previousElementSibling}return a}function ha(a,c,d){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,c);else if(d)d.download=c,d.href=window.URL.createObjectURL(a),d.click();else throw Error("Element for download is not specified.");}
function ia(a){if(!a)return null;var c=a.charAt(0);if("?"==c||"#"==c)a=a.substring(1);var d={};a.split("&").forEach(function(b){var e=b.indexOf("=");0>e?d[decodeURIComponent(b)]="":d[decodeURIComponent(b.substring(0,e))]=decodeURIComponent(b.substring(e+1))});return d}function ja(){var a=ia(window.location.search),c=ia(window.location.hash);c&&(a=a?Object.assign(a,c):c);return a}
function v(a,c){var d=[],b;for(b in a)c?d.push(b.concat("=").concat(a[b])):d.push(encodeURIComponent(b).concat("=").concat(encodeURIComponent(a[b])));return 0<d.length?"?".concat(d.join("&")):""}
function ka(a){if(a)if(1024>a)var c="B";else 1048576>a?(c="KB",a=Math.round(a/102.4)/10):1073741824>a?(c="MB",a=Math.round(a/104857.6)/10):(c="GB",a=Math.round(a/1.073741824E8)/10);else c="B",a=0;var d=a.toString();a=d.indexOf(".");var b=d.split(""),e=[];0<=a?e.push(d.slice(a)):a=b.length;for(d=0;0<a;)3==d++&&(e.unshift(","),d=1),e.unshift(b[--a]);return e.join("").concat(c)};function x(a){var c=CryptoJS.MD5(a);a=CryptoJS.kdf.OpenSSL.execute(a,8,4,c);a.iv.clamp();a.key.clamp();return a}
function z(a,c,d){var b=d;"string"==typeof d&&(b=x(d));if(!(b&&b.iv&&b.key))throw Error("Need iv and key. They can be generated by CryptoJS.kdf.OpenSSL.execute from password and salt.");d={mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};Object.assign(d,b);a=a?CryptoJS.algo.AES.createEncryptor(d.key,d):CryptoJS.algo.AES.createDecryptor(d.key,d);c=a.process(c);c.concat(a.finalize());c.clamp();return c}
function la(a){var c=Array(a.sigBytes);a=a.words;for(var d=0,b=0;b<a.length;b++){for(var e=a[b],f=d+4-1;f>=d;f--)f<c.length&&(c[f]=e&255),e>>=8;d+=4;if(d>=c.length)break}return c}
function ma(){this.h=0;this.g=null;this.l=function(a,c){this.h=a;c&&c()};this.write=function(a,c){Array.isArray(a)?this.g=this.g?this.g.concat(a):a.concat():(this.g||(this.g=[]),this.g.push(a));c&&c()};this.cancel=function(a){a&&a(!1,!0)};this.u=function(){if(this.g&&0<this.g.length&&(this.g[0]instanceof ArrayBuffer||this.g[0]instanceof Uint8Array)){for(var a=0,c=0;c<this.g.length;c++)a+=this.g[c].byteLength;a=new Uint8Array(a);var d=0;for(c=0;c<this.g.length;++c){var b=this.g[c];b instanceof ArrayBuffer&&
(b=new Uint8Array(b));a.set(b,d);d+=b.byteLength}return a}return this.g};this.v=function(){var a=this.u();a instanceof Uint8Array||(a=new Uint8Array(a));return new Blob([a],{type:"application/octet-binary"})};this.download=function(a){var c=this.v();ha(c,a,null)};this.C=function(){return this.h}}
function na(a){this.o=null;if(a._blob)if(a._blob instanceof Blob)this.o=a._blob;else throw Error("blob is not a Blob.");else throw Error("blob must be specified.");this.B=1600;a.U&&(this.B=a.U);this.g=0;this.u=this.l=null;this.J=function(c,d){if(c){if(c>=this.h())throw Error("offset can not be bigger than input size.");this.g=c}this.l=new FileReader;this.l.onload=function(b){b=b.target.result;this.u&&this.u(b,this)}.bind(this);d&&d()};this.v=function(){return this.g};this.h=function(){return this.o.size};
this.C=function(){return this.g>=this.h()};this.i=function(c){if(1!=this.l.readyState){var d=this.g;this.g=c?this.g+c:this.g+this.B;this.l.readAsArrayBuffer(this.o.slice(d,this.g))}};this.S=function(){this.o=this.l=null}}
function A(a,c){if(!a.na)if(this.getSuperClass&&"Readable"==this.getSuperClass().name)this.super(c),this.h=1,c&&c.objectMode&&(this.M=!0);else throw Error("writer must be specified in no stream mode.");this.o=this.H=null;this.B=!0;this.g=null;this.l=a.na;this.iv=this.key=null;this.i=0;this.v=null;this.C=this.u=0;this.speed="0B/s";a.la&&(this.B=!1);if(a.fa)this.g=a.fa;else throw Error("reader must be specified.");if(a.Z)c=null,c="string"==typeof a.Z?x(a.Z):a.Z,this.key=c.key,this.iv=c.iv;else throw Error("keycfg must be specified.");
this.start=function(d){if(d){if(this.B)throw Error("Can NOT set offset for encryption.");this.i=d;d-=d%16+16;0>d&&(d=0)}this.g.u=this.J.bind(this);this.g.J(d,function(){var b=16*Math.ceil((this.g.h()+1)/16);this.h||!this.l?this.I():this.l.l(b,this.I.bind(this))}.bind(this))};this.L=function(){Date.now()>this.u&&(this.speed=ka(1E3*(this.g.v()-this.C)/(Date.now()-this.u+1E3))+"/s",this.u=Date.now()+1E3,this.C=this.g.v());return this.speed};this._read=function(d){1==this.h?this.h=2:3==this.h&&(this.g.C()?
this.push(null):this.g.i(d))};this.push=function(d){return this.readable?(d&&!this.M?this.superCall("push",new Uint8Array(d)):this.superCall("push",d),!0):!1};this.I=function(){this.u=Date.now()+1E3;(this.C=this.i)?this.g.i(16):1==this.h?this.h=3:2==this.h?(this.h=3,this.push([])):this.g.i()};this.J=function(d){try{var b=new CryptoJS.lib.WordArray.init(d);if(!this.v){var e={iv:this.iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};this.i&&(e.iv=b,b=null);this.v=this.B?CryptoJS.algo.AES.createEncryptor(this.key,
e):CryptoJS.algo.AES.createDecryptor(this.key,e)}if(b){var f=la(this.v.process(b));this.g.C()&&(f=f.concat(la(this.v.finalize())));if(this.i<this.g.v()){var g=this.i-(this.g.v()-d.byteLength);0<g&&(f=f.slice(g))}else f=null;this.h?this.push(f):f?this.l&&this.l.write(f,function(){this.g.C()?this.oa():this.H?this.H()?this.g.i():this.l.cancel(function(h,k){this.oa(h,k)}.bind(this)):this.g.i()}.bind(this)):this.g.i();f=null}else this.h?2==this.h?(this.h=3,this.push([])):this.h=3:this.g.i()}catch(h){if(this.h)throw h;
this.oa(h)}};this.oa=function(d,b){this.g&&(this.g.S(),this.g=null);this.o&&(d?this.o(d):this.o(!1,b))}}function oa(a){const c=zb_require("readable-stream");A.super_!==c.Readable&&zb_inherits(A,c.Readable);this.h={highWaterMark:8E5};Object.assign(this.h,void 0);this.info=a;this.g=null;this.createReadStream=function(d){this.ya();this.g=new A(this.info,this.h);var b=0;d&&d.start&&(b=d.start);this.g.start(b);return this.g};this.ya=function(){this.g&&(this.g.destroy(),this.g=null)}}
function pa(a,c,d){a.u=function(b){c.write(b,function(){a.C()?d&&d():a.i()})};a.J(0,function(){c.l(a.h(),function(){a.i()})})};function qa(){this.i=!0;this.o=this.s=null;this.h=this.B=!1;this.J=function(){return null!=this.s};this.I=function(a){if(this.i)try{var c=window.sessionStorage.getItem("language"),d=window.sessionStorage.getItem("drive"),b=window.sessionStorage.getItem("skipLogin");window.sessionStorage.clear();c&&window.sessionStorage.setItem("language",c);d&&!a&&window.sessionStorage.setItem("drive",d);b&&!a&&window.sessionStorage.setItem("skipLogin",b)}catch(e){this.i=!1,console.error(e)}};this.v=function(a){var c=
null;if(this.i)try{c=window.sessionStorage.getItem(a)}catch(d){this.i=!1,console.error(d)}return c};this.S=function(a){var c=this.v("login_state");return c&&a==c?!0:!1};this.l=function(a,c){if(this.i)try{return window.sessionStorage.setItem(a,c.toString()),!0}catch(d){this.i=!1,console.error(d)}return!1};this.L=function(a){if(this.i)try{window.sessionStorage.removeItem(a)}catch(c){this.i=!1,console.error(c)}};this.da=function(){var a=this.v("language"),c=this.v("drive"),d=this.v("skipLogin");this.o=
{};a&&(this.o.language=a,this.M(a));c&&(this.o.N=c,this.ra(c));d&&this.sa(d)};this.Ba=function(){var a=this.g("drive");a||(this.o||this.da(),a=this.o.N);return a};this.ra=function(a){this.l("drive",a);return this.s?this.s.drive!=a?(this.s.drive=a,this.s[a]||(this.s[a]={}),this.B=!0):!1:!0};this.sa=function(a){a?this.h=this.J():(this.h=!1,this.Ea()&&(this.B=!0));this.l("skipLogin",this.h)};this.T=function(a){var c=this.g("language");!c&&a&&this.o&&(c=this.o.language);return c};this.M=function(a){this.l("language",
a);this.s&&this.s.language!=a&&(this.s.language=a,this.B=!0)};this.Ha=function(a){if(window.indexedDB){var c=window.indexedDB.open("zgayard1946");c.onerror=function(){if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};c.onupgradeneeded=function(d){d.target.result.createObjectStore("settings",{keyPath:"key"})};c.onsuccess=function(d){var b=d.target.result;d=b.transaction("settings","readwrite");d.oncomplete=function(){b.close();
a&&a()};d.objectStore("settings").getAll().onsuccess=function(e){this.s={};e.target.result.forEach(function(f){this.s[f.key]=f.value}.bind(this));this.h=(e=this.s.drive)&&this.s[e]&&this.s[e].refresh_token?!0:!1}.bind(this)}.bind(this)}else if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};this.Fa=function(a){var c=window.indexedDB.deleteDatabase("zgayard1946");c.onerror=function(){if(a)a("Failed to dropt IndexedDB.");
else throw Error("Failed to dropt IndexedDB.");};c.onsuccess=function(){this.I(!0);this.s=null;this.h=!1;a?a():console.log("IndexedDB has been dropped.")}.bind(this)};this.qa=function(){this.B&&this.s&&(this.H(function(a){a.clear().onsuccess=function(){for(var c in this.s)a.put({key:c,value:this.s[c]})}.bind(this)}.bind(this)),this.B=!1)};this.u=function(a){var c=this.g("drive");return c&&(c=this.s[c])?c[a]:null};this.Ea=function(){var a=this.g("drive");return a&&(a=this.s[a])&&a.refresh_token?(delete a.refresh_token,
!0):!1};this.C=function(a,c,d){if(this.s){var b=this.g("drive");if(c)this.s[b]||(this.s[b]={}),this.s[b][a]=c;else if(this.s[b])delete this.s[b][a];else{d&&d instanceof Function&&d();return}d?(a=void 0,d instanceof Function&&(a=d),this.H(function(e){e.put({key:b,value:this.s[b]})}.bind(this),a)):this.B=!0}else d&&d instanceof Function&&d()};this.Da=function(a){this.I(!0);if(this.s){var c=this.g("drive");delete this.s[c].refresh_token;delete this.s.drive;this.H(function(d){d.put({key:c,value:this.s[c]});
d.delete("drive")}.bind(this),a)}else a&&a()};this.Ia=function(a,c){this.Ca({drive:this.g("drive"),root:this.u("root"),fid:a,time:c})};this.Ga=function(){var a=this.g("recent");return a&&a.drive==this.g("drive")&&a.root==this.u("root")?a:null};this.H=function(a,c){window.indexedDB.open("zgayard1946").onsuccess=function(d){var b=d.target.result;d=b.transaction("settings","readwrite");d.oncomplete=function(){b.close();c&&c()};d=d.objectStore("settings");a&&a(d)}};this.g=function(a){return this.s&&this.s[a]?
this.s[a]:null};this.Ca=function(a){this.s&&(this.s.recent=a);this.H(function(c){c.put({key:"recent",value:a})}.bind(this),void 0)}};var B={};function ra(a,c,d){this.m=a;this.A=c;this.g=d}function C(a,c,d){this.T=d;this.I=c;this.h=null;this.g=a;this.super||(this.super=function(){})}
function D(a,c){var d="POST",b=a.B().concat(encodeURI(c.R)),e=new XMLHttpRequest;c&&c.ea&&(d=c.ea);e.open(d,b,!0);c&&c.D?e.setRequestHeader("Authorization",c.D):c&&c.ga?(d="Bearer",c&&c.ha&&(d=c.ha),e.setRequestHeader("Authorization",d+" "+c.ga)):e.setRequestHeader("Authorization",a.h);if(c&&c.aa)for(var f in c.aa)e.setRequestHeader(f,c.aa[f]);c&&c.j&&(e.onload=function(g){g=g.target;4==g.readyState&&(401==g.status&&this.g.h&&!c.La?(console.log("Retry to send ajax."),c&&(c.La=!0,sa(this),c.D=this.h,
D(this,c))):c.j(g))}.bind(a));e.send(c.ka)}function ta(a){return a.h?a.h:""}
function sa(a,c){if(c&&(a.h=a.g.v("access_token"),a.h))return null;c=a.g.h;var d={},b=ja();if(b&&b.token_type&&b.access_token){a.h=b.token_type+" "+b.access_token;a.g.l("access_token",a.h);if(b&&b.state)if(a.g.S(b.state))a.g.L("login_state");else return"Unauthorized access to this url.";return null}b&&b.code?d.code=b.code:c&&(d.pa=a.g.u("refresh_token"));if(d.code||d.pa){if(b&&b.state)if(a.g.S(b.state))a.g.L("login_state");else return"Unauthorized access to this url.";if((b=ua(a,d))&&b.token_type&&
b.access_token)a.h=b.token_type+" "+b.access_token,a.g.l("access_token",a.h),c&&d.code&&b.refresh_token&&a.g.C("refresh_token",b.refresh_token),b.logout&&a.g.l("logout_url",b.logout);else return b&&b.error?"["+b.error+"] "+b.error_description:"Unknown error occured when doing authorization."}else return c&&(d.Aa=!0),(b=ua(a,d))&&b.url?(b.state&&(a.g.l("login_state",b.state)||(b.state=a.o())),b.logout&&a.g.l("logout_url",b.logout),window.location.href=b.url.concat("&state=".concat(encodeURIComponent(b.state))),
"Need signin."):b&&b.error?"["+b.error+"] "+b.error_description:"Unknown error occured when doing authorization.";return null}
function va(){var a=E;a.h=null;a.g.L("access_token");var c=a.g.v("logout_url");if(c)window.location.href=c;else{c=new FormData;c.append("drive_type",a.o());c.append("action","logout");var d=new XMLHttpRequest;d.open("POST",a.I,!0);d.withCredentials=!0;d.onload=function(b){b=b.target;4==b.readyState&&200==b.status&&(b=JSON.parse(b.responseText))&&b.logout&&(window.location.href=b.logout)};d.send(c)}}function wa(a){var c=E;if(!a||!a.ba)throw Error("newname is not specified.");c.C(a)}
function xa(a){var c=E;if(!a||!a.F)throw Error("parentid is not specified.");if(!a||!a.ma)throw Error("oldparentid is not specified.");c.C(a)}C.prototype.J=function(a,c){c&&c(!1)};function F(a,c){return new ya(c,a)}function za(a){return{P:a.status,K:a.responseText}}function G(a,c,d,b,e,f,g,h){c={R:c,ea:d,j:function(k){var l=za(k),m=!1;b&&k.status!=b&&(m=!0);if(m)if(e&&e.j)e.j(l);else throw Error(JSON.stringify(l));else h(l)}.bind(a)};Aa(e,c);f&&(c.aa=f);g&&(c.ka=g);D(a,c)}
function H(a,c,d,b){G(a,c,"GET",200,d,null,null,function(e){b(e.K)})}function Aa(a,c){a.ha&&(c.ha=a.ha);a.ga&&(c.ga=a.ga);a.D&&(c.D=a.D)}
function ua(a,c){if(!c)throw Error("Options are not specifed when auth onedrive.");var d=new FormData;d.append("drive_type",a.o());c.clientId&&d.append("client_id",c.clientId);c.Oa&&d.append("redirect_uri",c.Oa);c.Ma&&d.append("client_secret",c.Ma);c.code?d.append("code",c.code):c.pa?d.append("refresh_token",c.pa):c.Aa&&d.append("need_code",c.Aa);c=null;var b=new XMLHttpRequest;b.open("POST",a.I,!1);b.withCredentials=!0;b.send(d);if(4==b.readyState)if(200==b.status)c=JSON.parse(b.responseText);else throw Error(b.responseText+
" ("+b.status+")");return c}
function Ba(a){a.ia=C;if("function"===typeof Object.create)a.prototype=Object.create(C.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});else{var c=function(){};c.prototype=C.prototype;a.prototype=new c;a.prototype.constructor=a}a.prototype.getSuperClass||(a.prototype.getSuperClass=function(){return this.constructor.ia});a.prototype.super||(a.prototype.super=function(...d){return this.constructor.ia.call(this,...d)});a.prototype.superCall||(a.prototype.superCall=function(d,
...b){return d?this.constructor.ia.prototype[d].call(this,...b):this.constructor.ia.call(this,...b)})}
function Ca(a,c){this.N=c;this.o=a;this.B="";this.g=this.i=0;this.h=null;if(!this.o||!this.o.X)throw Error("fnm is not specified.");this.l=function(d,b){this.i=d;this.N.S(this.o,d,function(e,f){if(e)this.B=e,b&&b(f);else throw console.error(f),Error(JSON.stringify(f));}.bind(this))};this.write=function(d,b){var e=null;if(this.h){if(this.h instanceof ArrayBuffer){var f=this.h.byteLength;0<f?(e=new Uint8Array(f+d.byteLength),e.set(new Uint8Array(this.h),0),e.set(new Uint8Array(d),f)):e=new Uint8Array(d)}else e=
0<this.h.length?new Uint8Array(this.h.concat(d)):new Uint8Array(d);this.h=null}else e=new Uint8Array(d);var g=new Blob([e],{type:"application/octet-binary"}),h="bytes "+this.g+"-";this.g+=g.size;h+=this.g-1+"/"+this.i;var k=0,l=function(){var m=new XMLHttpRequest;m.open("PUT",this.B,!0);m.setRequestHeader("Content-Range",h);m.onload=function(n){g=null;n=n.target;if(4==n.readyState){var w=this.N.L(n);if(-9==w)throw d=null,Error(n.responseText+" ("+n.status+")");if(-1!=w&&0!=w&&w<this.g){var p=d instanceof
ArrayBuffer?d.byteLength:d.length;p-=this.g-w;if(0<p){p=d.slice(p);d=null;if(this.g>=this.i){this.write(p,b);return}this.h=p;this.g=w}else throw d=null,Error("Can NOT continue to upload buffer.");}b&&b(n.responseText)}}.bind(this);m.onerror=function(){1>k?(k++,setTimeout(function(){l()},500)):g=d=null};m.send(g)}.bind(this);l()};this.cancel=function(d){this.N.J(this.B,d)};this.C=function(){return this.i}}
function ya(a,c){this.N=c;this.B=a;this.url="";this.name=null;this.I=this.l=this.g=this.size=0;this.T=!1;this.M=16E3;a.U&&(this.M=a.U);this.H=this.o=0;this.u=null;this.J=function(d,b){if(this.T){this.l&&(this.I=this.l,this.l=0);if(d){if(d>=this.h())throw console.log("offset:"+d+",size:"+this.h()),Error("offset can not be bigger than input size.");this.g=d}else this.g=0;b&&b()}else this.N.M(this.B,function(e,f){this.T=!0;if(e){this.size=e._size;this.url=e.m;this.name=e.A;this.H="1"==e._type?1:0;if(d){if(d>=
this.h())throw Error("offset can not be bigger than input size.");this.g=d}b&&b()}else throw Error(f.K+" ("+f.P+")");}.bind(this))};this.v=function(){return this.g};this.h=function(){return this.size};this.C=function(){return this.g>=this.h()};this.i=function(d){d||(d=this.M);this.L(d)};this.S=function(){};this.L=function(d){if(!d||!this.l){if(d)this.l=d;else if(this.l)d=this.l;else throw Error("size must be specified.");if(!this.I){var b=this.g+d-1,e=function(){var f=new XMLHttpRequest;10<=this.o?
(f.open("GET",this.N.T,!0),f.setRequestHeader("Zb-Url",this.url)):f.open("GET",this.url,!0);this.B.D?f.setRequestHeader("Authorization",this.B.D):f.setRequestHeader("Authorization",ta(this.N));f.setRequestHeader("Range","bytes="+this.g+"-"+b);f.responseType="arraybuffer";f.onload=function(g){if(this.I)this.I=0,this.l&&this.L();else if(this.l=0,g=g.target,4==g.readyState)if(this.o=10>this.o?1:11,200==g.status||206==g.status){2==this.H&&(this.H=1);var h=parseInt(g.getResponseHeader("content-length"),
10);if(h)this.g+=h;else{if(h=g.getResponseHeader("content-range")){var k=h.indexOf("-");if(0>k)h=0;else{k++;var l=h.indexOf("/",k);h=l<=k?0:parseInt(h.slice(k,l),10)}}else h=0;this.g=h?h+1:b+1}200==g.status&&this.g<this.h()?this.g=this.h():this.g>this.h()&&(this.g=this.h());this.u&&this.u(g.response,this);g.response=null}else if(401==g.status&&1==this.H)console.log("Retry auth."),this.H=2,sa(this.N),this.B.D&&delete this.B.D,e();else throw Error(g.responseText+" ("+g.status+")");}.bind(this);f.onerror=
function(){if(0==this.o&&this.N.T)this.o=10,e();else if(1==this.o||11==this.o)this.o++,setTimeout(function(){e()},500)}.bind(this);f.send()}.bind(this);e()}}}};function Da(a,c,d){this.super(a,c,d);this.o=function(){return"onedrive"};this.H=function(b){H(this,"/me/drive",b,function(e){b&&b.j&&(e=JSON.parse(e).quota,b.j(!1,{wa:e.deleted,va:e.total,xa:e.used}))})};this.l=function(b){var e="/me/drive/root/children";if(b){if(b._fname){var f=function(g){var h={$:"",j:function(k,l){if(b&&b.j)k?b.j(k):(k=[],l&&k.push(l),b.j(!1,k));else if(k)throw Error(JSON.stringify(k));}};Aa(b,h);this.i(h,g)}.bind(this);b.F?(e={$:b.F,j:function(g,h){if(g)if(b&&b.j)b.j(g);else throw Error(JSON.stringify(g));
else f(h.Ka.concat("/").concat(h.A).concat("/").concat(b._fname))}},Aa(b,e),this.i(e)):f("/drive/root:/".concat(b._fname));return}b.F&&(e="/me/drive/items/"+b.F+"/children")}H(this,e.concat(v({select:"id,name,parentReference,lastModifiedDateTime,size,folder,file"},!0)),b,function(g){if(b&&b.j){var h=[];g&&JSON.parse(g).value.forEach(function(k){h.push(this.V(k))},this);b.j(!1,h)}}.bind(this))};this.u=function(b){this.i(b)};this.v=function(b){if(!b||!b.Y)throw Error("Name of new folder is not specified.");
var e="/me/drive/root/children";b.F&&(e="/me/drive/items/"+b.F+"/children");var f=JSON.stringify({name:b.Y,folder:{},"@microsoft.graph.conflictBehavior":"fail"});G(this,e,"POST",201,b,{"Content-Type":"application/json;charset=UTF-8"},f,function(g){b&&b.j&&(g=this.V(JSON.parse(g.K)),b.j(!1,g))}.bind(this))};this.delete=function(b){var e="/me/drive/items/".concat(b.O);G(this,e,"DELETE",204,b,null,null,function(){b&&b.j&&b.j(!1)})};this.S=function(b,e,f){e={R:"/me",ea:"POST",D:b.D,aa:{"Content-Type":"application/json;charset=UTF-8",
"Cache-Control":"no-cache",Pragma:"no-cache"},j:function(g){g=za(g);var h="";200<=g.P&&299>=g.P&&(h=JSON.parse(g.K).uploadUrl);f(h,g)}.bind(this)};e.R=b.W?"/me/drive/items/"+b.W+":/":e.R+"/drive/root:/";e.R+=b.X;e.R+=":/createUploadSession";e.ka=JSON.stringify({item:{"@microsoft.graph.conflictBehavior":"replace",name:b.X}});D(this,e)};this.L=function(b){if(0<=[200,201].indexOf(b.status))return-1;if(0>[202].indexOf(b.status))return-9;if((b=JSON.parse(b.responseText).nextExpectedRanges)&&b.length){var e=
b[0].indexOf("-");if(0<e)return parseInt(b[0].substring(0,e),10)}return 0};this.J=function(b,e){var f=new XMLHttpRequest;f.open("DELETE",b,!0);f.onload=function(g){g=g.target;if(4==g.readyState){var h={P:g.status,K:g.responseText};200<=g.status&&299>=g.status?e&&e(!1,h):(console.log(g.responseText+" ("+g.status+")"),e&&e(h))}}.bind(this);f.send()};this.M=function(b,e){var f="/me/drive/items/".concat(b.m),g={j:function(h,k){var l=null;k&&!h&&(k=JSON.parse(k),l={m:k["@microsoft.graph.downloadUrl"],
A:k.name,_size:k.size});e(l,h)}};b.D&&(g.D=b.D);H(this,f.concat(v({select:"name,size,@microsoft.graph.downloadUrl"},!0)),g,function(h){g.j(!1,h)})};this.B=function(){return"https://graph.microsoft.com/v1.0"};this.C=function(b){if(!b||!b.O)throw Error("fid is not specified.");var e="/me/drive/items/".concat(b.O),f={};b.ba&&(f.name=b.ba);b.F&&(f.parentReference={id:b.F});f=JSON.stringify(f);if("{}"==f)throw Error("No property to be updated.");G(this,e,"PATCH",200,b,{"Content-Type":"application/json;charset=UTF-8"},
f,function(){b&&b.j&&b.j(!1)})};this.i=function(b,e){var f="";f=e?e.startsWith("/me")?e:"/me".concat(e):"/me/drive/items/"+b.$;G(this,f.concat(v({select:"id,name,parentReference,lastModifiedDateTime,size,folder,file"},!0)),"GET",0,b,null,null,function(g){if(b&&b.j)200==g.P?(g=this.V(JSON.parse(g.K)),b.j(!1,g)):404==g.P&&e?b.j(!1):b.j(g);else if(200!=g.P)throw Error(JSON.stringify(g));}.bind(this))};this.V=function(b){var e={m:b.id,A:b.name,_size:b.size,ua:b.lastModifiedDateTime,Ka:b.parentReference.path,
_parentId:b.parentReference.id,_type:"0"};b.folder?e._type="1":b.file&&(e._type="2");return e}}Ba(Da);B.onedrive=new ra("onedrive","Microsoft OneDrive",Da);function Ea(a,c,d){this.super(a,c,d);this.o=function(){return"googledrive"};this.H=function(b){var e=this.i("/about").concat(v({fields:"storageQuota"}));H(this,e,b,function(f){b&&b.j&&(f=JSON.parse(f).storageQuota,b.j(!1,{wa:f.usageInDriveTrash,va:f.limit,xa:f.usage}))})};this.l=function(b){var e=this.i("/files"),f="'"+(b.F?b.F:"root")+"' in parents";b._fname&&(f=f.concat(" and name = '"+b._fname+"'"));H(this,e.concat(v({fields:"files(id,name,mimeType,parents,modifiedTime,size)",q:f},!0)),b,function(g){if(b&&
b.j){var h=[];JSON.parse(g).files.forEach(function(k){h.push(this.V(k))},this);b.j(!1,h)}}.bind(this))};this.u=function(b){var e=this.i("/files/").concat(b.$);H(this,e.concat(v({fields:"id,name,mimeType,parents,modifiedTime,size"},!0)),b,function(f){b&&b.j&&(f=this.V(JSON.parse(f)),b.j(!1,f))}.bind(this))};this.v=function(b){if(!b||!b.Y)throw Error("Name of new folder is not specified.");var e=this.i("/files");G(this,e,"POST",200,b,{"Content-Type":"application/json;charset=UTF-8"},JSON.stringify({mimeType:"application/vnd.google-apps.folder",
name:b.Y,parents:[b.F?b.F:"root"]}),function(f){b&&b.j&&(f=this.V(JSON.parse(f.K)),b.j(!1,f))}.bind(this))};this.delete=function(b){var e=this.i("/files/").concat(b.O);G(this,e,"DELETE",204,b,null,null,function(){b&&b.j&&b.j(!1)})};this.S=function(b,e,f){var g=function(k){var l={},m="POST",n="/files?uploadType=resumable";k?(m="PATCH",n="/files/"+k+"?uploadType=resumable"):(l.name=b.X,b.W&&(l.parents=[b.W]));k={R:"/upload".concat(this.i(n)),ea:m,D:b.D,aa:{"X-Upload-Content-Length":e,"X-Upload-Content-Type":"application/octet-stream",
"Content-Type":"application/json; charset=UTF-8"},ka:JSON.stringify(l),j:function(w){var p=za(w),y="";200<=p.P&&299>=p.P&&(y=w.getResponseHeader("location"));f(y,p)}.bind(this)};D(this,k)}.bind(this),h={j:function(k,l){k?f("",k):0<l.length?g(l[0].m):g()},_fname:b.X,D:b.D};b.W&&(h.F=b.W);this.l(h)};this.L=function(b){if(0<=[200,201].indexOf(b.status))return-1;if(0>[308].indexOf(b.status))return-9;if(b=b.getResponseHeader("range")){var e=b.indexOf("-");if(0<e)return parseInt(b.slice(e+1),10)+1}return 0};
this.M=function(b,e){var f=this.i("/files/").concat(b.m),g={$:b.m,j:function(h,k){var l=null;k&&!h&&(l=k,l.m=this.B().concat(encodeURI(f)).concat(v({alt:"media"})),this.g.h&&(l._type="1"));e(l,h)}.bind(this)};b.D&&(g.D=b.D);this.u(g)};this.B=function(){return"https://www.googleapis.com"};this.C=function(b){var e=!0,f=this.i("/files/").concat(b.O);b.ma&&b.F&&(f=f.concat(v({addParents:b.F,removeParents:b.ma})),e=!1);var g={};b.ba&&(g.name=b.ba,e=!1);if(e)throw Error("No property to be updated.");G(this,
f,"PATCH",200,b,{"Content-Type":"application/json;charset=UTF-8"},JSON.stringify(g),function(){b&&b.j&&b.j(!1)})};this.i=function(b){return"/drive/v3".concat(b)};this.V=function(b){var e={m:b.id,A:b.name,_size:b.size,ua:b.modifiedTime,_type:"2"};b.parents&&0<b.parents.length&&(e._parentId=b.parents[0]);this.da(b.mimeType)&&(e._type="1");return e};this.da=function(b){return"application/vnd.google-apps.folder"==b}}Ba(Ea);B.googledrive=new ra("googledrive","Google Drive",Ea);function Fa(a,c){var d=I;this.g=this.h=null;this.v=d;this.i=1;this.u=a;this.l=c;this.o=function(){var b=new A({la:1==this.i,Z:this.v,fa:this.h,na:this.g});b.H=function(){var e={_type:1,_wtype:this.i,_speed:b.L(),_pos:this.h.v(),_size:this.h.h()};this.l(e);return this.u()?!1:!0}.bind(this);b.o=function(e,f){var g={_type:2,_wtype:this.i,_size:this.g.C()};e?g._err=e.message||e.Qa:f?g._type=3:this.g.v&&(g._blob=this.g.v());this.l(g)}.bind(this);b.start()};this.Na=function(b){var e=E;this.i=1;this.h=F(e,
{m:b,U:16E5});this.g=new ma;this.o()};this.Pa=function(b,e,f){var g=E;this.i=2;this.h=new na({_blob:e,U:16E5});this.g=new Ca({X:b,W:f},g);this.o()}};var J=null,E=null,K=[],L=0,I=null,M=[],N=0;function O(a){var c=document.getElementById("spanError");"string"===typeof a?window.msgs&&a&&window.msgs[a]?c.innerText=window.msgs[a]:c.innerText=a:a&&(c.innerText=JSON.stringify(a));document.getElementById("spanInfo").style.display="none";c.style.display=a?"block":"none"}
function P(a){var c=document.getElementById("spanInfo");window.msgs&&a&&window.msgs[a]?c.innerText=window.msgs[a]:c.innerText=a;document.getElementById("spanError").style.display="none";c.style.display=a?"block":"none"}
function Q(a){var c=document.getElementById("spanNotify");window.msgs&&a&&window.msgs[a]?c.innerText=window.msgs[a]:c.innerText=a;a&&(N&&(clearTimeout(N),N=0),c.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+20+"px",c.style.display="",N=setTimeout(function(){c.style.display="none";N=0},3E3))}
function R(a,c){function d(e){Ga--;"error"==e.type&&(R.za=!0);if(0==Ga){var f=R.za;delete R.za;c&&c(f)}e=e.target||e.srcElement;e.hasAttribute("temporary")&&e.remove()}Ga++;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);b.setAttribute("temporary","1");b.addEventListener("load",d);b.addEventListener("error",d);document.body.appendChild(b)}var Ga=0;
function Ha(a){J.J()&&(document.getElementById("chkSaveKey").checked?Ia(function(c){var d="";c&&c.lsauth&&(d=z(!0,a,c.lsauth).toString(CryptoJS.enc.Base64url));J.C("key_words",d,!0)}):J.C("key_words",null,!0))}function Ja(){J.Da(function(){va()})}
function Ia(a){var c=new FormData;c.append("drive_type","localstorage");var d=new XMLHttpRequest;d.open("POST","https://zgayard.f5.si/grantauth.php",!0);d.withCredentials=!0;d.onload=function(b){var e=b.target;4==e.readyState&&(b=null,200==e.status?(e=JSON.parse(e.responseText))?e.error?O("["+e.error+"] "+e.error_description):e.lsauth?b=e:O("lsFailed"):O("lsFailed"):O(e.responseText+" ("+e.status+")"),a&&a(b))};d.send(c)}
function Ka(a){var c=document.getElementById("divSet"),d=document.getElementById("selDrive"),b=fa(d,"input");a?(d.disabled=!0,b.style.display="",c.setAttribute("cancelAll","1"),S(),document.getElementById("divHeader").style.display="",document.getElementById("tblst").style.display="",document.getElementById("tblQueue").style.display="",document.getElementById("divAction").style.display=""):(d.disabled=!1,b.style.display="none");c.style.display="block"}
function La(a){if(!window.msgs||window.msgs.lang!=a){var c=window.msgs;window.msgs=null;R("msg/"+a+".js",function(){window.msgs?(window.msgs.lang=a,J.M(a),Ma()):(console.log("Message file of '"+a+"' is missing."),c?window.msgs=c:R("msg/en.js",function(){window.msgs?(window.msgs.lang="en",J.M(window.msgs.lang),Ma()):O("Message file is missing.")}))})}}
function Ma(){var a=window.msgs;a.spanConfNotice=a.spanConfNotice.replace("{0}","_zgayard_.conf");for(var c=document.getElementsByTagName("*"),d=0;d<c.length;d++){var b=c[d],e=null;b.hasAttribute("wordid")&&(e=a[b.getAttribute("wordid")]);!e&&b.id&&(e=a[b.id]);e&&("button"==b.type?b.value=e:b.innerText=e);b.hasAttribute("tid")&&(e=a[b.getAttribute("tid")])&&(b.title=e)}c=document.getElementById("seLang");for(d in aa)b=document.createElement("option"),b.value=d,b.innerText=aa[d],d==a.lang&&(b.selected=
!0),c.appendChild(b)}function Na(a){P("loading");(a=B[a])?(E=new a.g(J,"https://zgayard.f5.si/grantauth.php","https://zgayard.f5.si/relay.php"),(a=sa(E,!0))?O(a):(J.qa(),E.l({j:function(c,d){c?O(JSON.stringify(c)):0==d.length?S(!0,!0):Oa(d[0].m)},_fname:"_zgayard_.conf"}))):O("unkDrive")}
function Pa(){var a=!1;document.getElementById("selDrive").disabled||(a=J.ra(document.getElementById("selDrive").value));J.sa(document.getElementById("chkSkipLogin").checked);La(document.getElementById("seLang").value);a?(J.I(),Na(document.getElementById("selDrive").value)):J.qa();Qa()}
function Qa(a){var c=document.getElementById("divSet"),d=!1;a&&"boolean"===typeof a?d=!0:"1"==c.getAttribute("cancelAll")&&(d=!0);d&&(document.getElementById("divPwd").style.display="",document.getElementById("divHeader").style.display="block",document.getElementById("tblst").style.display="block",document.getElementById("tblQueue").style.display="block",document.getElementById("divAction").style.display="block",c.removeAttribute("cancelAll"));c.style.display=""}
function Ra(a,c){var d=document.getElementById("divPwd"),b="none";a?(d.setAttribute("addroot","1"),b="block"):d.removeAttribute("addroot");a=d.getElementsByTagName("*");for(d=0;d<a.length;d++){var e=a[d];e.classList.contains("addroot")?e.style.display=b:e.classList.contains("firstep")?e.style.display="none"!=b&&c?"block":"none":e.classList.contains("chgroot")&&(e.style.display="none"==b?"block":"none");"password"==e.type&&(e.value="")}Sa("#lblKeyFile")}
function Ta(){if(confirm(window.msgs.delConfirm)){P("deleting");var a=document.getElementById("selRoot"),c=a.value,d=-1;K.forEach(function(f,g){f.root==c&&(d=g)});var b=function(){if(d==L)window.location.reload();else{var f=a.getElementsByTagName("option"),g;for(g=0;g<f.length;g++){var h=f[g];if(h.value==c){a.removeChild(h);break}}P();Q("delrootDone")}};if(0<=d){var e=function(f){E.delete({j:function(g){g?O(g.K):(K.splice(d,1),Ua(b))},O:f})};E.l({j:function(f,g){f?console.error(f):0==g.length?(K.splice(d,
1),Ua(b)):e(g[0].m)},_fname:K[d].root})}else b()}}function S(a,c){var d=document.getElementById("divPwd");Ra(a,c);d.style.display="block";P()}function Va(){"1"==document.getElementById("divSet").getAttribute("cancelAll")?Qa(!0):document.getElementById("divPwd").style.display=""}function Wa(){var a=q(),c=a.previousElementSibling.cloneNode();c.value="";a.parentElement.insertBefore(c,a)}
function Sa(a){a=q(a).parentElement.getElementsByTagName("input");for(var c=a.length-1;0<c;c--)a[c].remove();a[0].value=""}
function Xa(){P("loading");for(var a=document.getElementById("divPwd").hasAttribute("addroot"),c=document.getElementById("pwdKey").value,d=document.getElementById("divfKey").getElementsByTagName("input"),b=[],e=0;e<d.length;e++)for(var f=d[e].files,g=0;g<f.length;g++)b.push(f[g]);if(c||0<b.length){if(a){d=document.getElementById("pwdKeyRe").value;if((c||d)&&c!=d){O("diffPwd");return}if(!document.getElementById("txtRoot").value){O("noRoot");return}}var h=null;c&&(h=CryptoJS.enc.Utf8.parse(c));if(0<
b.length){e=0;var k=new FileReader,l=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA512,"zb12");k.h=function(){k.readAsArrayBuffer(b[e].slice(0,1023));e++};k.onload=function(m){l.update(new CryptoJS.lib.WordArray.init(m.target.result));e<b.length?k.h():(h?h.concat(l.finalize()):h=l.finalize(),h.clamp(),Za(h,a))};k.h()}else Za(h,a)}else O("noPwd")}
function Za(a,c){var d=CryptoJS.HmacMD5(a,"zgayard").toString(CryptoJS.enc.Base64url).slice(0,8),b=null;if(c){var e={root:document.getElementById("txtRoot").value};document.getElementById("chkEncryFname").checked&&(e.encfname=!0);var f=!1;K.forEach(function(k){k.root==e.root&&(f=!0)});f?O("dupRoot"):(J.C("root",e.root),Ha(a),b=CryptoJS.lib.WordArray.random(1024),I=x(b),e.iv=d.concat($a(!0,b,a)),L=K.length,K.push(e),ab(e,!0),Ua())}else{var g=document.getElementById("selRoot").value,h=-1;K.forEach(function(k,
l){k.root==g&&(h=l)});0<=h&&K[h].iv&&d==K[h].iv.slice(0,d.length)?(L=h,J.C("root",g),Ha(a),b=$a(!1,K[L].iv.slice(d.length),a),I=x(b),bb()):da()?O("pwdError"):S()}}function $a(a,c,d){d=x(d);var b=null;a?b=c:b=CryptoJS.enc.Base64url.parse(c);c=z(a,b,d);return a?c.toString(CryptoJS.enc.Base64url):c}
function Ua(a){var c=CryptoJS.enc.Utf8.parse(JSON.stringify(K));c=new Blob([new Uint8Array(la(c))],{type:"application/octet-binary"});c=new na({_blob:c,U:262144});var d=new Ca({X:"_zgayard_.conf"},E);pa(c,d,a||bb)}
function Oa(a){var c=new ma;pa(F(E,{m:a}),c,function(){var d=new CryptoJS.lib.WordArray.init(c.u());d=JSON.parse(d.toString(CryptoJS.enc.Utf8));Array.isArray(d)?K=d:K.push(d);var b=-1,e=J.u("root"),f=document.getElementById("selRoot");f.innerHTML="";K.forEach(function(h,k){var l=!1;e&&h.root==e&&(l=!0);ab(h,l,f);l&&(b=k)});if(0<=b){L=b;var g=J.u("key_words");g?Ia(function(h){h&&h.lsauth&&!h.newkey?(h=z(!1,CryptoJS.enc.Base64url.parse(g),h.lsauth),Za(h)):S()}):S()}else L=0,S()})}
function ab(a,c,d){d=d||document.getElementById("selRoot");var b=document.createElement("option");b.value=a.root;b.innerText=a.root;c&&(b.selected=!0);d.appendChild(b)}function cb(){confirm(window.msgs.dropConfirm)&&J.Fa(function(a){a?O(a):va()})};function T(a){if(K[L].encfname){var c=I;a=CryptoJS.enc.Utf8.parse(a);c=z(!0,a,c).toString(CryptoJS.enc.Base64url)}else c=a;return c}function db(a){if(K[L].encfname)try{var c=I,d=CryptoJS.enc.Base64url.parse(a);return z(!1,d,c).toString(CryptoJS.enc.Utf8)}catch(b){console.error(b)}return a}
function eb(){J=new qa;J.Ha(function(a){a&&O("IndexedDB is not supported in your browser settings.");a=J.T();a||(J.da(),a=J.T(!0));if(!a){a=navigator.language;var c=a.indexOf("-");0<c&&(a=a.substring(0,c))}La(a);a=J.Ba();c=document.getElementById("selDrive");var d=ja(),b;for(b in B){var e=document.createElement("option");e.value=b;e.innerText=B[b].A;a?a==b&&(e.selected=!0):d&&d.state==B[b].m&&(a=b,e.selected=!0);c.appendChild(e)}J.J()&&(document.getElementById("divSkipLogin").style.display="block",
document.getElementById("divSaveKey").style.display="block",J.h&&(document.getElementById("chkSkipLogin").checked=!0),J.u("key_words")&&(document.getElementById("chkSaveKey").checked=!0));a?Na(a):Ka()})}function bb(){Va();fb(function(){var a=K[L].root;E.l({_fname:a,j:function(c,d){c?O(JSON.stringify(c)):d&&0<d.length?(M=[],M.push(d[0]),U(),gb()):E.v({Y:a,j:function(b,e){b?O(JSON.stringify(b)):(M=[],M.push(e),U())}})}})})}
function fb(a){E.H({j:function(c,d){if(c)O(c);else{c=document.getElementById("spanQuota");c.setAttribute("total",d.va);c.setAttribute("trash",d.wa);d=d.xa;c=document.getElementById("spanQuota");"string"==typeof d&&(d=parseInt(d,10));var b=parseInt(c.getAttribute("total"),10),e=parseInt(c.getAttribute("trash"),10),f=0;c.hasAttribute("used")&&(f=parseInt(c.getAttribute("used"),10));f+=d;c.setAttribute("used",f);c.innerText=window.msgs.quotaInfo.replace("{0}",ka(b-f-e));a&&a()}}})}
function gb(){var a=document.getElementById("divHistory");a.style.display="";var c=J.Ga();c&&E.u({$:c.fid,j:function(d,b){if(!d){d=a.getElementsByTagName("a")[0];d.innerText=db(b.A);d.setAttribute("fid",b.m);b._parentId&&d.setAttribute("parentId",b._parentId);if(c.time){d.setAttribute("time",c.time);b=d.innerText.concat(" [");var e=b.concat,f=Math.floor(c.time),g=Math.floor(f/3600);f-=3600*g;var h=Math.floor(f/60);f-=60*h;var k=[];0<g?(k.push(g.toString()),k.push("0".concat(h).slice(-2))):k.push(h.toString());
k.push("0".concat(f).slice(-2));d.innerText=e.call(b,k.join(":")).concat("]")}a.style.display="block"}}})}
function U(a,c,d,b){var e=0;if(!d){if(0>=M.length)return;e=M.length-1;d=M[e]}var f="#tblst";c&&(f="#tblFolder");f=t(f);var g=f.ca,h=f.G;h.innerHTML="";P("loading");f=g.getElementsByTagName("th")[0];var k=u(f,"a",!0);a?k&&k.classList.remove("fnormal"):(k&&(0!=e||c?k.classList.add("fnormal"):f.innerHTML=""),hb(f,d,e));E.l({j:function(l,m){if(l)O(l);else{var n=[],w=0;m.forEach(function(p){var y=0,Ya=n.length;p.A=db(p.A);for(V(p)?Ya=w++:y=w;y<Ya&&!(p.A<n[y].A);)y++;y<n.length?n.splice(y,0,p):n.push(p)});
n.forEach(function(p){c&&!V(p)||ib(h,p,c)});c||(document.getElementById("divHeader").style.display="block",g.style.display="block",document.getElementById("divAction").style.display="block",l=document.getElementById("chkAll"),l.checked=!1,l.style.display=0<m.length?"":"none");b&&b(n);P()}},F:d.m})}
function hb(a,c,d,b){var e=document.createElement("a"),f=document.createElement("span");e.href="#";e.innerText=c.A;e.setAttribute("uid",c.m);e.setAttribute("idx",d);e.addEventListener("click",jb);b&&e.classList.add("fnormal");a.appendChild(e);f.innerText=">";a.appendChild(f)}
function ib(a,c,d){var b=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("a"),g=c.A;if(!d)var h=document.createElement("input"),k=document.createElement("span"),l=document.createElement("span");d||(h.type="checkbox",e.appendChild(h),V(c)?k.innerHTML="&#x1f4c1;":(h=kb(g),k.innerHTML=ba[h]?"&#x1f4f7;":ca[h]?"&#x1f3a5;":"&#x1f4c4;"),e.appendChild(k));f.innerText=g;f.href="#";f.setAttribute("uid",c.m);f.setAttribute("utype",c._type);f.addEventListener("click",W);e.appendChild(f);
d||(l.innerHTML="&#x1f4dd;",l.setAttribute("class","dropbtn"),l.addEventListener("click",lb),e.appendChild(l));b.appendChild(e);d||(e=document.createElement("td"),e.innerText=ka(c._size),e.setAttribute("class","right"),b.appendChild(e),d=e=document.createElement("td"),(c=c.ua)?(c=new Date(c),f=[],g=[],f.push(c.getFullYear()),f.push(c.getMonth()+1),f.push(c.getDate()),g.push("0".concat(c.getHours()).slice(-2)),g.push("0".concat(c.getMinutes()).slice(-2)),g.push("0".concat(c.getSeconds()).slice(-2)),
c=f.join("-")+" "+g.join(":")):c="",d.innerText=c,b.appendChild(e));a.appendChild(b)}
function W(a,c){if(!a||a instanceof Event){window.event.preventDefault();c=q();if(V(c)){r(c,"TABLE").getAttribute("onlyfolder")?U(!1,!0,{m:c.getAttribute("uid"),A:c.innerText}):(M.push({m:c.getAttribute("uid"),A:c.innerText}),U());return}var d=t("#tblFileDetail").G;var b=t("#tblst").G.rows;var e=r(c,"TR").rowIndex-b[0].rowIndex}else{d=t("#tblFileDetail").G;b=t("#tblst").G.rows;e=d.rows[0].getAttribute("rowidx");if(1==a)if(0<e)e--;else{if(c)return;e=b.length-1}else if(e++,e>=b.length){if(c)return;
e=0}c=b[e].getElementsByTagName("a")[0];if(V(c)){d.rows[0].setAttribute("rowidx",e);W(a);return}}d.rows[0].cells[1].getElementsByTagName("span")[0].innerText=c.innerText;d.rows[0].setAttribute("uid",c.getAttribute("uid"));d.rows[0].setAttribute("rowidx",e);d.rows[1].cells[0].innerText=window.msgs.thSize+": "+b[e].cells[1].innerText;mb(c.getAttribute("uid"),c.innerText)}
function jb(){window.event.preventDefault();var a=q(),c=r(a,"TABLE"),d=c.getElementsByTagName("th")[0];if(c.getAttribute("onlyfolder")){c=0;for(var b=a.nextElementSibling;b;)b.tagName==a.tagName&&c++,b=b.nextElementSibling;if(0<c)for(b=0;b<c;b++)d.removeChild(d.lastElementChild),d.removeChild(d.lastElementChild);U(!0,!0,{A:a.innerText,m:a.getAttribute("uid")})}else a=parseInt(a.getAttribute("idx"),10),a<M.length-1&&M.splice(a+1).forEach(function(){d.removeChild(d.lastElementChild);d.removeChild(d.lastElementChild)}),
U(!0)}function V(a){return"1"==(a instanceof HTMLElement?a.getAttribute("utype"):"string"==typeof a?a:a._type)}function kb(a){var c=a.lastIndexOf("."),d="";0<=c&&(d=a.slice(c+1));return d.toLowerCase()}function nb(){for(var a=q().checked,c=t("#tblst").G.getElementsByTagName("input"),d=0;d<c.length;d++)"checkbox"==c[d].type&&(c[d].checked=a)}
function ob(a){var c=document.getElementById("divGround");1==a?(c.style.backgroundColor="transparent",document.getElementById("tblFileDetail").parentElement.style.display="none"):(c.style.backgroundColor="",document.getElementById("tblFileDetail").parentElement.style.display="",2==a?(document.getElementById("spanGroundTitle").innerText=window.msgs.gtlFDetail,document.getElementById("tblFileDetail").style.display=""):document.getElementById("tblFileDetail").style.display="none",3==a?(document.getElementById("spanGroundTitle").innerText=
window.msgs.gtlMoveto,a=document.getElementById("tblFolder"),a.getElementsByTagName("th")[0].innerHTML=null,a.style.display=""):document.getElementById("tblFolder").style.display="none");c.style.display="table"}
function lb(){var a=q(),c=t("#tblst").G.rows;c=r(a,"TR").rowIndex-c[0].rowIndex;var d=document.getElementById("divItemenu");a=a.getBoundingClientRect();d.style.left=a.right+"px";d.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+a.top+"px";d.style.display="block";d.setAttribute("rowidx",c);ob(1)}
function pb(){var a=q(),c=r(a,"DIV"),d=document.getElementById("divItemenu");var b=t("#tblst").G.rows;d=parseInt(d.getAttribute("rowidx"),10);b=b[d].getElementsByTagName("a")[0];c.style.display="";switch(a.getAttribute("wordid")){case "btnDownload":V(b)?O("noDownFolder"):(c.setAttribute("uid",b.getAttribute("uid")),c.setAttribute("uname",b.innerText),qb(2));X();break;case "btnRename":a=document.getElementById("divNewName");c=a.getElementsByTagName("input")[0];d=b.getBoundingClientRect();c.value=b.innerText;
a.style.left=d.left+"px";a.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+d.top-2+"px";c.style.width=d.width+"px";c.style.height=d.height+"px";a.style.display="block";break;case "btnMove":rb(b.getAttribute("uid"));break;case "btnDelete":sb(b.getAttribute("uid")),X()}}function rb(a){if("string"==typeof a)document.getElementById("tblFolder").setAttribute("uid",a);else if(tb())document.getElementById("tblFolder").removeAttribute("uid");else return;ob(3);U(!1,!0,M[0])}
function ub(){var a=window.event;if(13===a.keyCode){if(a.shiftKey||a.ctrlKey||a.altKey)return!0}else return!0;vb();return!1}
function vb(){var a=q();"INPUT"!=a.tagName&&(a=u(a,"INPUT"));if(a.value){var c=document.getElementById("divItemenu"),d=t("#tblst").G.rows;c=parseInt(c.getAttribute("rowidx"),10);var b=d[c].getElementsByTagName("a")[0];a.value!=b.innerText&&(d=T(a.value),d={j:function(e){e?O(e.K):(b.innerText=a.value,Q("renDone"))},O:b.getAttribute("uid"),ba:d},wa(d));X()}else O("noNewName")}
function wb(){X();var a=document.getElementById("tblFolder"),c=u(a.getElementsByTagName("th")[0],"a",!0).getAttribute("uid");if(c!=M[M.length-1].m){var d=null;(a=a.getAttribute("uid"))?(d=[],d.push({m:a,A:""})):d=tb();if(d){P("moving");var b=0,e={j:function(f){f?O(f.K):(b++,b<d.length?(e.O=d[b].m,xa(e)):(U(!0),Q("moveDone")))},O:d[b].m,F:c,ma:M[M.length-1].m};xa(e)}}}
function sb(a){var c=null;"string"==typeof a?(c=[],c.push({m:a,A:""})):c=tb();if(c&&confirm(window.msgs.delConfirm)){P("deleting");var d=0,b={j:function(e){e?O(e.K):(d++,d<c.length?(b.O=c[d].m,E.delete(b)):(U(!0),Q("delDone")))},O:c[d].m};E.delete(b)}}function xb(){var a=document.getElementById("txtName").value;if(a){var c={j:function(d,b){d?O(d.K):(b.A=a,ib(t("#tblst").G,b),Q("flDone"))},Y:T(a)};0<M.length&&(c.F=M[M.length-1].m);E.v(c)}else O("noFldName")}
function tb(a){for(var c=[],d=t("#tblst").G.getElementsByTagName("input"),b=0;b<d.length;b++){var e=d[b];if("checkbox"==e.type&&e.checked){e=fa(e,"a");if(a&&V(e))return O("noDownFolder"),null;c.push({A:e.innerText,m:e.getAttribute("uid")})}}return 0>=c.length?(O("noChecks"),null):c}
function mb(a,c){var d=t("#tblFileDetail").G;ob(2);var b=kb(c),e=d.rows[0].cells[1].getElementsByTagName("span")[0],f=d.rows[0].cells[1].getElementsByTagName("img")[0],g=ba[b];b=ca[b];var h=document.getElementById("spanGroundTitle");h.innerText=window.msgs.gtlFDetail;e.style.display="";f.style.display="none";f.src="";var k=yb(d);d.rows[1].style.display="";d.rows[2].style.display="";if(b)h.innerText=c,zb(k,a),k.style.display="",e.style.display="none",d.rows[1].style.display="none",d.rows[2].style.display=
"none";else if(g){var l=new ma;a=new A({la:!0,Z:I,fa:F(E,{m:a,U:16E4}),na:l});a.o=function(m,n){m||n?console.log(m||n):(m=l.u(),m instanceof Uint8Array||(m=new Uint8Array(m)),g&&(f.src=window.URL.createObjectURL(new Blob([m],{type:g})),f.title=c,f.style.display="",e.style.display="none",d.rows[1].style.display="none",d.rows[2].style.display="none"))};a.start()}}function Ab(){var a=q();a&&a.src&&window.URL.revokeObjectURL(a.src)}
function zb(a,c){var d=F(E,{m:c});const b=zb_require("videostream");a.g=c;a.i=new oa({la:!0,Z:I,fa:d});a.h=new b(a.i,a)}function X(){document.getElementById("divGround").style.display="";yb();document.getElementById("divItemenu").style.display="";document.getElementById("divNewName").style.display=""}
function yb(a){a||(a=t("#tblFileDetail").G);a=a.rows[0].cells[1].getElementsByTagName("video")[0];a.g&&J.Ia(a.g,a.currentTime);a.style.display="none";a.h&&(a.h.destroy(),a.i.ya(),delete a.h,delete a.i);return a}function Bb(a){window.event.preventDefault();a=q(a);Cb(a)}function Db(a){a=q(a);a=u(a,"a");Cb(a,!0)}
function Cb(a,c){document.getElementById("divHistory").style.display="";var d=a.getAttribute("fid");if(d){var b=a.getAttribute("parentId"),e=a.getAttribute("time");P("loading");var f=[],g=function(){b?E.u({$:b,j:function(k,l){k||(l.A=db(l.A),f.unshift(l),l._parentId==M[0].m?(f.unshift(M[0]),h()):(l._parentId==M[0]._parentId?b=void 0:b=l._parentId,g()))}}):P()},h=function(){var k=0,l=t("#tblst").ca.getElementsByTagName("th")[0];l.innerHTML="";for(k=0;k<f.length;k++)hb(l,f[k],k,!0);M=f;U(!0,!1,void 0,
function(m){var n;for(n=0;n<m.length&&m[n].m!=d;n++);n<m.length&&(m=t("#tblFileDetail").G.rows[0],c?(m.setAttribute("rowidx",n),W(2,!0)):(m.getElementsByTagName("video")[0].setAttribute("ctime",e),0==n?(m.setAttribute("rowidx",1),W(1,!0)):(m.setAttribute("rowidx",n-1),W(2,!0))))})};g()}}function Eb(a){a=q(a);var c=a.getAttribute("ctime");c&&(a.removeAttribute("ctime"),document.getElementById("divHistory").getElementsByTagName("a")[0].getAttribute("fid")==a.g&&(a.currentTime=c))};const Fb=window.Worker?!0:!1;var Y=null;function Gb(a){this.h=a;this.g=[];this.o=function(c){return this.h.m==c.m};this.u=function(c){return this.h.A==c};this.l=function(c){var d;for(d=0;d<this.g.length;d++)if(this.g[d].u(c))return this.g[d];return null};this.i=function(c){var d;for(d=0;d<this.g.length;d++)if(this.g[d].o(c))return this.g[d];c=new Gb(c);this.g.push(c);return c}}var Hb=null;
function Ib(){var a=q();a.disabled=!0;Y?(a={_type:9,_rowIdx:parseInt(r(a,"TR").getAttribute("rowIdx"),10)},Y.postMessage(a)):a.setAttribute("canceled","1")}function Jb(){var a=t("#tblQueue"),c=a.ca;a=a.G;var d=!1,b;for(b=0;b<a.rows.length;b++)a.rows[b].getAttribute("end")?ea(a.rows[b]):d=!0;d||ea(c)}
function Kb(a,c,d){var b=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("input");e.innerText=d;b.appendChild(e);e=document.createElement("td");f.innerText=window.msgs.waiting;e.appendChild(f);b.appendChild(e);e=document.createElement("td");g.type="button";g.value=window.msgs.btnCancel;g.style.display="none";g.addEventListener("click",Ib);e.appendChild(g);b.appendChild(e);b.setAttribute("rowIdx",c);a.appendChild(b)}
function Z(a,c,d){var b=a;0<=c&&(b=a.rows[c].getElementsByTagName("span")[0]);b.innerText=d}function Lb(a,c){var d=a;0<=c?(d=a.rows[c].getElementsByTagName("input")[0],a.rows[c].setAttribute("end","1")):(a=r(a,"TR"))&&a.setAttribute("end","1");d.style.display="none";window.gc&&window.gc()}
function Mb(a,c){var d=!1,b=c._rowIdx;switch(c._type){case 0:c=a.rows[b].getElementsByTagName("input")[0];a.rows[b].getElementsByTagName("span")[0].innerText="0%";c.style.display="";break;case 1:Z(a,b,c._speed+" "+Math.round(100*c._pos/c._size)+"%");break;case 2:c._finished&&Y&&Nb();Lb(a,b);c._err?Z(a,b,c._err):1==c._wtype?(Z(a,b,window.msgs.downDone),c._blob&&ha(c._blob,a.rows[b].cells[0].innerText,document.getElementById("download"))):Z(a,b,window.msgs.upDone);d=!0;break;case 3:c._finished&&Y&&
Nb(),Lb(a,b),1==c._wtype?Z(a,b,window.msgs.downCanceled):Z(a,b,window.msgs.updCanceled),d=!0}return d}function Nb(){var a=Y;Hb=Y=null;a.terminate();a.h&&U(!0)}function Ob(a){if(!Y){var c=t("#tblQueue").G;Y=new Worker("worker.js");Y.i={_token:ta(E),_iv:I.iv.toString(CryptoJS.enc.Base64url),_key:I.key.toString(CryptoJS.enc.Base64url),_drvnm:E.o()};Y.addEventListener("message",function(d){Mb(c,d.data)})}a._cominf=Y.i;2!=a._type||Y.h||(Y.h=!0);Y.postMessage(a)}
function Pb(a,c,d){Mb(a,{_type:0,_wtype:1,_size:0,_rowIdx:c});var b=a.rows[c].getElementsByTagName("input")[0];return new Fa(function(){return b.getAttribute("canceled")?!0:!1},function(e){e._rowIdx=c;Mb(a,e)&&d()})}
function qb(a){P();var c=[];switch(a){case 1:a=t("#tblFileDetail").G.rows[0];c.push({A:a.getElementsByTagName("span")[0].innerText,m:a.getAttribute("uid")});break;case 2:a=document.getElementById("divItemenu");c.push({A:a.getAttribute("uname"),m:a.getAttribute("uid")});break;default:if(c=tb(!0),!c)return}a=t("#tblQueue");var d=a.G;a.ca.style.display="block";var b=d.rows.length,e=b;c.forEach(function(g){Kb(d,e,g.A);Fb&&Ob({_type:1,_rowIdx:e,_downinf:{_targetId:g.m}});e++});if(!Fb){var f=function(g){Pb(d,
b+g,function(){g++;g<c.length&&f(g)}).Na(c[g].m)};f(0)}}
function Qb(a){P();var c=null;c=1===a?document.getElementById("upfolder").files:document.getElementById("upfiles").files;if(0>=c.length)O("noFiles");else{a=t("#tblQueue");var d=a.G;a.ca.style.display="block";var b=d.rows.length;a=b;for(var e=[],f=0;f<c.length;f++){var g="";g=c[f].webkitRelativePath?c[f].webkitRelativePath:c[f].name;e.push({Ja:g,_file:c[f],ta:a});Kb(d,a,g);a++}f=0;Hb||(Hb=new Gb(M[0]));var h=Hb;for(f=1;f<M.length;f++)h=h.i(M[f]);var k=function(l){var m=e[l];Rb(h,m.Ja,function(n,w,
p){n?Z(d,m.ta,JSON.stringify(n)):Fb?(Ob({_type:2,_rowIdx:m.ta,_upinf:{_fname:w,_file:m._file,_parentId:p}}),l++,l<c.length&&k(l)):Pb(d,b+l,function(){l++;l<c.length?k(l):U(!0)}).Pa(w,m._file,p)})};k(0)}}
function Rb(a,c,d){var b=c.split("/"),e=T(b.pop()),f=a;if(0==b.length)d(!1,e,f.h.m);else{var g=!1,h=function(k){function l(p){f=p;k++;k<b.length?h(k):d(!1,e,f.h.m)}var m=b[k],n=T(m);if(g)E.v({Y:n,F:f.h.m,j:function(p,y){p?d(p,e):(y.A=m,l(f.i(y)))}});else{var w=f.l(m);w?l(w):E.l({_fname:n,F:f.h.m,j:function(p,y){p?d(p,e):0==y.length?(g=!0,h(k)):(y[0].A=m,l(f.i(y[0])))}})}};h(0)}};window.addEventListener("load",function(){window.addEventListener("scroll",function(){document.getElementById("divGround").style.top=(document.documentElement.scrollTop||document.body.scrollTop)+"px"});var a=document.getElementById("spanNotify");a.style.display="none";var c=RegExp("android","i").test(navigator.userAgent),d=0,b=document.getElementById("divSet").getElementsByTagName("input");for(d=0;d<b.length;d++)switch(a=b[d],a.getAttribute("wordid")){case "btnLogout":a.addEventListener("click",Ja);
break;case "btnCancel":a.addEventListener("click",Qa);break;case "btnOk":a.addEventListener("click",Pa)}b=document.getElementById("divPwd").getElementsByTagName("span");for(d=0;d<b.length;d++)switch(a=b[d],a.getAttribute("tid")){case "spanAddRoot":a.addEventListener("click",Ra);break;case "spanDeleteRoot":a.addEventListener("click",Ta);break;case "spanMoreKey":c?a.addEventListener("click",Wa):a.style.display="none";break;case "spanClearKey":c?a.addEventListener("click",Sa):a.style.display="none"}b=
document.getElementById("divPwd").getElementsByTagName("input");for(d=0;d<b.length;d++)switch(a=b[d],a.getAttribute("wordid")){case "btnCancel":a.addEventListener("click",Va);break;case "btnOk":a.addEventListener("click",Xa);break;case "btnDropDb":a.addEventListener("click",cb)}b=document.getElementById("divHeader").getElementsByTagName("input");for(d=0;d<b.length;d++)switch(a=b[d],a.getAttribute("wordid")){case "btnSet":a.addEventListener("click",Ka)}document.getElementById("chkAll").addEventListener("click",
nb);b=document.getElementById("divAction").getElementsByTagName("input");for(d=0;d<b.length;d++)switch(a=b[d],a.getAttribute("wordid")){case "btnDownfs":a.addEventListener("click",qb);break;case "btnMovefs":a.addEventListener("click",rb);break;case "btnDelfs":a.addEventListener("click",sb);break;case "btnNewFldr":a.addEventListener("click",xb);break;case "btnUpfs":a.addEventListener("click",Qb);break;case "btnUpfld":a.addEventListener("click",function(){Qb(1)})}a=document.getElementById("tblQueue").getElementsByTagName("th")[0];
a.getElementsByTagName("label")[0].addEventListener("click",Jb);a=document.getElementById("divHistory");a.getElementsByTagName("a")[0].addEventListener("click",Bb);b=a.getElementsByTagName("input");for(d=0;d<b.length;d++)switch(a=b[d],a.getAttribute("wordid")){case "btnPHNext":a.addEventListener("click",Db)}document.getElementById("divItemenu").addEventListener("click",pb);a=document.getElementById("divNewName");a.getElementsByTagName("input")[0].addEventListener("keypress",ub);a.getElementsByTagName("span")[0].addEventListener("click",
vb);a=document.getElementById("divGround").firstElementChild;a.addEventListener("click",X);a.firstElementChild.addEventListener("click",function(e){e.stopPropagation()});a=fa(document.getElementById("spanGroundTitle"),"label");a.addEventListener("click",X);c=document.getElementById("tblFileDetail").getElementsByTagName("tbody")[0].rows;a=c[0];a.cells[0].addEventListener("click",function(){W(1)});a.cells[2].addEventListener("click",function(){W(2)});a.getElementsByTagName("img")[0].addEventListener("load",
Ab);a=a.getElementsByTagName("video")[0];a.addEventListener("canplay",Eb);a.addEventListener("ended",function(){W(2,!0)});b=c[2].getElementsByTagName("input");for(d=0;d<b.length;d++)switch(a=b[d],a.getAttribute("wordid")){case "btnDownload":a.addEventListener("click",function(){qb(1)})}b=document.getElementById("tblFolder").getElementsByTagName("input");for(d=0;d<b.length;d++)switch(a=b[d],a.getAttribute("wordid")){case "btnOk":a.addEventListener("click",wb)}eb()});
