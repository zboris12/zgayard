function m(a){var b=null;if(a)if("string"==typeof a)switch(a.charAt(0)){case "#":b=document.getElementById(a.slice(1))}else a instanceof Event?b=a.srcElement||a.target:b=a;else b=window.event.srcElement||window.event.target;return b}function n(a,b){return(a=a.parentElement)?a.tagName==b?a:n(a,b):null}function aa(){var a=document.getElementById("divPwd");return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}
function p(a){a=m(a);if(a){var b=a.getElementsByTagName("tbody")[0];return{oa:a,D:b}}return null}function q(a,b){if((a=a.nextElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.nextElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.nextElementSibling}return a}
function t(a,b,d){if((a=d?a.lastElementChild:a.previousElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.previousElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.previousElementSibling}return a}
function ba(a){if(!a)return null;var b=a.charAt(0);if("?"==b||"#"==b)a=a.substring(1);var d={};a.split("&").forEach(function(c){var e=c.indexOf("=");0>e?d[decodeURIComponent(c)]="":d[decodeURIComponent(c.substring(0,e))]=decodeURIComponent(c.substring(e+1))});return d}function ca(){var a=ba(window.location.search),b=ba(window.location.hash);b&&(a=a?Object.assign(a,b):b);return a}
function da(a){if(1024>a)var b="B";else 1048576>a?(b="KB",a=Math.round(a/102.4)/10):1073741824>a?(b="MB",a=Math.round(a/104857.6)/10):(b="GB",a=Math.round(a/1.073741824E8)/10);var d=a.toString();a=d.indexOf(".");var c=d.split(""),e=[];0<=a?e.push(d.slice(a)):a=c.length;for(d=0;0<a;)3==d++&&(e.unshift(","),d=1),e.unshift(c[--a]);return e.join("").concat(b)};function v(a){var b=CryptoJS.MD5(a);return CryptoJS.kdf.OpenSSL.execute(a,8,4,b)}function y(a,b,d){var c=d;"string"==typeof d&&(c=v(d));if(!(c&&c.iv&&c.key))throw Error("Need iv and key. They can be generated by CryptoJS.kdf.OpenSSL.execute from password and salt.");d={mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};Object.assign(d,c);a=a?CryptoJS.algo.AES.createEncryptor(d.key,d):CryptoJS.algo.AES.createDecryptor(d.key,d);b=a.process(b);b.concat(a.finalize());b.clamp();return b}
function ea(a){var b=Array(a.sigBytes);a=a.words;for(var d=0,c=0;c<a.length;c++){for(var e=a[c],f=d+4-1;f>=d;f--)f<b.length&&(b[f]=e&255),e>>=8;d+=4;if(d>=b.length)break}return b}
function fa(a){this.l=0;this.h=this.g=null;a&&a.sa&&(this.h=a.sa);this.j=function(b,d){this.l=b;this.h&&"#"!=this.h.href&&window.URL.revokeObjectURL(this.h.href);d&&d()};this.write=function(b,d){Array.isArray(b)?this.g=this.g?this.g.concat(b):b.concat():(this.g||(this.g=[]),this.g.push(b));d&&d()};this.cancel=function(b){b&&b(!1,!0)};this.i=function(){if(this.g&&0<this.g.length&&(this.g[0]instanceof ArrayBuffer||this.g[0]instanceof Uint8Array)){for(var b=0,d=0;d<this.g.length;d++)b+=this.g[d].byteLength;
b=new Uint8Array(b);var c=0;for(d=0;d<this.g.length;++d){var e=this.g[d];e instanceof ArrayBuffer&&(e=new Uint8Array(e));b.set(e,c);c+=e.byteLength}return b}return this.g};this.download=function(b){var d=this.i();d instanceof Uint8Array||(d=new Uint8Array(d));d=new Blob([d],{type:"application/octet-binary"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(d,b);else if(this.h)this.h.download=b,this.h.href=window.URL.createObjectURL(d),this.h.click();else throw Error("Element for download is not specified.");
};this.v=function(){return this.l}}
function ha(a){this.l=null;if(a.ea)if(a.ea instanceof Blob)this.l=a.ea;else throw Error("blob is not a Blob.");else throw Error("blob must be specified.");this.B=1600;a.U&&(this.B=a.U);this.g=0;this.u=this.i=null;this.F=function(b,d){if(b){if(b>=this.h())throw Error("offset can not be bigger than input size.");this.g=b}this.i=new FileReader;this.i.onload=function(c){c=c.target.result;this.u&&this.u(c,this)}.bind(this);d&&d()};this.v=function(){return this.g};this.h=function(){return this.l.size};
this.C=function(){return this.g>=this.h()};this.j=function(b){if(1!=this.i.readyState){var d=this.g;this.g=b?this.g+b:this.g+this.B;this.i.readAsArrayBuffer(this.l.slice(d,this.g))}}}
function z(a,b){if(!a.ka)if(this.getSuperClass&&"Readable"==this.getSuperClass().name)this.super(b),this.h=1,b&&b.objectMode&&(this.K=!0);else throw Error("writer must be specified in no stream mode.");this.L=this.v=null;this.C=!0;this.g=null;this.i=a.ka;this.iv=this.key=null;this.j=0;this.u=null;this.B=this.l=0;this.speed="-";a.la&&(this.C=!1);if(a.Y)this.g=a.Y;else throw Error("reader must be specified.");if(a.S)b=null,b="string"==typeof a.S?v(a.S):a.S,this.key=b.key,this.iv=b.iv;else throw Error("keycfg must be specified.");
this.start=function(d){if(d){if(this.C)throw Error("Can NOT set offset for encryption.");this.j=d;d-=d%16+16;0>d&&(d=0)}this.g.u=this.J.bind(this);this.g.F(d,function(){var c=16*Math.ceil((this.g.h()+1)/16);this.h||!this.i?this.H():this.i.j(c,this.H.bind(this))}.bind(this))};this.F=function(){Date.now()>this.l&&(this.speed=da(1E3*(this.g.v()-this.B)/(Date.now()-this.l+1E3))+"/s",this.l=Date.now()+1E3,this.B=this.g.v());return this.speed};this._read=function(d){1==this.h?this.h=2:3==this.h&&(this.g.C()?
this.push(null):this.g.j(d))};this.push=function(d){return this.readable?(d&&!this.K?this.superCall("push",new Uint8Array(d)):this.superCall("push",d),!0):!1};this.H=function(){this.l=Date.now()+1E3;(this.B=this.j)?this.g.j(16):1==this.h?this.h=3:2==this.h?(this.h=3,this.push([])):this.g.j()};this.J=function(d){try{var c=new CryptoJS.lib.WordArray.init(d);if(!this.u){var e={iv:this.iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};this.j&&(e.iv=c,c=null);this.u=this.C?CryptoJS.algo.AES.createEncryptor(this.key,
e):CryptoJS.algo.AES.createDecryptor(this.key,e)}if(c){var f=ea(this.u.process(c));this.g.C()&&(f=f.concat(ea(this.u.finalize())));if(this.j<this.g.v()){var g=this.j-(this.g.v()-d.byteLength);0<g&&(f=f.slice(g))}else f=null;this.h?this.push(f):f?this.i&&this.i.write(f,function(){this.g.C()?this.L&&this.L():this.v?this.v()?this.g.j():this.i.cancel(function(h,k){this.L&&(h?this.L(h):this.L(!1,k))}.bind(this)):this.g.j()}.bind(this)):this.g.j()}else this.h?2==this.h?(this.h=3,this.push([])):this.h=3:
this.g.j()}catch(h){if(this.h)throw h;this.L&&this.L(h)}}}function ia(a){const b=zb_require("readable-stream");z.super_!==b.Readable&&zb_inherits(z,b.Readable);this.h={highWaterMark:8E5};Object.assign(this.h,void 0);this.info=a;this.g=null;this.createReadStream=function(d){this.va();this.g=new z(this.info,this.h);var c=0;d&&d.start&&(c=d.start);this.g.start(c);return this.g};this.va=function(){this.g&&(this.g.destroy(),this.g=null)}}
function ja(a,b,d){a.u=function(c){b.write(c,function(){a.C()?d&&d():a.j()})};a.F(0,function(){b.j(a.h(),function(){a.j()})})};function ka(){this.h=!0;this.j=this.g=null;this.l=this.C=!1;this.H=function(){return null!=this.g};this.$=function(a){if(this.h)try{var b=window.sessionStorage.getItem("language"),d=window.sessionStorage.getItem("drive"),c=window.sessionStorage.getItem("skipLogin");window.sessionStorage.clear();b&&window.sessionStorage.setItem("language",b);d&&!a&&window.sessionStorage.setItem("drive",d);c&&!a&&window.sessionStorage.setItem("skipLogin",c)}catch(e){this.h=!1,console.error(e)}};this.u=function(a){var b=
null;if(this.h)try{b=window.sessionStorage.getItem(a)}catch(d){this.h=!1,console.error(d)}return b};this.V=function(a){var b=this.u("login_state");return b&&a==b?!0:!1};this.i=function(a,b){if(this.h)try{return window.sessionStorage.setItem(a,b.toString()),!0}catch(d){this.h=!1,console.error(d)}return!1};this.K=function(a){if(this.h)try{window.sessionStorage.removeItem(a)}catch(b){this.h=!1,console.error(b)}};this.ba=function(){var a=this.u("language"),b=this.u("drive"),d=this.u("skipLogin");this.j=
{};a&&(this.j.language=a,this.M(a));b&&(this.j.T=b,this.da(b));d&&this.ra(d)};this.ya=function(){var a=this.v("drive");a||(this.j||this.ba(),a=this.j.T);return a};this.da=function(a){this.i("drive",a);return this.g?this.g.drive!=a?(this.g.drive=a,this.g[a]||(this.g[a]={}),this.C=!0):!1:!0};this.ra=function(a){a?this.l=this.H():(this.l=!1,this.Aa()&&(this.C=!0));this.i("skipLogin",this.l)};this.aa=function(a){var b=this.v("language");!b&&a&&this.j&&(b=this.j.language);return b};this.M=function(a){this.i("language",
a);this.g&&this.g.language!=a&&(this.g.language=a,this.C=!0)};this.Ba=function(a){if(window.indexedDB){var b=window.indexedDB.open("zgayard1946");b.onerror=function(){if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};b.onupgradeneeded=function(d){d.target.result.createObjectStore("settings",{keyPath:"key"})};b.onsuccess=function(d){var c=d.target.result;d=c.transaction("settings","readwrite");d.oncomplete=function(){c.close();
a&&a()};d.objectStore("settings").getAll().onsuccess=function(e){this.g={};e.target.result.forEach(function(f){this.g[f.key]=f.value}.bind(this));this.l=(e=this.g.drive)&&this.g[e]&&this.g[e].refresh_token?!0:!1}.bind(this)}.bind(this)}else if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};this.ca=function(){this.C&&this.g&&(this.J(function(a){a.clear().onsuccess=function(){for(var b in this.g)a.put({key:b,value:this.g[b]})}.bind(this)}.bind(this)),
this.C=!1)};this.F=function(a){var b=this.v("drive");return b&&(b=this.g[b])?b[a]:null};this.Aa=function(){var a=this.v("drive");return a&&(a=this.g[a])&&a.refresh_token?(delete a.refresh_token,!0):!1};this.B=function(a,b,d){if(this.g){var c=this.v("drive");b?this.g[c][a]=b:delete this.g[c][a];d?(a=null,d instanceof Function&&(a=d),this.J(function(e){e.put({key:c,value:this.g[c]})}.bind(this),a)):this.C=!0}else d&&d instanceof Function&&d()};this.za=function(a){this.$(!0);if(this.g){var b=this.v("drive");
delete this.g[b].refresh_token;delete this.g.drive;this.J(function(d){d.put({key:b,value:this.g[b]});d.delete("drive")}.bind(this),a)}else a&&a()};this.J=function(a,b){window.indexedDB.open("zgayard1946").onsuccess=function(d){var c=d.target.result;d=c.transaction("settings","readwrite");d.oncomplete=function(){c.close();b&&b()};d=d.objectStore("settings");a&&a(d)}};this.v=function(a){return this.g&&this.g[a]?this.g[a]:null}};function la(a,b,d){this.K=d;this.B=b;this.j=null;this.g=a;this.h=function(c){var e="POST",f="https://graph.microsoft.com/v1.0".concat(encodeURI(c.o)),g=new XMLHttpRequest;c&&c.O&&(e=c.O);g.open(e,f,!0);c&&c.N?g.setRequestHeader("Authorization",c.N):c&&c.ha?(e="Bearer",c&&c.ia&&(e=c.ia),g.setRequestHeader("Authorization",e+" "+c.ha)):g.setRequestHeader("Authorization",this.j);if(c&&c.W)for(var h in c.W)g.setRequestHeader(h,c.W[h]);c&&c.m&&(g.onload=function(k){k=k.target;4==k.readyState&&(401==k.status&&
this.g.l&&!c.Ja?this.da(c):c.m({G:k.status,I:k.responseText}))}.bind(this));g.send(c.fa)};this.H=function(c){if(c&&(this.j=this.g.u("access_token")))return!0;c=this.g.l;var e={},f=ca();if(f&&f.token_type&&f.access_token){this.M(f.token_type,f.access_token);if(f&&f.state)if(this.g.V(f.state))this.g.K("login_state");else return B("Unauthorized access to this url."),!1;return!0}f&&f.code?e.code=f.code:c&&(e.qa=this.g.F("refresh_token"));if(e.code||e.qa){if(f&&f.state)if(this.g.V(f.state))this.g.K("login_state");
else return B("Unauthorized access to this url."),!1;if((f=this.F(e))&&f.token_type&&f.access_token)return this.M(f.token_type,f.access_token),c&&e.code&&f.refresh_token&&this.g.B("refresh_token",f.refresh_token),f.logout&&this.g.i("logout_url",f.logout),!0;f&&f.error?B("["+f.error+"] "+f.error_description):B("Unknown error occured when doing authorization.")}else c&&(e.xa=!0),(f=this.F(e))&&f.url?(f.state&&(this.g.i("login_state",f.state)||(f.state=ma)),f.logout&&this.g.i("logout_url",f.logout),
window.location.href=f.url.concat("&state=".concat(encodeURIComponent(f.state)))):f&&f.error?B("["+f.error+"] "+f.error_description):B("Unknown error occured when doing authorization.");return!1};this.ba=function(){this.j=null;this.g.K("access_token");var c=this.g.u("logout_url");if(c)window.location.href=c;else{c=new FormData;c.append("drive_type","onedrive");c.append("action","logout");var e=new XMLHttpRequest;e.open("POST",this.B,!0);e.withCredentials=!0;e.onload=function(f){f=f.target;4==f.readyState&&
200==f.status&&(f=JSON.parse(f.responseText))&&f.logout&&(window.location.href=f.logout)};e.send(c)}};this.$=function(c){var e={O:"GET",o:"/me/drive",m:function(f){var g=null,h=!1;200==f.G?(f=JSON.parse(f.I).quota,g={Ma:f.deleted,La:f.total,Oa:f.used}):h=f;c&&c.m?c.m(h,g):h&&B(JSON.stringify(h))}.bind(this)};this.i(c,e);this.h(e)};this.u=function(c){var e={o:"",O:"GET",m:function(f){var g=null,h=!1;200==f.G?g=this.pa(JSON.parse(f.I)):h=f;c&&c.m?c.m(h,g):h&&alert(JSON.stringify(h))}.bind(this)};if(c&&
c.o)e.o="/me/drive/root:/"+c.o;else if(c&&c.Z)e.o="/me/drive/items/"+c.Z;else throw Error("No path nor id is specified.");this.i(c,e);this.h(e)};this.aa=function(c){var e={o:"/me/drive/root/children",O:"GET",m:function(f){var g=[],h=!1;200==f.G?JSON.parse(f.I).value.forEach(function(k){g.push(this.pa(k))},this):h=f;c&&c.m?c.m(h,g):h&&alert(JSON.stringify(h))}.bind(this)};c&&(c.Na?e.o="/me/drive/root:/"+c.Na+":/children":c.Z&&(e.o="/me/drive/items/"+c.Z+"/children"),this.i(c,e));this.h(e)};this.J=
function(c){if(!c||!c.na)throw Error("Name of new folder is not specified.");var e={W:{"Content-Type":"application/json;charset=UTF-8"},o:"/me/drive/root/children",O:"POST",m:function(f){var g=null,h=!1;201==f.G?g=this.pa(JSON.parse(f.I)):h=f;if(c&&c.m)c.m(h,g);else if(h)throw Error(JSON.stringify(h));}.bind(this)};c.Ia?e.o="/me/drive/root:/"+c.Ia+":/children":c.X&&(e.o="/me/drive/items/"+c.X+"/children");this.i(c,e);e.fa=JSON.stringify({name:c.na,folder:{},"@microsoft.graph.conflictBehavior":"fail"});
this.h(e)};this.ca=function(c){this.V(c)};this.C=function(c){this.V(c)};this.delete=function(c){if(!c||!c.P)throw Error("fid is not specified.");var e={o:"/me/drive/items/".concat(c.P),O:"DELETE",m:function(f){var g=!1;204!=f.G&&(g=f);if(c&&c.m)c.m(g);else if(g)throw Error(JSON.stringify(g));}.bind(this)};this.i(c,e);this.h(e)};this.v=function(c){return new na(c,this)};this.l=function(c){return new oa(c,this)};this.da=function(c){console.log("Retry to send ajax.");c&&(c.Ja=!0,this.H(),c.N=this.j,
this.h(c))};this.pa=function(c){var e={s:c.id,A:c.name,Ka:c.size,Fa:c.lastModifiedDateTime,Ha:c.parentReference.path,ga:"0"};c.folder?e.ga="1":c.file&&(e.ga="2");return e};this.M=function(c,e){this.j=c+" "+e;this.g.i("access_token",this.j)};this.F=function(c){if(!c)throw Error("Options are not specifed when auth onedrive.");var e=new FormData;e.append("drive_type","onedrive");c.clientId&&e.append("client_id",c.clientId);c.Qa&&e.append("redirect_uri",c.Qa);c.Pa&&e.append("client_secret",c.Pa);c.code?
e.append("code",c.code):c.qa?e.append("refresh_token",c.qa):c.xa&&e.append("need_code",c.xa);c=null;var f=new XMLHttpRequest;f.open("POST",this.B,!1);f.withCredentials=!0;f.send(e);if(4==f.readyState)if(200==f.status)c=JSON.parse(f.responseText);else throw Error(f.responseText+" ("+f.status+")");return c};this.V=function(c){if(!c||!c.P)throw Error("fid is not specified.");var e={W:{"Content-Type":"application/json;charset=UTF-8"},o:"/me/drive/items/".concat(c.P),O:"PATCH",m:function(g){var h=!1;200!=
g.G&&(h=g);if(c&&c.m)c.m(h);else if(h)throw Error(JSON.stringify(h));}.bind(this)};this.i(c,e);var f={};c.ua&&(f.name=c.ua);c.X&&(f.parentReference={id:c.X});e.fa=JSON.stringify(f);if("{}"==e.fa)throw Error("No property to be updated.");this.h(e)};this.i=function(c,e){c.ia&&(e.ia=c.ia);c.ha&&(e.ha=c.ha);c.N&&(e.N=c.N)}}
function na(a,b){this.T=b;this.g=a;this.u="";this.h=this.l=0;if(!this.g||!this.g.R)throw Error("fnm is not specified.");this.j=function(d,c){this.l=d;d={o:"/me",O:"POST",N:this.g.N,W:{"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache",Pragma:"no-cache"},m:function(g){200<=g.G&&299>=g.G?(this.u=JSON.parse(g.I).uploadUrl,c&&c(g)):B(JSON.stringify(g))}.bind(this)};this.g.ta?d.o="/me/drive/items/"+this.g.ta+":/":this.g.ma?(this.g.ma.startsWith("/drive/root:")||(d.o+="/drive/root:/"),
d.o+=this.g.ma.concat("/")):d.o+="/drive/root:/";d.o+=this.g.R;d.o+=":/createUploadSession";var e={"@microsoft.graph.conflictBehavior":"replace"},f=this.g.R.lastIndexOf("/");e.name=0<=f?this.g.R.slice(f+1):this.g.R;d.fa=JSON.stringify({item:e});this.T.h(d)};this.write=function(d,c){var e=new Blob([new Uint8Array(d)],{type:"application/octet-binary"}),f="bytes "+this.h+"-";this.h+=e.size;f+=this.h-1+"/"+this.l;var g=0,h=function(){var k=new XMLHttpRequest;k.open("PUT",this.u,!0);k.setRequestHeader("Content-Range",
f);k.onload=function(l){l=l.target;4==l.readyState&&(200<=l.status&&299>=l.status?c&&c(l.responseText):alert(l.responseText+" ("+l.status+")"))}.bind(this);k.onerror=function(){1>g&&(g++,setTimeout(function(){h()},500))};k.send(e)}.bind(this);h()};this.cancel=function(d){var c=new XMLHttpRequest;c.open("DELETE",this.u,!0);c.onload=function(e){e=e.target;if(4==e.readyState){var f={G:e.status,I:e.responseText};200<=e.status&&299>=e.status?d&&d(!1,f):(console.log(e.responseText+" ("+e.status+")"),d&&
d(f))}}.bind(this);c.send()};this.v=function(){return this.l}}
function oa(a,b){this.T=b;this.K=a;this.url="";this.name=null;this.B=this.i=this.g=this.size=0;this.M=!1;this.J=16E3;a.U&&(this.J=a.U);this.l=0;this.u=null;this.F=function(d,c){if(this.M){this.i&&(this.B=this.i,this.i=0);if(d){if(d>=this.h())throw console.log("offset:"+d+",size:"+this.h()),Error("offset can not be bigger than input size.");this.g=d}else this.g=0;c&&c()}else this.T.h({o:"/me/drive/items/"+this.K.s,O:"GET",N:this.K.N,m:function(e){this.M=!0;if(200!=e.G)throw Error(e.I+" ("+e.G+")");
e=JSON.parse(e.I);this.size=e.size;if(d){if(d>=this.h())throw Error("offset can not be bigger than input size.");this.g=d}this.url=e["@microsoft.graph.downloadUrl"];this.name=e.name;c&&c()}.bind(this)})};this.v=function(){return this.g};this.h=function(){return this.size};this.C=function(){return this.g>=this.h()};this.j=function(d){d||(d=this.J);this.H(d)};this.H=function(d){if(!d||!this.i){if(d)this.i=d;else if(this.i)d=this.i;else throw Error("size must be specified.");if(!this.B){var c=this.g+
d-1,e=function(){var f=new XMLHttpRequest;10<=this.l?(f.open("GET",this.T.K,!0),f.setRequestHeader("Zb-Url",this.url)):f.open("GET",this.url,!0);(0<this.g||c<this.size-1)&&f.setRequestHeader("Range","bytes="+this.g+"-"+c);f.responseType="arraybuffer";f.onload=function(g){if(this.B)this.B=0,this.i&&this.H();else if(this.i=0,g=g.target,4==g.readyState)if(this.l=10>this.l?1:11,200==g.status||206==g.status){var h=parseInt(g.getResponseHeader("content-length"),10);if(h)this.g+=h;else{if(h=g.getResponseHeader("content-range")){var k=
h.indexOf("-");if(0>k)h=0;else{k++;var l=h.indexOf("/",k);h=l<=k?0:parseInt(h.slice(k,l),10)}}else h=0;this.g=h?h+1:c+1}200==g.status&&this.g<this.h()?this.g=this.h():this.g>this.h()&&(this.g=this.h());this.u&&this.u(g.response,this)}else throw Error(g.responseText+" ("+g.status+")");}.bind(this);f.onerror=function(){if(0==this.l&&this.T.K)this.l=10,e();else if(1==this.l||11==this.l)this.l++,setTimeout(function(){e()},500)}.bind(this);f.send()}.bind(this);e()}}}}var ma="onedrive";const pa={en:"English",ja:"日本語"};var C={};(function(a){a[ma]={A:"Microsoft OneDrive",Ga:function(b,d,c){return new la(b,d,c)},Ea:function(b){return b&&b.state==ma?!0:!1}}})(C);const qa={bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png"},ra={avi:"video/x-msvideo",mp4:"video/mp4",mpeg:"video/mpeg"};var D=null,E=null,G=[],H=0,I=null,M=[],N=0;function B(a){var b=document.getElementById("spanError");"string"===typeof a?window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a:a&&(b.innerText=JSON.stringify(a));document.getElementById("spanInfo").style.display="none";b.style.display=a?"block":"none"}
function O(a){var b=document.getElementById("spanInfo");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;document.getElementById("spanError").style.display="none";b.style.display=a?"block":"none"}function P(a){var b=document.getElementById("spanNotify");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;a&&(N&&(clearTimeout(N),N=0),b.style.display="",N=setTimeout(function(){b.style.display="none";N=0},3E3))}
function Q(a,b){function d(e){sa--;"error"==e.type&&(Q.wa=!0);if(0==sa){var f=Q.wa;delete Q.wa;b&&b(f)}e=e.target||e.srcElement;e.hasAttribute("temporary")&&e.remove()}sa++;var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a);c.setAttribute("temporary","1");c.addEventListener("load",d);c.addEventListener("error",d);document.body.appendChild(c)}var sa=0;
function ta(a){D.H()&&(document.getElementById("chkSaveKey").checked?ua(function(b){var d="";b&&b.lsauth&&(d=y(!0,a,b.lsauth).toString(CryptoJS.enc.Base64url));D.B("key_words",d,!0)}):D.B("key_words",null,!0))}function va(){D.za(function(){E.ba()})}
function ua(a){var b=new FormData;b.append("drive_type","localstorage");var d=new XMLHttpRequest;d.open("POST","/grantauth.php",!0);d.withCredentials=!0;d.onload=function(c){var e=c.target;4==e.readyState&&(c=null,200==e.status?(e=JSON.parse(e.responseText))?e.error?B("["+e.error+"] "+e.error_description):e.lsauth?c=e:B("lsFailed"):B("lsFailed"):B(e.responseText+" ("+e.status+")"),a&&a(c))};d.send(b)}
function wa(a){var b=document.getElementById("divSet"),d=document.getElementById("selDrive"),c=q(d,"input");a?(d.disabled=!0,c.style.display="",b.setAttribute("cancelAll","1"),R(),document.getElementById("divHeader").style.display="",document.getElementById("tblst").style.display="",document.getElementById("tblQueue").style.display="",document.getElementById("divAction").style.display=""):(d.disabled=!1,c.style.display="none");b.style.display="block"}
function xa(a){if(!window.msgs||window.msgs.lang!=a){var b=window.msgs;window.msgs=null;Q("msg/"+a+".js",function(){window.msgs?(window.msgs.lang=a,D.M(a),ya()):(console.log("Message file of '"+a+"' is missing."),b?window.msgs=b:Q("msg/en.js",function(){window.msgs?(window.msgs.lang="en",D.M(window.msgs.lang),ya()):B("Message file is missing.")}))})}}
function ya(){var a=window.msgs;a.spanConfNotice=a.spanConfNotice.replace("{0}","_zgayard_.conf");for(var b=document.getElementsByTagName("*"),d=0;d<b.length;d++){var c=b[d],e=null;c.hasAttribute("wordid")&&(e=a[c.getAttribute("wordid")]);!e&&c.id&&(e=a[c.id]);e&&("button"==c.type?c.value=e:c.innerText=e)}b=document.getElementById("seLang");for(d in pa)c=document.createElement("option"),c.value=d,c.innerText=pa[d],d==a.lang&&(c.selected=!0),b.appendChild(c)}
function za(a){O("loading");(a=C[a])?(E=a.Ga(D,"/grantauth.php","/relay.php"),E.H(!0)&&(D.ca(),E.u({m:function(b,d){b?404==b.G?R(!0,!0):B(JSON.stringify(b)):Aa(d.s)},o:"_zgayard_.conf"}))):B("unkDrive")}function Ba(){var a=!1;document.getElementById("selDrive").disabled||(a=D.da(document.getElementById("selDrive").value));D.ra(document.getElementById("chkSkipLogin").checked);xa(document.getElementById("seLang").value);a?(D.$(),za(document.getElementById("selDrive").value)):D.ca();Ca()}
function Ca(a){var b=document.getElementById("divSet"),d=!1;a&&"boolean"===typeof a?d=!0:"1"==b.getAttribute("cancelAll")&&(d=!0);d&&(document.getElementById("divPwd").style.display="",document.getElementById("divHeader").style.display="block",document.getElementById("tblst").style.display="block",document.getElementById("tblQueue").style.display="block",document.getElementById("divAction").style.display="block",b.removeAttribute("cancelAll"));b.style.display=""}
function Da(a,b){var d=document.getElementById("divPwd"),c="none";a?(d.setAttribute("addroot","1"),c="block"):d.removeAttribute("addroot");a=d.getElementsByTagName("*");for(d=0;d<a.length;d++){var e=a[d];e.classList.contains("addroot")?e.style.display=c:e.classList.contains("firstep")?e.style.display="none"!=c&&b?"block":"none":e.classList.contains("chgroot")&&(e.style.display="none"==c?"block":"none");"password"==e.type&&(e.value="")}Ea("#lblKeyFile")}
function R(a,b){var d=document.getElementById("divPwd");Da(a,b);d.style.display="block";O()}function Fa(){"1"==document.getElementById("divSet").getAttribute("cancelAll")?Ca(!0):document.getElementById("divPwd").style.display=""}function Ga(){var a=m(),b=a.previousElementSibling.cloneNode();b.value="";a.parentElement.insertBefore(b,a)}function Ea(a){a=m(a).parentElement.getElementsByTagName("input");for(var b=a.length-1;0<b;b--)a[b].remove();a[0].value=""}
function Ha(){O("loading");for(var a=document.getElementById("divPwd").hasAttribute("addroot"),b=document.getElementById("pwdKey").value,d=document.getElementById("divfKey").getElementsByTagName("input"),c=[],e=0;e<d.length;e++)for(var f=d[e].files,g=0;g<f.length;g++)c.push(f[g]);if(b||0<c.length){if(a){d=document.getElementById("pwdKeyRe").value;if((b||d)&&b!=d){B("diffPwd");return}if(!document.getElementById("txtRoot").value){B("noRoot");return}}var h=null;b&&(h=CryptoJS.enc.Utf8.parse(b));if(0<
c.length){e=0;var k=new FileReader,l=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA512,"zb12");k.g=function(){k.readAsArrayBuffer(c[e].slice(0,1023));e++};k.onload=function(u){l.update(new CryptoJS.lib.WordArray.init(u.target.result));e<c.length?k.g():(h?h.concat(l.finalize()):h=l.finalize(),h.clamp(),Ia(h,a))};k.g()}else Ia(h,a)}else B("noPwd")}
function Ia(a,b){var d=CryptoJS.HmacMD5(a,"zgayard").toString(CryptoJS.enc.Base64url).slice(0,8),c=null;if(b){var e={root:document.getElementById("txtRoot").value};document.getElementById("chkEncryFname").checked&&(e.encfname=!0);var f=!1;G.forEach(function(k){k.root==e.root&&(f=!0)});f?B("dupRoot"):(D.B("root",e.root),ta(a),c=CryptoJS.lib.WordArray.random(1024),I=v(c),e.iv=d.concat(Ja(!0,c,a)),H=G.length,G.push(e),Ka(e,!0),La())}else{var g=document.getElementById("selRoot").value,h=-1;G.forEach(function(k,
l){k.root==g&&(h=l)});0<=h&&G[h].iv&&d==G[h].iv.slice(0,d.length)?(H=h,D.B("root",g),ta(a),c=Ja(!1,G[H].iv.slice(d.length),a),I=v(c),Ma()):aa()?B("pwdError"):R()}}function Ja(a,b,d){d=v(d);var c=null;a?c=b:c=CryptoJS.enc.Base64url.parse(b);b=y(a,c,d);return a?b.toString(CryptoJS.enc.Base64url):b}function La(){var a=CryptoJS.enc.Utf8.parse(JSON.stringify(G));a=new Blob([new Uint8Array(ea(a))],{type:"application/octet-binary"});a=new ha({ea:a});var b=E.v({R:"_zgayard_.conf"});ja(a,b,Ma)}
function Aa(a){var b=new fa;ja(E.l({s:a}),b,function(){var d=new CryptoJS.lib.WordArray.init(b.i());d=JSON.parse(d.toString(CryptoJS.enc.Utf8));Array.isArray(d)?G=d:G.push(d);var c=-1,e=D.F("root"),f=document.getElementById("selRoot");f.innerHTML="";G.forEach(function(h,k){var l=!1;e&&h.root==e&&(l=!0);Ka(h,l,f);l&&(c=k)});if(0<=c){H=c;var g=D.F("key_words");g?ua(function(h){h&&h.lsauth&&!h.newkey?(h=y(!1,CryptoJS.enc.Base64url.parse(g),h.lsauth),Ia(h)):R()}):R()}else H=0,R()})}
function Ka(a,b,d){d||=document.getElementById("selRoot");var c=document.createElement("option");c.value=a.root;c.innerText=a.root;b&&(c.selected=!0);d.appendChild(c)};function Na(a){if(G[H].encfname){var b=I;a=CryptoJS.enc.Utf8.parse(a);b=y(!0,a,b).toString(CryptoJS.enc.Base64url)}else b=a;return b}
function Oa(){D=new ka;D.Ba(function(a){a&&B("IndexedDB is not supported in your browser settings.");a=D.aa();a||(D.ba(),a=D.aa(!0));if(!a){a=navigator.language;var b=a.indexOf("-");0<b&&(a=a.substring(0,b))}xa(a);a=D.ya();b=document.getElementById("selDrive");var d=ca(),c;for(c in C){var e=document.createElement("option");e.value=c;e.innerText=C[c].A;a?a==c&&(e.selected=!0):C[c].Ea(d)&&(a=c,e.selected=!0);b.appendChild(e)}D.H()&&(document.getElementById("divSkipLogin").style.display="block",document.getElementById("divSaveKey").style.display=
"block",D.l&&(document.getElementById("chkSkipLogin").checked=!0),D.F("key_words")&&(document.getElementById("chkSaveKey").checked=!0));a?za(a):wa()})}function Ma(){Fa();Pa(function(){var a=G[H].root;E.u({m:function(b,d){b?404==b.G?E.J({na:a,m:function(c,e){c?B(JSON.stringify(c)):(M=[],M.push(e),T())}}):B(JSON.stringify(b)):(M=[],M.push(d),T())},o:a})})}
function Qa(a){var b=document.getElementById("spanQuota");"string"==typeof a&&(a=parseInt(a,10));var d=parseInt(b.getAttribute("total"),10),c=parseInt(b.getAttribute("trash"),10),e=0;b.hasAttribute("used")&&(e=parseInt(b.getAttribute("used"),10));e+=a;b.setAttribute("used",e);b.innerText=window.msgs.quotaInfo.replace("{0}",da(d-e-c))}function Pa(a){E.$({m:function(b,d){b?B(b):(b=document.getElementById("spanQuota"),b.setAttribute("total",d.La),b.setAttribute("trash",d.Ma),Qa(d.Oa),a&&a())}})}
function T(a,b,d){var c=0;if(!d){if(0>=M.length)return;c=M.length-1;d=M[c]}var e="#tblst";b&&(e="#tblFolder");e=p(e);var f=e.oa,g=e.D;g.innerHTML="";O("loading");e=f.getElementsByTagName("th")[0];var h=t(e,"a",!0);a?h&&h.classList.remove("fnormal"):(h&&(0==c?e.innerHTML="":h.classList.add("fnormal")),a=document.createElement("a"),h=document.createElement("span"),a.href="#",a.innerText=d.A,a.setAttribute("uid",d.s),a.setAttribute("idx",c),a.addEventListener("click",Ra),e.appendChild(a),h.innerText=
">",e.appendChild(h));E.aa({m:function(k,l){if(k)B(k);else{var u=[],J=0;l.forEach(function(w){var r=0,x=u.length;a:{var A=w.A;if(G[H].encfname)try{var K=I,S=CryptoJS.enc.Base64url.parse(A);var L=y(!1,S,K).toString(CryptoJS.enc.Utf8);break a}catch(V){console.error(V)}L=A}w.A=L;for(U(w)?x=J++:r=J;r<x&&!(w.A<u[r].A);)r++;r<u.length?u.splice(r,0,w):u.push(w)});u.forEach(function(w){b&&!U(w)||Sa(g,w,b)});b||(document.getElementById("divHeader").style.display="block",f.style.display="block",document.getElementById("divAction").style.display=
"block",k=document.getElementById("chkAll"),k.checked=!1,k.style.display=0<l.length?"":"none");O()}},Z:d.s})}
function Sa(a,b,d){var c=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("a"),g=b.A;if(!d)var h=document.createElement("input"),k=document.createElement("span"),l=document.createElement("span");d||(h.type="checkbox",e.appendChild(h),U(b)?k.innerHTML="&#x1f4c1;":(h=Ta(g),k.innerHTML=qa[h]?"&#x1f5bc;":"&#x1f4c4;"),e.appendChild(k));f.innerText=g;f.href="#";f.setAttribute("uid",b.s);f.setAttribute("utype",b.ga);f.addEventListener("click",W);e.appendChild(f);d||(l.innerHTML=
"&#x1f4dd;",l.setAttribute("class","dropbtn"),l.addEventListener("click",Ua),e.appendChild(l));c.appendChild(e);d||(e=document.createElement("td"),e.innerText=da(b.Ka),e.setAttribute("class","right"),c.appendChild(e),d=e=document.createElement("td"),b=new Date(b.Fa),f=[],g=[],f.push(b.getFullYear()),f.push(b.getMonth()+1),f.push(b.getDate()),g.push("0".concat(b.getHours()).slice(-2)),g.push("0".concat(b.getMinutes()).slice(-2)),g.push("0".concat(b.getSeconds()).slice(-2)),d.innerText=f.join("-")+
" "+g.join(":"),c.appendChild(e));a.appendChild(c)}
function W(a,b){window.event.preventDefault();if(!a||a instanceof Event){b=m();if(U(b)){n(b,"TABLE").getAttribute("onlyfolder")?T(!1,!0,{s:b.getAttribute("uid"),A:b.innerText}):(M.push({s:b.getAttribute("uid"),A:b.innerText}),T());return}var d=p("#tblFileDetail").D;var c=p("#tblst").D.rows;var e=n(b,"TR").rowIndex-c[0].rowIndex}else{d=p("#tblFileDetail").D;c=p("#tblst").D.rows;e=d.rows[0].getAttribute("rowidx");if(1==a)if(0<e)e--;else{if(b)return;e=c.length-1}else if(e++,e>=c.length){if(b)return;
e=0}b=c[e].getElementsByTagName("a")[0];if(U(b)){d.rows[0].setAttribute("rowidx",e);W(a);return}}d.rows[0].cells[1].getElementsByTagName("span")[0].innerText=b.innerText;d.rows[0].setAttribute("uid",b.getAttribute("uid"));d.rows[0].setAttribute("rowidx",e);d.rows[1].cells[0].innerText=window.msgs.thSize+": "+c[e].cells[1].innerText;Va(b.getAttribute("uid"),b.innerText)}
function Ra(){window.event.preventDefault();var a=m(),b=n(a,"TABLE"),d=b.getElementsByTagName("th")[0];if(b.getAttribute("onlyfolder")){b=0;for(var c=a.nextElementSibling;c;)c.tagName==a.tagName&&b++,c=c.nextElementSibling;if(0<b)for(c=0;c<b;c++)d.removeChild(d.lastElementChild),d.removeChild(d.lastElementChild);T(!0,!0,{A:a.innerText,s:a.getAttribute("uid")})}else a=parseInt(a.getAttribute("idx"),10),a<M.length-1&&M.splice(a+1).forEach(function(){d.removeChild(d.lastElementChild);d.removeChild(d.lastElementChild)}),
T(!0)}function U(a){return"1"==(a instanceof HTMLElement?a.getAttribute("utype"):"string"==typeof a?a:a.ga)}function Ta(a){var b=a.lastIndexOf("."),d="";0<=b&&(d=a.slice(b+1));return d.toLowerCase()}function Wa(){for(var a=m().checked,b=p("#tblst").D.getElementsByTagName("input"),d=0;d<b.length;d++)"checkbox"==b[d].type&&(b[d].checked=a)}
function Xa(a){var b=document.getElementById("divGround");1==a?(b.style.backgroundColor="transparent",document.getElementById("tblFileDetail").parentElement.style.display="none"):(b.style.backgroundColor="",document.getElementById("tblFileDetail").parentElement.style.display="",2==a?(document.getElementById("spanGroundTitle").innerText=window.msgs.gtlFDetail,document.getElementById("tblFileDetail").style.display=""):document.getElementById("tblFileDetail").style.display="none",3==a?(document.getElementById("spanGroundTitle").innerText=
window.msgs.gtlMoveto,a=document.getElementById("tblFolder"),a.getElementsByTagName("th")[0].innerHTML=null,a.style.display=""):document.getElementById("tblFolder").style.display="none");b.style.display="table"}
function Ua(){var a=m(),b=p("#tblst").D.rows;b=n(a,"TR").rowIndex-b[0].rowIndex;var d=document.getElementById("divItemenu");a=a.getBoundingClientRect();d.style.left=a.right+"px";d.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+a.top+"px";d.style.display="block";d.setAttribute("rowidx",b);Xa(1)}
function Ya(){var a=m(),b=n(a,"DIV"),d=document.getElementById("divItemenu");var c=p("#tblst").D.rows;d=parseInt(d.getAttribute("rowidx"),10);c=c[d].getElementsByTagName("a")[0];b.style.display="";switch(a.getAttribute("wordid")){case "btnDownload":U(c)?B("noDownFolder"):(b.setAttribute("uid",c.getAttribute("uid")),b.setAttribute("uname",c.innerText),Za(2));Y();break;case "btnRename":a=document.getElementById("divNewName");b=a.getElementsByTagName("input")[0];d=c.getBoundingClientRect();b.value=c.innerText;
a.style.left=d.left+"px";a.style.top=d.top-2+"px";b.style.width=d.width+"px";b.style.height=d.height+"px";a.style.display="block";break;case "btnMove":$a(c.getAttribute("uid"));break;case "btnDelete":ab(c.getAttribute("uid")),Y()}}function $a(a){if("string"==typeof a)document.getElementById("tblFolder").setAttribute("uid",a);else if(Z())document.getElementById("tblFolder").removeAttribute("uid");else return;Xa(3);T(!1,!0,M[0])}
function bb(){var a=window.event;if(13===a.keyCode){if(a.shiftKey||a.ctrlKey||a.altKey)return!0}else return!0;cb();return!1}
function cb(){var a=m();"INPUT"!=a.tagName&&(a=t(a,"INPUT"));if(a.value){var b=document.getElementById("divItemenu"),d=p("#tblst").D.rows;b=parseInt(b.getAttribute("rowidx"),10);var c=d[b].getElementsByTagName("a")[0];a.value!=c.innerText&&(d=Na(a.value),d={m:function(e){e?B(e.I):(c.innerText=a.value,P("renDone"))},P:c.getAttribute("uid"),ua:d},E.ca(d));Y()}else B("noNewName")}
function db(){Y();var a=document.getElementById("tblFolder"),b=t(a.getElementsByTagName("th")[0],"a",!0).getAttribute("uid");if(b!=M[M.length-1].s){var d=null;(a=a.getAttribute("uid"))?(d=[],d.push({s:a,A:""})):d=Z();if(d){O("moving");var c=0,e={m:function(f){f?B(f.I):(c++,c<d.length?(e.P=d[c].s,E.C(e)):(T(!0),P("moveDone")))},P:d[c].s,X:b};E.C(e)}}}
function ab(a){var b=null;"string"==typeof a?(b=[],b.push({s:a,A:""})):b=Z();if(b&&confirm(window.msgs.delConfirm)){O("deleting");var d=0,c={m:function(e){e?B(e.I):(d++,d<b.length?(c.P=b[d].s,E.delete(c)):(T(!0),P("delDone")))},P:b[d].s};E.delete(c)}}function eb(){var a=document.getElementById("txtName").value;if(a){var b={m:function(d,c){d?B(d.I):(c.A=a,Sa(p("#tblst").D,c),P("flDone"))},na:Na(a)};0<M.length&&(b.X=M[M.length-1].s);E.J(b)}else B("noFldName")}
function fb(a){O();var b=null;b=(a=1===a)?document.getElementById("upfolder").files:document.getElementById("upfiles").files;if(0>=b.length)B("noFiles");else{var d=p("#tblQueue"),c=d.oa,e=d.D;e.innerHTML="";c.getElementsByTagName("th")[0].innerText=window.msgs.updQueue;c.style.display="block";var f=[];for(d=0;d<b.length;d++){c=document.createElement("tr");var g=document.createElement("td"),h=document.createElement("span"),k=document.createElement("input"),l="";l=b[d].webkitRelativePath?b[d].webkitRelativePath:
b[d].name;f.push({Da:l,Ca:b[d]});g.innerText=l;c.appendChild(g);g=document.createElement("td");h.innerText=window.msgs.waiting;g.appendChild(h);c.appendChild(g);g=document.createElement("td");k.type="button";k.value=window.msgs.btnCancel;k.style.display="none";k.addEventListener("click",gb);g.appendChild(k);c.appendChild(g);e.appendChild(c)}var u="",J="",w=function(r){for(var x=f[r].Da.split("/"),A=0;A<x.length;A++)x[A]=Na(x[A]);var K=e.rows[r].getElementsByTagName("span")[0],S=e.rows[r].getElementsByTagName("input")[0];
K.innerText="-";S.style.display="";var L=new ha({ea:f[r].Ca,U:16E5});A={R:x[0],ta:J};1<x.length&&(A.R=x.join("/"),A.ma=u);var V=E.v(A),X=new z({S:I,Y:L,ka:V});X.v=function(){K.innerText=X.F()+" "+Math.round(100*L.v()/L.h())+"%";return S.getAttribute("canceled")?!1:!0};X.L=function(F,jb){S.style.display="none";if(F)K.innerText=F.message||F.Ra;else if(jb){for(F=r;F<f.length;F++)e.rows[F].getElementsByTagName("span")[0].innerText=window.msgs.updCanceled;0<r&&T(!0)}else K.innerText=window.msgs.upDone,
Qa(V.v()),r++,r<f.length?w(r):T(!0)};X.start()};a?E.u({Z:M[M.length-1].s,m:function(r,x){u=x.Ha.concat("/").concat(x.A);J=x.s;w(0)}}):(J=M[M.length-1].s,w(0))}}function gb(){m().setAttribute("canceled","1")}function Z(a){for(var b=[],d=p("#tblst").D.getElementsByTagName("input"),c=0;c<d.length;c++){var e=d[c];if("checkbox"==e.type&&e.checked){e=q(e,"a");if(a&&U(e))return B("noDownFolder"),null;b.push({A:e.innerText,s:e.getAttribute("uid")})}}return 0>=b.length?(B("noChecks"),null):b}
function Za(a){O();var b=[];switch(a){case 1:a=p("#tblFileDetail").D.rows[0];b.push({A:a.getElementsByTagName("span")[0].innerText,s:a.getAttribute("uid")});break;case 2:a=document.getElementById("divItemenu");b.push({A:a.getAttribute("uname"),s:a.getAttribute("uid")});break;default:if(b=Z(!0),!b)return}a=p("#tblQueue");var d=a.oa;a=a.D;a.innerHTML="";d.getElementsByTagName("th")[0].innerText=window.msgs.downQueue;d.style.display="block";for(d=0;d<b.length;d++){var c=document.createElement("tr"),
e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("input");e.innerText=b[d].A;c.appendChild(e);e=document.createElement("td");f.innerText=window.msgs.waiting;e.appendChild(f);c.appendChild(e);e=document.createElement("td");g.type="button";g.value=window.msgs.btnCancel;g.style.display="none";g.addEventListener("click",gb);e.appendChild(g);c.appendChild(e);a.appendChild(c)}hb(b,0,a)}
function hb(a,b,d){var c=a[b].A,e=d.rows[b].getElementsByTagName("span")[0],f=d.rows[b].getElementsByTagName("input")[0];e.innerText="-";f.style.display="";var g=E.l({s:a[b].s,U:16E5}),h=new fa({sa:document.getElementById("download")}),k=new z({la:!0,S:I,Y:g,ka:h});k.v=function(){e.innerText=k.F()+" "+Math.round(100*g.v()/g.h())+"%";return f.getAttribute("canceled")?!1:!0};k.L=function(l,u){f.style.display="none";if(l)e.innerText=l.message||l.Ra;else if(u)for(l=b;l<a.length;l++)d.rows[l].getElementsByTagName("span")[0].innerText=
window.msgs.downCanceled;else e.innerText=window.msgs.downDone,h.download(c),b++,b<a.length&&hb(a,b,d)};k.start()}
function Va(a,b){var d=p("#tblFileDetail").D;Xa(2);var c=Ta(b),e=d.rows[0].cells[1].getElementsByTagName("span")[0],f=d.rows[0].cells[1].getElementsByTagName("img")[0],g=qa[c];c=ra[c];e.style.display="";f.style.display="none";f.src="";var h=ib(d);d.rows[1].style.display="";d.rows[2].style.display="";if(c)kb(h,a),h.style.display="",e.style.display="none",d.rows[1].style.display="none",d.rows[2].style.display="none";else if(g){var k=new fa;a=new z({la:!0,S:I,Y:E.l({s:a,U:16E4}),ka:k});a.L=function(l,
u){l||u?console.log(l||u):(l=k.i(),l instanceof Uint8Array||(l=new Uint8Array(l)),g&&(f.src=window.URL.createObjectURL(new Blob([l],{type:g})),f.title=b,f.style.display="",e.style.display="none",d.rows[1].style.display="none",d.rows[2].style.display="none"))};a.start()}}function lb(){var a=m();a&&a.src&&window.URL.revokeObjectURL(a.src)}function kb(a,b){b=E.l({s:b});const d=zb_require("videostream");a.h=new ia({la:!0,S:I,Y:b});a.g=new d(a.h,a)}
function Y(){document.getElementById("divGround").style.display="";ib();document.getElementById("divItemenu").style.display="";document.getElementById("divNewName").style.display=""}function ib(a){a||(a=p("#tblFileDetail").D);a=a.rows[0].cells[1].getElementsByTagName("video")[0];a.style.display="none";a.g&&(a.g.destroy(),a.h.va(),delete a.g,delete a.h);return a};window.addEventListener("load",function(){window.addEventListener("scroll",function(){document.getElementById("divGround").style.top=(document.documentElement.scrollTop||document.body.scrollTop)+"px"});document.getElementById("spanNotify").style.display="none";RegExp("android","i").test(navigator.userAgent)||(document.getElementById("spanMoreKey").style.display="none",document.getElementById("spanClearKey").style.display="none");document.getElementById("tblFileDetail").getElementsByTagName("video")[0].addEventListener("ended",
function(){W(2,!0)});var a=0,b=document.getElementById("spanAddRoot");b.addEventListener("click",Da);var d=document.getElementById("divSet").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnLogout":b.addEventListener("click",va);break;case "btnCancel":b.addEventListener("click",Ca);break;case "btnOk":b.addEventListener("click",Ba)}document.getElementById("spanMoreKey").addEventListener("click",Ga);document.getElementById("spanClearKey").addEventListener("click",
Ea);d=document.getElementById("divPwd").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnCancel":b.addEventListener("click",Fa);break;case "btnOk":b.addEventListener("click",Ha)}d=document.getElementById("divHeader").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnSet":b.addEventListener("click",wa)}document.getElementById("chkAll").addEventListener("click",Wa);d=document.getElementById("divAction").getElementsByTagName("input");
for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnDownfs":b.addEventListener("click",Za);break;case "btnMovefs":b.addEventListener("click",$a);break;case "btnDelfs":b.addEventListener("click",ab);break;case "btnNewFldr":b.addEventListener("click",eb);break;case "btnUpfs":b.addEventListener("click",fb);break;case "btnUpfld":b.addEventListener("click",function(){fb(1)})}document.getElementById("divItemenu").addEventListener("click",Ya);b=document.getElementById("divNewName");b.getElementsByTagName("input")[0].addEventListener("keypress",
bb);b.getElementsByTagName("span")[0].addEventListener("click",cb);b=document.getElementById("divGround").firstElementChild;b.addEventListener("click",Y);b.firstElementChild.addEventListener("click",function(c){c.stopPropagation()});b=q(document.getElementById("spanGroundTitle"),"label");b.addEventListener("click",Y);a=document.getElementById("tblFileDetail").getElementsByTagName("tbody")[0].rows;b=a[0];b.cells[0].addEventListener("click",function(){W(1)});b.cells[2].addEventListener("click",function(){W(2)});
b.getElementsByTagName("img")[0].addEventListener("load",lb);d=a[2].getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnDownload":b.addEventListener("click",function(){Za(1)})}d=document.getElementById("tblFolder").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnOk":b.addEventListener("click",db)}Oa()});
