function m(a){var b=null;if(a)if("string"==typeof a)switch(a.charAt(0)){case "#":b=document.getElementById(a.slice(1))}else a instanceof Event?b=a.srcElement||a.target:b=a;else b=window.event.srcElement||window.event.target;return b}function p(a,b){return(a=a.parentElement)?a.tagName==b?a:p(a,b):null}function aa(){var a=document.getElementById("divPwd");return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}
function r(a){a=m(a);if(a){var b=a.getElementsByTagName("tbody")[0];return{ga:a,F:b}}return null}function t(a,b){if((a=a.nextElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.nextElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.nextElementSibling}return a}
function v(a,b,c){if((a=c?a.lastElementChild:a.previousElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.previousElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.previousElementSibling}return a}
function ba(a){if(!a)return null;var b=a.charAt(0);if("?"==b||"#"==b)a=a.substring(1);var c={};a.split("&").forEach(function(d){var e=d.indexOf("=");0>e?c[decodeURIComponent(d)]="":c[decodeURIComponent(d.substring(0,e))]=decodeURIComponent(d.substring(e+1))});return c}function ca(){var a=ba(window.location.search),b=ba(window.location.hash);b&&(a=a?Object.assign(a,b):b);return a}
function w(a){if(1024>a)var b="B";else 1048576>a?(b="KB",a=Math.round(a/102.4)/10):1073741824>a?(b="MB",a=Math.round(a/104857.6)/10):(b="GB",a=Math.round(a/1.073741824E8)/10);var c=a.toString();a=c.indexOf(".");var d=c.split(""),e=[];0<=a?e.push(c.slice(a)):a=d.length;for(c=0;0<a;)3==c++&&(e.unshift(","),c=1),e.unshift(d[--a]);return e.join("").concat(b)};function x(a){var b=CryptoJS.MD5(a);return CryptoJS.kdf.OpenSSL.execute(a,8,4,b)}function A(a,b,c){var d=c;"string"==typeof c&&(d=x(c));if(!(d&&d.iv&&d.key))throw Error("Need iv and key. They can be generated by CryptoJS.kdf.OpenSSL.execute from password and salt.");c={mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};Object.assign(c,d);a=a?CryptoJS.algo.AES.createEncryptor(c.key,c):CryptoJS.algo.AES.createDecryptor(c.key,c);b=a.process(b);b.concat(a.finalize());b.clamp();return b}
function C(a){var b=Array(a.sigBytes);a=a.words;for(var c=0,d=0;d<a.length;d++){for(var e=a[d],f=c+4-1;f>=c;f--)f<b.length&&(b[f]=e&255),e>>=8;c+=4;if(c>=b.length)break}return b}
function D(a){this.l=0;this.h=this.g=null;a&&a.ta&&(this.h=a.ta);this.i=function(b,c){this.l=b;this.h&&"#"!=this.h.href&&window.URL.revokeObjectURL(this.h.href);c&&c()};this.write=function(b,c){Array.isArray(b)?this.g=this.g?this.g.concat(b):b.concat():(this.g||(this.g=[]),this.g.push(b));c&&c()};this.cancel=function(b){b&&b(!1,!0)};this.j=function(){if(this.g&&0<this.g.length&&(this.g[0]instanceof ArrayBuffer||this.g[0]instanceof Uint8Array)){for(var b=0,c=0;c<this.g.length;c++)b+=this.g[c].byteLength;
b=new Uint8Array(b);var d=0;for(c=0;c<this.g.length;++c){var e=this.g[c];e instanceof ArrayBuffer&&(e=new Uint8Array(e));b.set(e,d);d+=e.byteLength}return b}return this.g};this.download=function(b){var c=this.j();c instanceof Uint8Array||(c=new Uint8Array(c));c=new Blob([c],{type:"application/octet-binary"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(c,b);else if(this.h)this.h.download=b,this.h.href=window.URL.createObjectURL(c),this.h.click();else throw Error("Element for download is not specified.");
};this.B=function(){return this.l}}
function da(a){this.l=null;if(a.ea)if(a.ea instanceof Blob)this.l=a.ea;else throw Error("blob is not a Blob.");else throw Error("blob must be specified.");this.D=1600;a.V&&(this.D=a.V);this.g=0;this.v=this.j=null;this.G=function(b,c){if(b){if(b>=this.h())throw Error("offset can not be bigger than input size.");this.g=b}this.j=new FileReader;this.j.onload=function(d){d=d.target.result;this.v&&this.v(d,this)}.bind(this);c&&c()};this.B=function(){return this.g};this.h=function(){return this.l.size};
this.C=function(){return this.g>=this.h()};this.i=function(b){if(1!=this.j.readyState){var c=this.g;this.g=b?this.g+b:this.g+this.D;this.j.readAsArrayBuffer(this.l.slice(c,this.g))}};this.M=function(){this.l=this.j=null}}
function E(a,b){if(!a.la)if(this.getSuperClass&&"Readable"==this.getSuperClass().name)this.super(b),this.h=1,b&&b.objectMode&&(this.M=!0);else throw Error("writer must be specified in no stream mode.");this.i=this.C=null;this.D=!0;this.g=null;this.l=a.la;this.iv=this.key=null;this.j=0;this.B=null;this.G=this.v=0;this.speed="-";a.ma&&(this.D=!1);if(a.Z)this.g=a.Z;else throw Error("reader must be specified.");if(a.T)b=null,b="string"==typeof a.T?x(a.T):a.T,this.key=b.key,this.iv=b.iv;else throw Error("keycfg must be specified.");
this.start=function(c){if(c){if(this.D)throw Error("Can NOT set offset for encryption.");this.j=c;c-=c%16+16;0>c&&(c=0)}this.g.v=this.L.bind(this);this.g.G(c,function(){var d=16*Math.ceil((this.g.h()+1)/16);this.h||!this.l?this.J():this.l.i(d,this.J.bind(this))}.bind(this))};this.I=function(){Date.now()>this.v&&(this.speed=w(1E3*(this.g.B()-this.G)/(Date.now()-this.v+1E3))+"/s",this.v=Date.now()+1E3,this.G=this.g.B());return this.speed};this._read=function(c){1==this.h?this.h=2:3==this.h&&(this.g.C()?
this.push(null):this.g.i(c))};this.push=function(c){return this.readable?(c&&!this.M?this.superCall("push",new Uint8Array(c)):this.superCall("push",c),!0):!1};this.J=function(){this.v=Date.now()+1E3;(this.G=this.j)?this.g.i(16):1==this.h?this.h=3:2==this.h?(this.h=3,this.push([])):this.g.i()};this.L=function(c){try{var d=new CryptoJS.lib.WordArray.init(c);if(!this.B){var e={iv:this.iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};this.j&&(e.iv=d,d=null);this.B=this.D?CryptoJS.algo.AES.createEncryptor(this.key,
e):CryptoJS.algo.AES.createDecryptor(this.key,e)}if(d){var f=C(this.B.process(d));this.g.C()&&(f=f.concat(C(this.B.finalize())));if(this.j<this.g.B()){var g=this.j-(this.g.B()-c.byteLength);0<g&&(f=f.slice(g))}else f=null;this.h?this.push(f):f?this.l&&this.l.write(f,function(){this.g.C()?this.qa():this.C?this.C()?this.g.i():this.l.cancel(function(h,k){this.qa(h,k)}.bind(this)):this.g.i()}.bind(this)):this.g.i();f=null}else this.h?2==this.h?(this.h=3,this.push([])):this.h=3:this.g.i()}catch(h){if(this.h)throw h;
this.qa(h)}};this.qa=function(c,d){this.g&&(this.g.M(),this.g=null);this.i&&(c?this.i(c):this.i(!1,d))}}function ea(a){const b=zb_require("readable-stream");E.super_!==b.Readable&&zb_inherits(E,b.Readable);this.h={highWaterMark:8E5};Object.assign(this.h,void 0);this.info=a;this.g=null;this.createReadStream=function(c){this.wa();this.g=new E(this.info,this.h);var d=0;c&&c.start&&(d=c.start);this.g.start(d);return this.g};this.wa=function(){this.g&&(this.g.destroy(),this.g=null)}}
function fa(a,b,c){a.v=function(d){b.write(d,function(){a.C()?c&&c():a.i()})};a.G(0,function(){b.i(a.h(),function(){a.i()})})};function ha(){this.h=!0;this.i=this.o=null;this.l=this.C=!1;this.I=function(){return null!=this.o};this.P=function(a){if(this.h)try{var b=window.sessionStorage.getItem("language"),c=window.sessionStorage.getItem("drive"),d=window.sessionStorage.getItem("skipLogin");window.sessionStorage.clear();b&&window.sessionStorage.setItem("language",b);c&&!a&&window.sessionStorage.setItem("drive",c);d&&!a&&window.sessionStorage.setItem("skipLogin",d)}catch(e){this.h=!1,console.error(e)}};this.B=function(a){var b=
null;if(this.h)try{b=window.sessionStorage.getItem(a)}catch(c){this.h=!1,console.error(c)}return b};this.M=function(a){var b=this.B("login_state");return b&&a==b?!0:!1};this.j=function(a,b){if(this.h)try{return window.sessionStorage.setItem(a,b.toString()),!0}catch(c){this.h=!1,console.error(c)}return!1};this.J=function(a){if(this.h)try{window.sessionStorage.removeItem(a)}catch(b){this.h=!1,console.error(b)}};this.aa=function(){var a=this.B("language"),b=this.B("drive"),c=this.B("skipLogin");this.i=
{};a&&(this.i.language=a,this.L(a));b&&(this.i.U=b,this.ca(b));c&&this.da(c)};this.za=function(){var a=this.g("drive");a||(this.i||this.aa(),a=this.i.U);return a};this.ca=function(a){this.j("drive",a);return this.o?this.o.drive!=a?(this.o.drive=a,this.o[a]||(this.o[a]={}),this.C=!0):!1:!0};this.da=function(a){a?this.l=this.I():(this.l=!1,this.Ca()&&(this.C=!0));this.j("skipLogin",this.l)};this.$=function(a){var b=this.g("language");!b&&a&&this.i&&(b=this.i.language);return b};this.L=function(a){this.j("language",
a);this.o&&this.o.language!=a&&(this.o.language=a,this.C=!0)};this.Ea=function(a){if(window.indexedDB){var b=window.indexedDB.open("zgayard1946");b.onerror=function(){if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};b.onupgradeneeded=function(c){c.target.result.createObjectStore("settings",{keyPath:"key"})};b.onsuccess=function(c){var d=c.target.result;c=d.transaction("settings","readwrite");c.oncomplete=function(){d.close();
a&&a()};c.objectStore("settings").getAll().onsuccess=function(e){this.o={};e.target.result.forEach(function(f){this.o[f.key]=f.value}.bind(this));this.l=(e=this.o.drive)&&this.o[e]&&this.o[e].refresh_token?!0:!1}.bind(this)}.bind(this)}else if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};this.ba=function(){this.C&&this.o&&(this.G(function(a){a.clear().onsuccess=function(){for(var b in this.o)a.put({key:b,value:this.o[b]})}.bind(this)}.bind(this)),
this.C=!1)};this.v=function(a){var b=this.g("drive");return b&&(b=this.o[b])?b[a]:null};this.Ca=function(){var a=this.g("drive");return a&&(a=this.o[a])&&a.refresh_token?(delete a.refresh_token,!0):!1};this.D=function(a,b,c){if(this.o){var d=this.g("drive");b?this.o[d][a]=b:delete this.o[d][a];c?(a=void 0,c instanceof Function&&(a=c),this.G(function(e){e.put({key:d,value:this.o[d]})}.bind(this),a)):this.C=!0}else c&&c instanceof Function&&c()};this.Ba=function(a){this.P(!0);if(this.o){var b=this.g("drive");
delete this.o[b].refresh_token;delete this.o.drive;this.G(function(c){c.put({key:b,value:this.o[b]});c.delete("drive")}.bind(this),a)}else a&&a()};this.Fa=function(a,b){this.Aa({drive:this.g("drive"),root:this.v("root"),fid:a,time:b})};this.Da=function(){var a=this.g("recent");return a&&a.drive==this.g("drive")&&a.root==this.v("root")?a:null};this.G=function(a,b){window.indexedDB.open("zgayard1946").onsuccess=function(c){var d=c.target.result;c=d.transaction("settings","readwrite");c.oncomplete=function(){d.close();
b&&b()};c=c.objectStore("settings");a&&a(c)}};this.g=function(a){return this.o&&this.o[a]?this.o[a]:null};this.Aa=function(a){this.o&&(this.o.recent=a);this.G(function(b){b.put({key:"recent",value:a})}.bind(this),void 0)}};function ia(a,b,c){this.L=c;this.D=b;this.i=null;this.g=a;this.h=function(d){var e="POST",f="https://graph.microsoft.com/v1.0".concat(encodeURI(d.s)),g=new XMLHttpRequest;d&&d.O&&(e=d.O);g.open(e,f,!0);d&&d.N?g.setRequestHeader("Authorization",d.N):d&&d.ia?(e="Bearer",d&&d.ka&&(e=d.ka),g.setRequestHeader("Authorization",e+" "+d.ia)):g.setRequestHeader("Authorization",this.i);if(d&&d.X)for(var h in d.X)g.setRequestHeader(h,d.X[h]);d&&d.m&&(g.onload=function(k){k=k.target;4==k.readyState&&(401==k.status&&
this.g.l&&!d.Ma?this.da(d):d.m({H:k.status,K:k.responseText}))}.bind(this));g.send(d.fa)};this.I=function(d){if(d&&(this.i=this.g.B("access_token")))return!0;d=this.g.l;var e={},f=ca();if(f&&f.token_type&&f.access_token){this.M(f.token_type,f.access_token);if(f&&f.state)if(this.g.M(f.state))this.g.J("login_state");else return F("Unauthorized access to this url."),!1;return!0}f&&f.code?e.code=f.code:d&&(e.sa=this.g.v("refresh_token"));if(e.code||e.sa){if(f&&f.state)if(this.g.M(f.state))this.g.J("login_state");
else return F("Unauthorized access to this url."),!1;if((f=this.G(e))&&f.token_type&&f.access_token)return this.M(f.token_type,f.access_token),d&&e.code&&f.refresh_token&&this.g.D("refresh_token",f.refresh_token),f.logout&&this.g.j("logout_url",f.logout),!0;f&&f.error?F("["+f.error+"] "+f.error_description):F("Unknown error occured when doing authorization.")}else d&&(e.ya=!0),(f=this.G(e))&&f.url?(f.state&&(this.g.j("login_state",f.state)||(f.state=la)),f.logout&&this.g.j("logout_url",f.logout),
window.location.href=f.url.concat("&state=".concat(encodeURIComponent(f.state)))):f&&f.error?F("["+f.error+"] "+f.error_description):F("Unknown error occured when doing authorization.");return!1};this.ba=function(){this.i=null;this.g.J("access_token");var d=this.g.B("logout_url");if(d)window.location.href=d;else{d=new FormData;d.append("drive_type","onedrive");d.append("action","logout");var e=new XMLHttpRequest;e.open("POST",this.D,!0);e.withCredentials=!0;e.onload=function(f){f=f.target;4==f.readyState&&
200==f.status&&(f=JSON.parse(f.responseText))&&f.logout&&(window.location.href=f.logout)};e.send(d)}};this.$=function(d){var e={O:"GET",s:"/me/drive",m:function(f){var g=null,h=!1;200==f.H?(f=JSON.parse(f.K).quota,g={Pa:f.deleted,Oa:f.total,Ra:f.used}):h=f;d&&d.m?d.m(h,g):h&&F(JSON.stringify(h))}.bind(this)};this.j(d,e);this.h(e)};this.l=function(d){var e={s:"",O:"GET",m:function(f){var g=null,h=!1;200==f.H?g=this.ra(JSON.parse(f.K)):h=f;d&&d.m?d.m(h,g):h&&alert(JSON.stringify(h))}.bind(this)};if(d&&
d.s)e.s="/me/drive/root:/"+d.s;else if(d&&d.W)e.s="/me/drive/items/"+d.W;else throw Error("No path nor id is specified.");this.j(d,e);this.h(e)};this.aa=function(d){var e={s:"/me/drive/root/children",O:"GET",m:function(f){var g=[],h=!1;200==f.H?JSON.parse(f.K).value.forEach(function(k){g.push(this.ra(k))},this):h=f;d&&d.m?d.m(h,g):h&&alert(JSON.stringify(h))}.bind(this)};d&&(d.Qa?e.s="/me/drive/root:/"+d.Qa+":/children":d.W&&(e.s="/me/drive/items/"+d.W+"/children"),this.j(d,e));this.h(e)};this.J=
function(d){if(!d||!d.oa)throw Error("Name of new folder is not specified.");var e={X:{"Content-Type":"application/json;charset=UTF-8"},s:"/me/drive/root/children",O:"POST",m:function(f){var g=null,h=!1;201==f.H?g=this.ra(JSON.parse(f.K)):h=f;if(d&&d.m)d.m(h,g);else if(h)throw Error(JSON.stringify(h));}.bind(this)};d.La?e.s="/me/drive/root:/"+d.La+":/children":d.Y&&(e.s="/me/drive/items/"+d.Y+"/children");this.j(d,e);e.fa=JSON.stringify({name:d.oa,folder:{},"@microsoft.graph.conflictBehavior":"fail"});
this.h(e)};this.ca=function(d){this.P(d)};this.C=function(d){this.P(d)};this.delete=function(d){if(!d||!d.R)throw Error("fid is not specified.");var e={s:"/me/drive/items/".concat(d.R),O:"DELETE",m:function(f){var g=!1;204!=f.H&&(g=f);if(d&&d.m)d.m(g);else if(g)throw Error(JSON.stringify(g));}.bind(this)};this.j(d,e);this.h(e)};this.B=function(d){return new ma(d,this)};this.v=function(d){return new na(d,this)};this.da=function(d){console.log("Retry to send ajax.");d&&(d.Ma=!0,this.I(),d.N=this.i,
this.h(d))};this.ra=function(d){var e={u:d.id,A:d.name,Na:d.size,Ja:d.lastModifiedDateTime,pa:d.parentReference.path,ha:"0"};d.folder?e.ha="1":d.file&&(e.ha="2");return e};this.M=function(d,e){this.i=d+" "+e;this.g.j("access_token",this.i)};this.G=function(d){if(!d)throw Error("Options are not specifed when auth onedrive.");var e=new FormData;e.append("drive_type","onedrive");d.clientId&&e.append("client_id",d.clientId);d.Ta&&e.append("redirect_uri",d.Ta);d.Sa&&e.append("client_secret",d.Sa);d.code?
e.append("code",d.code):d.sa?e.append("refresh_token",d.sa):d.ya&&e.append("need_code",d.ya);d=null;var f=new XMLHttpRequest;f.open("POST",this.D,!1);f.withCredentials=!0;f.send(e);if(4==f.readyState)if(200==f.status)d=JSON.parse(f.responseText);else throw Error(f.responseText+" ("+f.status+")");return d};this.P=function(d){if(!d||!d.R)throw Error("fid is not specified.");var e={X:{"Content-Type":"application/json;charset=UTF-8"},s:"/me/drive/items/".concat(d.R),O:"PATCH",m:function(g){var h=!1;200!=
g.H&&(h=g);if(d&&d.m)d.m(h);else if(h)throw Error(JSON.stringify(h));}.bind(this)};this.j(d,e);var f={};d.va&&(f.name=d.va);d.Y&&(f.parentReference={id:d.Y});e.fa=JSON.stringify(f);if("{}"==e.fa)throw Error("No property to be updated.");this.h(e)};this.j=function(d,e){d.ka&&(e.ka=d.ka);d.ia&&(e.ia=d.ia);d.N&&(e.N=d.N)}}
function ma(a,b){this.U=b;this.g=a;this.v="";this.h=this.l=0;if(!this.g||!this.g.S)throw Error("fnm is not specified.");this.i=function(c,d){this.l=c;c={s:"/me",O:"POST",N:this.g.N,X:{"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache",Pragma:"no-cache"},m:function(g){200<=g.H&&299>=g.H?(this.v=JSON.parse(g.K).uploadUrl,d&&d(g)):F(JSON.stringify(g))}.bind(this)};this.g.ua?c.s="/me/drive/items/"+this.g.ua+":/":this.g.na?(this.g.na.startsWith("/drive/root:")||(c.s+="/drive/root:/"),
c.s+=this.g.na.concat("/")):c.s+="/drive/root:/";c.s+=this.g.S;c.s+=":/createUploadSession";var e={"@microsoft.graph.conflictBehavior":"replace"},f=this.g.S.lastIndexOf("/");e.name=0<=f?this.g.S.slice(f+1):this.g.S;c.fa=JSON.stringify({item:e});this.U.h(c)};this.write=function(c,d){var e=new Blob([new Uint8Array(c)],{type:"application/octet-binary"}),f="bytes "+this.h+"-";this.h+=e.size;f+=this.h-1+"/"+this.l;var g=0,h=function(){var k=new XMLHttpRequest;k.open("PUT",this.v,!0);k.setRequestHeader("Content-Range",
f);k.onload=function(l){e=c=null;l=l.target;4==l.readyState&&(200<=l.status&&299>=l.status?d&&d(l.responseText):alert(l.responseText+" ("+l.status+")"))}.bind(this);k.onerror=function(){1>g?(g++,setTimeout(function(){h()},500)):e=c=null};k.send(e)}.bind(this);h()};this.cancel=function(c){var d=new XMLHttpRequest;d.open("DELETE",this.v,!0);d.onload=function(e){e=e.target;if(4==e.readyState){var f={H:e.status,K:e.responseText};200<=e.status&&299>=e.status?c&&c(!1,f):(console.log(e.responseText+" ("+
e.status+")"),c&&c(f))}}.bind(this);d.send()};this.B=function(){return this.l}}
function na(a,b){this.U=b;this.L=a;this.url="";this.name=null;this.D=this.j=this.g=this.size=0;this.P=!1;this.J=16E3;a.V&&(this.J=a.V);this.l=0;this.v=null;this.G=function(c,d){if(this.P){this.j&&(this.D=this.j,this.j=0);if(c){if(c>=this.h())throw console.log("offset:"+c+",size:"+this.h()),Error("offset can not be bigger than input size.");this.g=c}else this.g=0;d&&d()}else this.U.h({s:"/me/drive/items/"+this.L.u,O:"GET",N:this.L.N,m:function(e){this.P=!0;if(200!=e.H)throw Error(e.K+" ("+e.H+")");
e=JSON.parse(e.K);this.size=e.size;if(c){if(c>=this.h())throw Error("offset can not be bigger than input size.");this.g=c}this.url=e["@microsoft.graph.downloadUrl"];this.name=e.name;d&&d()}.bind(this)})};this.B=function(){return this.g};this.h=function(){return this.size};this.C=function(){return this.g>=this.h()};this.i=function(c){c||(c=this.J);this.I(c)};this.M=function(){};this.I=function(c){if(!c||!this.j){if(c)this.j=c;else if(this.j)c=this.j;else throw Error("size must be specified.");if(!this.D){var d=
this.g+c-1,e=function(){var f=new XMLHttpRequest;10<=this.l?(f.open("GET",this.U.L,!0),f.setRequestHeader("Zb-Url",this.url)):f.open("GET",this.url,!0);(0<this.g||d<this.size-1)&&f.setRequestHeader("Range","bytes="+this.g+"-"+d);f.responseType="arraybuffer";f.onload=function(g){if(this.D)this.D=0,this.j&&this.I();else if(this.j=0,g=g.target,4==g.readyState)if(this.l=10>this.l?1:11,200==g.status||206==g.status){var h=parseInt(g.getResponseHeader("content-length"),10);if(h)this.g+=h;else{if(h=g.getResponseHeader("content-range")){var k=
h.indexOf("-");if(0>k)h=0;else{k++;var l=h.indexOf("/",k);h=l<=k?0:parseInt(h.slice(k,l),10)}}else h=0;this.g=h?h+1:d+1}200==g.status&&this.g<this.h()?this.g=this.h():this.g>this.h()&&(this.g=this.h());this.v&&this.v(g.response,this);g.response=null}else throw Error(g.responseText+" ("+g.status+")");}.bind(this);f.onerror=function(){if(0==this.l&&this.U.L)this.l=10,e();else if(1==this.l||11==this.l)this.l++,setTimeout(function(){e()},500)}.bind(this);f.send()}.bind(this);e()}}}}var la="onedrive";const oa={en:"English",ja:"日本語"};var G={};(function(a){a[la]={A:"Microsoft OneDrive",Ka:function(b,c,d){return new ia(b,c,d)},Ia:function(b){return b&&b.state==la?!0:!1}}})(G);const pa={bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png"},qa={avi:"video/x-msvideo",mp4:"video/mp4",mpeg:"video/mpeg"};var I=null,J=null,K=[],L=0,M=null,N=[],O=0;function F(a){var b=document.getElementById("spanError");"string"===typeof a?window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a:a&&(b.innerText=JSON.stringify(a));document.getElementById("spanInfo").style.display="none";b.style.display=a?"block":"none"}
function P(a){var b=document.getElementById("spanInfo");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;document.getElementById("spanError").style.display="none";b.style.display=a?"block":"none"}function Q(a){var b=document.getElementById("spanNotify");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;a&&(O&&(clearTimeout(O),O=0),b.style.display="",O=setTimeout(function(){b.style.display="none";O=0},3E3))}
function R(a,b){function c(e){ra--;"error"==e.type&&(R.xa=!0);if(0==ra){var f=R.xa;delete R.xa;b&&b(f)}e=e.target||e.srcElement;e.hasAttribute("temporary")&&e.remove()}ra++;var d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src",a);d.setAttribute("temporary","1");d.addEventListener("load",c);d.addEventListener("error",c);document.body.appendChild(d)}var ra=0;
function sa(a){I.I()&&(document.getElementById("chkSaveKey").checked?ta(function(b){var c="";b&&b.lsauth&&(c=A(!0,a,b.lsauth).toString(CryptoJS.enc.Base64url));I.D("key_words",c,!0)}):I.D("key_words",null,!0))}function ua(){I.Ba(function(){J.ba()})}
function ta(a){var b=new FormData;b.append("drive_type","localstorage");var c=new XMLHttpRequest;c.open("POST","https://zgayard.f5.si/grantauth.php",!0);c.withCredentials=!0;c.onload=function(d){var e=d.target;4==e.readyState&&(d=null,200==e.status?(e=JSON.parse(e.responseText))?e.error?F("["+e.error+"] "+e.error_description):e.lsauth?d=e:F("lsFailed"):F("lsFailed"):F(e.responseText+" ("+e.status+")"),a&&a(d))};c.send(b)}
function va(a){var b=document.getElementById("divSet"),c=document.getElementById("selDrive"),d=t(c,"input");a?(c.disabled=!0,d.style.display="",b.setAttribute("cancelAll","1"),S(),document.getElementById("divHeader").style.display="",document.getElementById("tblst").style.display="",document.getElementById("tblQueue").style.display="",document.getElementById("divAction").style.display=""):(c.disabled=!1,d.style.display="none");b.style.display="block"}
function wa(a){if(!window.msgs||window.msgs.lang!=a){var b=window.msgs;window.msgs=null;R("msg/"+a+".js",function(){window.msgs?(window.msgs.lang=a,I.L(a),xa()):(console.log("Message file of '"+a+"' is missing."),b?window.msgs=b:R("msg/en.js",function(){window.msgs?(window.msgs.lang="en",I.L(window.msgs.lang),xa()):F("Message file is missing.")}))})}}
function xa(){var a=window.msgs;a.spanConfNotice=a.spanConfNotice.replace("{0}","_zgayard_.conf");for(var b=document.getElementsByTagName("*"),c=0;c<b.length;c++){var d=b[c],e=null;d.hasAttribute("wordid")&&(e=a[d.getAttribute("wordid")]);!e&&d.id&&(e=a[d.id]);e&&("button"==d.type?d.value=e:d.innerText=e)}b=document.getElementById("seLang");for(c in oa)d=document.createElement("option"),d.value=c,d.innerText=oa[c],c==a.lang&&(d.selected=!0),b.appendChild(d)}
function ya(a){P("loading");(a=G[a])?(J=a.Ka(I,"https://zgayard.f5.si/grantauth.php","https://zgayard.f5.si/relay.php"),J.I(!0)&&(I.ba(),J.l({m:function(b,c){b?404==b.H?S(!0,!0):F(JSON.stringify(b)):za(c.u)},s:"_zgayard_.conf"}))):F("unkDrive")}
function Aa(){var a=!1;document.getElementById("selDrive").disabled||(a=I.ca(document.getElementById("selDrive").value));I.da(document.getElementById("chkSkipLogin").checked);wa(document.getElementById("seLang").value);a?(I.P(),ya(document.getElementById("selDrive").value)):I.ba();Ba()}
function Ba(a){var b=document.getElementById("divSet"),c=!1;a&&"boolean"===typeof a?c=!0:"1"==b.getAttribute("cancelAll")&&(c=!0);c&&(document.getElementById("divPwd").style.display="",document.getElementById("divHeader").style.display="block",document.getElementById("tblst").style.display="block",document.getElementById("tblQueue").style.display="block",document.getElementById("divAction").style.display="block",b.removeAttribute("cancelAll"));b.style.display=""}
function Ca(a,b){var c=document.getElementById("divPwd"),d="none";a?(c.setAttribute("addroot","1"),d="block"):c.removeAttribute("addroot");a=c.getElementsByTagName("*");for(c=0;c<a.length;c++){var e=a[c];e.classList.contains("addroot")?e.style.display=d:e.classList.contains("firstep")?e.style.display="none"!=d&&b?"block":"none":e.classList.contains("chgroot")&&(e.style.display="none"==d?"block":"none");"password"==e.type&&(e.value="")}Da("#lblKeyFile")}
function S(a,b){var c=document.getElementById("divPwd");Ca(a,b);c.style.display="block";P()}function Ea(){"1"==document.getElementById("divSet").getAttribute("cancelAll")?Ba(!0):document.getElementById("divPwd").style.display=""}function Fa(){var a=m(),b=a.previousElementSibling.cloneNode();b.value="";a.parentElement.insertBefore(b,a)}function Da(a){a=m(a).parentElement.getElementsByTagName("input");for(var b=a.length-1;0<b;b--)a[b].remove();a[0].value=""}
function Ga(){P("loading");for(var a=document.getElementById("divPwd").hasAttribute("addroot"),b=document.getElementById("pwdKey").value,c=document.getElementById("divfKey").getElementsByTagName("input"),d=[],e=0;e<c.length;e++)for(var f=c[e].files,g=0;g<f.length;g++)d.push(f[g]);if(b||0<d.length){if(a){c=document.getElementById("pwdKeyRe").value;if((b||c)&&b!=c){F("diffPwd");return}if(!document.getElementById("txtRoot").value){F("noRoot");return}}var h=null;b&&(h=CryptoJS.enc.Utf8.parse(b));if(0<
d.length){e=0;var k=new FileReader,l=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA512,"zb12");k.h=function(){k.readAsArrayBuffer(d[e].slice(0,1023));e++};k.onload=function(y){l.update(new CryptoJS.lib.WordArray.init(y.target.result));e<d.length?k.h():(h?h.concat(l.finalize()):h=l.finalize(),h.clamp(),Ha(h,a))};k.h()}else Ha(h,a)}else F("noPwd")}
function Ha(a,b){var c=CryptoJS.HmacMD5(a,"zgayard").toString(CryptoJS.enc.Base64url).slice(0,8),d=null;if(b){var e={root:document.getElementById("txtRoot").value};document.getElementById("chkEncryFname").checked&&(e.encfname=!0);var f=!1;K.forEach(function(k){k.root==e.root&&(f=!0)});f?F("dupRoot"):(I.D("root",e.root),sa(a),d=CryptoJS.lib.WordArray.random(1024),M=x(d),e.iv=c.concat(Ia(!0,d,a)),L=K.length,K.push(e),Ja(e,!0),Ka())}else{var g=document.getElementById("selRoot").value,h=-1;K.forEach(function(k,
l){k.root==g&&(h=l)});0<=h&&K[h].iv&&c==K[h].iv.slice(0,c.length)?(L=h,I.D("root",g),sa(a),d=Ia(!1,K[L].iv.slice(c.length),a),M=x(d),La()):aa()?F("pwdError"):S()}}function Ia(a,b,c){c=x(c);var d=null;a?d=b:d=CryptoJS.enc.Base64url.parse(b);b=A(a,d,c);return a?b.toString(CryptoJS.enc.Base64url):b}function Ka(){var a=CryptoJS.enc.Utf8.parse(JSON.stringify(K));a=new Blob([new Uint8Array(C(a))],{type:"application/octet-binary"});a=new da({ea:a});var b=J.B({S:"_zgayard_.conf"});fa(a,b,La)}
function za(a){var b=new D;fa(J.v({u:a}),b,function(){var c=new CryptoJS.lib.WordArray.init(b.j());c=JSON.parse(c.toString(CryptoJS.enc.Utf8));Array.isArray(c)?K=c:K.push(c);var d=-1,e=I.v("root"),f=document.getElementById("selRoot");f.innerHTML="";K.forEach(function(h,k){var l=!1;e&&h.root==e&&(l=!0);Ja(h,l,f);l&&(d=k)});if(0<=d){L=d;var g=I.v("key_words");g?ta(function(h){h&&h.lsauth&&!h.newkey?(h=A(!1,CryptoJS.enc.Base64url.parse(g),h.lsauth),Ha(h)):S()}):S()}else L=0,S()})}
function Ja(a,b,c){c=c||document.getElementById("selRoot");var d=document.createElement("option");d.value=a.root;d.innerText=a.root;b&&(d.selected=!0);c.appendChild(d)};function Na(a){if(K[L].encfname){var b=M;a=CryptoJS.enc.Utf8.parse(a);b=A(!0,a,b).toString(CryptoJS.enc.Base64url)}else b=a;return b}function Oa(a){if(K[L].encfname)try{var b=M,c=CryptoJS.enc.Base64url.parse(a);return A(!1,c,b).toString(CryptoJS.enc.Utf8)}catch(d){console.error(d)}return a}
function Pa(){I=new ha;I.Ea(function(a){a&&F("IndexedDB is not supported in your browser settings.");a=I.$();a||(I.aa(),a=I.$(!0));if(!a){a=navigator.language;var b=a.indexOf("-");0<b&&(a=a.substring(0,b))}wa(a);a=I.za();b=document.getElementById("selDrive");var c=ca(),d;for(d in G){var e=document.createElement("option");e.value=d;e.innerText=G[d].A;a?a==d&&(e.selected=!0):G[d].Ia(c)&&(a=d,e.selected=!0);b.appendChild(e)}I.I()&&(document.getElementById("divSkipLogin").style.display="block",document.getElementById("divSaveKey").style.display=
"block",I.l&&(document.getElementById("chkSkipLogin").checked=!0),I.v("key_words")&&(document.getElementById("chkSaveKey").checked=!0));a?ya(a):va()})}function La(){Ea();Qa(function(){var a=K[L].root;J.l({m:function(b,c){b?404==b.H?J.J({oa:a,m:function(d,e){d?F(JSON.stringify(d)):(N=[],N.push(e),T())}}):F(JSON.stringify(b)):(N=[],N.push(c),T(),Ra())},s:a})})}
function Sa(a){var b=document.getElementById("spanQuota");"string"==typeof a&&(a=parseInt(a,10));var c=parseInt(b.getAttribute("total"),10),d=parseInt(b.getAttribute("trash"),10),e=0;b.hasAttribute("used")&&(e=parseInt(b.getAttribute("used"),10));e+=a;b.setAttribute("used",e);b.innerText=window.msgs.quotaInfo.replace("{0}",w(c-e-d))}function Qa(a){J.$({m:function(b,c){b?F(b):(b=document.getElementById("spanQuota"),b.setAttribute("total",c.Oa),b.setAttribute("trash",c.Pa),Sa(c.Ra),a&&a())}})}
function Ra(){var a=document.getElementById("divHistory");a.style.display="";var b=I.Da();b&&J.l({W:b.fid,m:function(c,d){if(!c){c=a.getElementsByTagName("a")[0];c.innerText=Oa(d.A);c.setAttribute("fid",d.u);d.pa&&c.setAttribute("parent",d.pa);if(b.time){c.setAttribute("time",b.time);d=c.innerText.concat(" [");var e=d.concat,f=Math.floor(b.time),g=Math.floor(f/3600);f-=3600*g;var h=Math.floor(f/60);f-=60*h;var k=[];0<g?(k.push(g.toString()),k.push("0".concat(h).slice(-2))):k.push(h.toString());k.push("0".concat(f).slice(-2));
c.innerText=e.call(d,k.join(":")).concat("]")}a.style.display="block"}}})}
function T(a,b,c,d){var e=0;if(!c){if(0>=N.length)return;e=N.length-1;c=N[e]}var f="#tblst";b&&(f="#tblFolder");f=r(f);var g=f.ga,h=f.F;h.innerHTML="";P("loading");f=g.getElementsByTagName("th")[0];var k=v(f,"a",!0);a?k&&k.classList.remove("fnormal"):(k&&(0==e?f.innerHTML="":k.classList.add("fnormal")),Ta(f,c,e));J.aa({m:function(l,y){if(l)F(l);else{var u=[],z=0;y.forEach(function(n){var q=0,B=u.length;n.A=Oa(n.A);for(W(n)?B=z++:q=z;q<B&&!(n.A<u[q].A);)q++;q<u.length?u.splice(q,0,n):u.push(n)});u.forEach(function(n){b&&
!W(n)||Ua(h,n,b)});b||(document.getElementById("divHeader").style.display="block",g.style.display="block",document.getElementById("divAction").style.display="block",l=document.getElementById("chkAll"),l.checked=!1,l.style.display=0<y.length?"":"none");d&&d(u);P()}},W:c.u})}
function Ta(a,b,c,d){var e=document.createElement("a"),f=document.createElement("span");e.href="#";e.innerText=b.A;e.setAttribute("uid",b.u);e.setAttribute("idx",c);e.addEventListener("click",Va);d&&e.classList.add("fnormal");a.appendChild(e);f.innerText=">";a.appendChild(f)}
function Ua(a,b,c){var d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("a"),g=b.A;if(!c)var h=document.createElement("input"),k=document.createElement("span"),l=document.createElement("span");c||(h.type="checkbox",e.appendChild(h),W(b)?k.innerHTML="&#x1f4c1;":(h=Wa(g),k.innerHTML=pa[h]?"&#x1f5bc;":"&#x1f4c4;"),e.appendChild(k));f.innerText=g;f.href="#";f.setAttribute("uid",b.u);f.setAttribute("utype",b.ha);f.addEventListener("click",X);e.appendChild(f);c||(l.innerHTML=
"&#x1f4dd;",l.setAttribute("class","dropbtn"),l.addEventListener("click",Xa),e.appendChild(l));d.appendChild(e);c||(e=document.createElement("td"),e.innerText=w(b.Na),e.setAttribute("class","right"),d.appendChild(e),c=e=document.createElement("td"),b=new Date(b.Ja),f=[],g=[],f.push(b.getFullYear()),f.push(b.getMonth()+1),f.push(b.getDate()),g.push("0".concat(b.getHours()).slice(-2)),g.push("0".concat(b.getMinutes()).slice(-2)),g.push("0".concat(b.getSeconds()).slice(-2)),c.innerText=f.join("-")+" "+
g.join(":"),d.appendChild(e));a.appendChild(d)}
function X(a,b){if(!a||a instanceof Event){window.event.preventDefault();b=m();if(W(b)){p(b,"TABLE").getAttribute("onlyfolder")?T(!1,!0,{u:b.getAttribute("uid"),A:b.innerText}):(N.push({u:b.getAttribute("uid"),A:b.innerText}),T());return}var c=r("#tblFileDetail").F;var d=r("#tblst").F.rows;var e=p(b,"TR").rowIndex-d[0].rowIndex}else{c=r("#tblFileDetail").F;d=r("#tblst").F.rows;e=c.rows[0].getAttribute("rowidx");if(1==a)if(0<e)e--;else{if(b)return;e=d.length-1}else if(e++,e>=d.length){if(b)return;
e=0}b=d[e].getElementsByTagName("a")[0];if(W(b)){c.rows[0].setAttribute("rowidx",e);X(a);return}}c.rows[0].cells[1].getElementsByTagName("span")[0].innerText=b.innerText;c.rows[0].setAttribute("uid",b.getAttribute("uid"));c.rows[0].setAttribute("rowidx",e);c.rows[1].cells[0].innerText=window.msgs.thSize+": "+d[e].cells[1].innerText;Ya(b.getAttribute("uid"),b.innerText)}
function Va(){window.event.preventDefault();var a=m(),b=p(a,"TABLE"),c=b.getElementsByTagName("th")[0];if(b.getAttribute("onlyfolder")){b=0;for(var d=a.nextElementSibling;d;)d.tagName==a.tagName&&b++,d=d.nextElementSibling;if(0<b)for(d=0;d<b;d++)c.removeChild(c.lastElementChild),c.removeChild(c.lastElementChild);T(!0,!0,{A:a.innerText,u:a.getAttribute("uid")})}else a=parseInt(a.getAttribute("idx"),10),a<N.length-1&&N.splice(a+1).forEach(function(){c.removeChild(c.lastElementChild);c.removeChild(c.lastElementChild)}),
T(!0)}function W(a){return"1"==(a instanceof HTMLElement?a.getAttribute("utype"):"string"==typeof a?a:a.ha)}function Wa(a){var b=a.lastIndexOf("."),c="";0<=b&&(c=a.slice(b+1));return c.toLowerCase()}function Za(){for(var a=m().checked,b=r("#tblst").F.getElementsByTagName("input"),c=0;c<b.length;c++)"checkbox"==b[c].type&&(b[c].checked=a)}
function $a(a){var b=document.getElementById("divGround");1==a?(b.style.backgroundColor="transparent",document.getElementById("tblFileDetail").parentElement.style.display="none"):(b.style.backgroundColor="",document.getElementById("tblFileDetail").parentElement.style.display="",2==a?(document.getElementById("spanGroundTitle").innerText=window.msgs.gtlFDetail,document.getElementById("tblFileDetail").style.display=""):document.getElementById("tblFileDetail").style.display="none",3==a?(document.getElementById("spanGroundTitle").innerText=
window.msgs.gtlMoveto,a=document.getElementById("tblFolder"),a.getElementsByTagName("th")[0].innerHTML=null,a.style.display=""):document.getElementById("tblFolder").style.display="none");b.style.display="table"}
function Xa(){var a=m(),b=r("#tblst").F.rows;b=p(a,"TR").rowIndex-b[0].rowIndex;var c=document.getElementById("divItemenu");a=a.getBoundingClientRect();c.style.left=a.right+"px";c.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+a.top+"px";c.style.display="block";c.setAttribute("rowidx",b);$a(1)}
function ab(){var a=m(),b=p(a,"DIV"),c=document.getElementById("divItemenu");var d=r("#tblst").F.rows;c=parseInt(c.getAttribute("rowidx"),10);d=d[c].getElementsByTagName("a")[0];b.style.display="";switch(a.getAttribute("wordid")){case "btnDownload":W(d)?F("noDownFolder"):(b.setAttribute("uid",d.getAttribute("uid")),b.setAttribute("uname",d.innerText),bb(2));Y();break;case "btnRename":a=document.getElementById("divNewName");b=a.getElementsByTagName("input")[0];c=d.getBoundingClientRect();b.value=d.innerText;
a.style.left=c.left+"px";a.style.top=c.top-2+"px";b.style.width=c.width+"px";b.style.height=c.height+"px";a.style.display="block";break;case "btnMove":cb(d.getAttribute("uid"));break;case "btnDelete":db(d.getAttribute("uid")),Y()}}function cb(a){if("string"==typeof a)document.getElementById("tblFolder").setAttribute("uid",a);else if(Z())document.getElementById("tblFolder").removeAttribute("uid");else return;$a(3);T(!1,!0,N[0])}
function eb(){var a=window.event;if(13===a.keyCode){if(a.shiftKey||a.ctrlKey||a.altKey)return!0}else return!0;fb();return!1}
function fb(){var a=m();"INPUT"!=a.tagName&&(a=v(a,"INPUT"));if(a.value){var b=document.getElementById("divItemenu"),c=r("#tblst").F.rows;b=parseInt(b.getAttribute("rowidx"),10);var d=c[b].getElementsByTagName("a")[0];a.value!=d.innerText&&(c=Na(a.value),c={m:function(e){e?F(e.K):(d.innerText=a.value,Q("renDone"))},R:d.getAttribute("uid"),va:c},J.ca(c));Y()}else F("noNewName")}
function gb(){Y();var a=document.getElementById("tblFolder"),b=v(a.getElementsByTagName("th")[0],"a",!0).getAttribute("uid");if(b!=N[N.length-1].u){var c=null;(a=a.getAttribute("uid"))?(c=[],c.push({u:a,A:""})):c=Z();if(c){P("moving");var d=0,e={m:function(f){f?F(f.K):(d++,d<c.length?(e.R=c[d].u,J.C(e)):(T(!0),Q("moveDone")))},R:c[d].u,Y:b};J.C(e)}}}
function db(a){var b=null;"string"==typeof a?(b=[],b.push({u:a,A:""})):b=Z();if(b&&confirm(window.msgs.delConfirm)){P("deleting");var c=0,d={m:function(e){e?F(e.K):(c++,c<b.length?(d.R=b[c].u,J.delete(d)):(T(!0),Q("delDone")))},R:b[c].u};J.delete(d)}}function hb(){var a=document.getElementById("txtName").value;if(a){var b={m:function(c,d){c?F(c.K):(d.A=a,Ua(r("#tblst").F,d),Q("flDone"))},oa:Na(a)};0<N.length&&(b.Y=N[N.length-1].u);J.J(b)}else F("noFldName")}
function ib(a){P();var b=null;b=(a=1===a)?document.getElementById("upfolder").files:document.getElementById("upfiles").files;if(0>=b.length)F("noFiles");else{var c=r("#tblQueue"),d=c.ga,e=c.F;e.innerHTML="";d.getElementsByTagName("th")[0].innerText=window.msgs.updQueue;d.style.display="block";var f=[];for(c=0;c<b.length;c++){d=document.createElement("tr");var g=document.createElement("td"),h=document.createElement("span"),k=document.createElement("input"),l="";l=b[c].webkitRelativePath?b[c].webkitRelativePath:
b[c].name;f.push({Ha:l,Ga:b[c]});g.innerText=l;d.appendChild(g);g=document.createElement("td");h.innerText=window.msgs.waiting;g.appendChild(h);d.appendChild(g);g=document.createElement("td");k.type="button";k.value=window.msgs.btnCancel;k.style.display="none";k.addEventListener("click",jb);g.appendChild(k);d.appendChild(g);e.appendChild(d)}var y="",u="",z=function(n){for(var q=f[n].Ha.split("/"),B=0;B<q.length;B++)q[B]=Na(q[B]);var U=e.rows[n].getElementsByTagName("span")[0],ja=e.rows[n].getElementsByTagName("input")[0];
U.innerText="-";ja.style.display="";var ka=new da({ea:f[n].Ga,V:16E5});B={S:q[0],ua:u};1<q.length&&(B.S=q.join("/"),B.na=y);var Ma=J.B(B),V=new E({T:M,Z:ka,la:Ma});V.C=function(){U.innerText=V.I()+" "+Math.round(100*ka.B()/ka.h())+"%";return ja.getAttribute("canceled")?!1:!0};V.i=function(H,nb){ja.style.display="none";if(H)U.innerText=H.message||H.Ua;else if(nb){for(H=n;H<f.length;H++)e.rows[H].getElementsByTagName("span")[0].innerText=window.msgs.updCanceled;0<n&&T(!0)}else U.innerText=window.msgs.upDone,
Sa(Ma.B()),n++,n<f.length?z(n):T(!0)};V.start()};a?J.l({W:N[N.length-1].u,m:function(n,q){y=q.pa.concat("/").concat(q.A);u=q.u;z(0)}}):(u=N[N.length-1].u,z(0))}}function jb(){m().setAttribute("canceled","1")}function Z(a){for(var b=[],c=r("#tblst").F.getElementsByTagName("input"),d=0;d<c.length;d++){var e=c[d];if("checkbox"==e.type&&e.checked){e=t(e,"a");if(a&&W(e))return F("noDownFolder"),null;b.push({A:e.innerText,u:e.getAttribute("uid")})}}return 0>=b.length?(F("noChecks"),null):b}
function bb(a){P();var b=[];switch(a){case 1:a=r("#tblFileDetail").F.rows[0];b.push({A:a.getElementsByTagName("span")[0].innerText,u:a.getAttribute("uid")});break;case 2:a=document.getElementById("divItemenu");b.push({A:a.getAttribute("uname"),u:a.getAttribute("uid")});break;default:if(b=Z(!0),!b)return}a=r("#tblQueue");var c=a.ga;a=a.F;a.innerHTML="";c.getElementsByTagName("th")[0].innerText=window.msgs.downQueue;c.style.display="block";for(c=0;c<b.length;c++){var d=document.createElement("tr"),
e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("input");e.innerText=b[c].A;d.appendChild(e);e=document.createElement("td");f.innerText=window.msgs.waiting;e.appendChild(f);d.appendChild(e);e=document.createElement("td");g.type="button";g.value=window.msgs.btnCancel;g.style.display="none";g.addEventListener("click",jb);e.appendChild(g);d.appendChild(e);a.appendChild(d)}kb(b,0,a)}
function kb(a,b,c){var d=a[b].A,e=c.rows[b].getElementsByTagName("span")[0],f=c.rows[b].getElementsByTagName("input")[0];e.innerText="-";f.style.display="";var g=J.v({u:a[b].u,V:16E5}),h=new D({ta:document.getElementById("download")}),k=new E({ma:!0,T:M,Z:g,la:h});k.C=function(){e.innerText=k.I()+" "+Math.round(100*g.B()/g.h())+"%";return f.getAttribute("canceled")?!1:!0};k.i=function(l,y){f.style.display="none";if(l)e.innerText=l.message||l.Ua;else if(y)for(l=b;l<a.length;l++)c.rows[l].getElementsByTagName("span")[0].innerText=
window.msgs.downCanceled;else e.innerText=window.msgs.downDone,h.download(d),b++,b<a.length&&kb(a,b,c)};k.start()}
function Ya(a,b){var c=r("#tblFileDetail").F;$a(2);var d=Wa(b),e=c.rows[0].cells[1].getElementsByTagName("span")[0],f=c.rows[0].cells[1].getElementsByTagName("img")[0],g=pa[d];d=qa[d];e.style.display="";f.style.display="none";f.src="";var h=lb(c);c.rows[1].style.display="";c.rows[2].style.display="";if(d)mb(h,a),h.style.display="",e.style.display="none",c.rows[1].style.display="none",c.rows[2].style.display="none";else if(g){var k=new D;a=new E({ma:!0,T:M,Z:J.v({u:a,V:16E4}),la:k});a.i=function(l,
y){l||y?console.log(l||y):(l=k.j(),l instanceof Uint8Array||(l=new Uint8Array(l)),g&&(f.src=window.URL.createObjectURL(new Blob([l],{type:g})),f.title=b,f.style.display="",e.style.display="none",c.rows[1].style.display="none",c.rows[2].style.display="none"))};a.start()}}function ob(){var a=m();a&&a.src&&window.URL.revokeObjectURL(a.src)}function mb(a,b){var c=J.v({u:b});const d=zb_require("videostream");a.g=b;a.i=new ea({ma:!0,T:M,Z:c});a.h=new d(a.i,a)}
function Y(){document.getElementById("divGround").style.display="";lb();document.getElementById("divItemenu").style.display="";document.getElementById("divNewName").style.display=""}function lb(a){a||(a=r("#tblFileDetail").F);a=a.rows[0].cells[1].getElementsByTagName("video")[0];a.g&&I.Fa(a.g,a.currentTime);a.style.display="none";a.h&&(a.h.destroy(),a.i.wa(),delete a.h,delete a.i);return a}function pb(a){window.event.preventDefault();a=m(a);qb(a)}function rb(a){a=m(a);a=v(a,"a");qb(a,!0)}
function qb(a,b){document.getElementById("divHistory").style.display="";var c=a.getAttribute("fid");if(c){var d=a.getAttribute("parent"),e=a.getAttribute("time");if(d){var f=d.indexOf(":");0<=f&&(d=d.slice(f+1));"/"==d.charAt(0)&&(d=d.slice(1));var g=d.split("/");if(g[0]==N[0].A){P("loading");var h=N[0].A,k=[];k.push(N[0]);f=1;var l=function(){h=h.concat("/").concat(g[f++]);J.l({s:h,m:function(u,z){u||(z.A=Oa(z.A),k.push(z),f<g.length?l():y())}})},y=function(){var u=0,z=r("#tblst").ga.getElementsByTagName("th")[0];
z.innerHTML="";for(u=0;u<k.length;u++)Ta(z,k[u],u,!0);N=k;T(!0,!1,void 0,function(n){var q;for(q=0;q<n.length&&n[q].u!=c;q++);q<n.length&&(n=r("#tblFileDetail").F.rows[0],b?(n.setAttribute("rowidx",q),X(2,!0)):(n.getElementsByTagName("video")[0].setAttribute("ctime",e),0==q?(n.setAttribute("rowidx",1),X(1,!0)):(n.setAttribute("rowidx",q-1),X(2,!0))))})};l()}}}}
function sb(a){a=m(a);var b=a.getAttribute("ctime");b&&(a.removeAttribute("ctime"),document.getElementById("divHistory").getElementsByTagName("a")[0].getAttribute("fid")==a.g&&(a.currentTime=b))};window.addEventListener("load",function(){window.addEventListener("scroll",function(){document.getElementById("divGround").style.top=(document.documentElement.scrollTop||document.body.scrollTop)+"px"});document.getElementById("spanNotify").style.display="none";RegExp("android","i").test(navigator.userAgent)||(document.getElementById("spanMoreKey").style.display="none",document.getElementById("spanClearKey").style.display="none");var a=0,b=document.getElementById("spanAddRoot");b.addEventListener("click",
Ca);var c=document.getElementById("divSet").getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnLogout":b.addEventListener("click",ua);break;case "btnCancel":b.addEventListener("click",Ba);break;case "btnOk":b.addEventListener("click",Aa)}document.getElementById("spanMoreKey").addEventListener("click",Fa);document.getElementById("spanClearKey").addEventListener("click",Da);c=document.getElementById("divPwd").getElementsByTagName("input");for(a=0;a<
c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnCancel":b.addEventListener("click",Ea);break;case "btnOk":b.addEventListener("click",Ga)}c=document.getElementById("divHeader").getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnSet":b.addEventListener("click",va)}document.getElementById("chkAll").addEventListener("click",Za);c=document.getElementById("divAction").getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnDownfs":b.addEventListener("click",
bb);break;case "btnMovefs":b.addEventListener("click",cb);break;case "btnDelfs":b.addEventListener("click",db);break;case "btnNewFldr":b.addEventListener("click",hb);break;case "btnUpfs":b.addEventListener("click",ib);break;case "btnUpfld":b.addEventListener("click",function(){ib(1)})}b=document.getElementById("divHistory");b.getElementsByTagName("a")[0].addEventListener("click",pb);c=b.getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnPHNext":b.addEventListener("click",
rb)}document.getElementById("divItemenu").addEventListener("click",ab);b=document.getElementById("divNewName");b.getElementsByTagName("input")[0].addEventListener("keypress",eb);b.getElementsByTagName("span")[0].addEventListener("click",fb);b=document.getElementById("divGround").firstElementChild;b.addEventListener("click",Y);b.firstElementChild.addEventListener("click",function(d){d.stopPropagation()});b=t(document.getElementById("spanGroundTitle"),"label");b.addEventListener("click",Y);a=document.getElementById("tblFileDetail").getElementsByTagName("tbody")[0].rows;
b=a[0];b.cells[0].addEventListener("click",function(){X(1)});b.cells[2].addEventListener("click",function(){X(2)});b.getElementsByTagName("img")[0].addEventListener("load",ob);b=b.getElementsByTagName("video")[0];b.addEventListener("canplay",sb);b.addEventListener("ended",function(){X(2,!0)});c=a[2].getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnDownload":b.addEventListener("click",function(){bb(1)})}c=document.getElementById("tblFolder").getElementsByTagName("input");
for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnOk":b.addEventListener("click",gb)}Pa()});
