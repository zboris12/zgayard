function m(a){var b=null;if(a)if("string"==typeof a)switch(a.charAt(0)){case "#":b=document.getElementById(a.slice(1))}else a instanceof Event?b=a.srcElement||a.target:b=a;else b=window.event.srcElement||window.event.target;return b}function n(a,b){return(a=a.parentElement)?a.tagName==b?a:n(a,b):null}function aa(){var a=document.getElementById("divPwd");return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}
function p(a){a=m(a);if(a){var b=a.getElementsByTagName("tbody")[0];return{oa:a,D:b}}return null}function q(a,b){if((a=a.nextElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.nextElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.nextElementSibling}return a}
function t(a,b,c){if((a=c?a.lastElementChild:a.previousElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.previousElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.previousElementSibling}return a}
function ba(a){if(!a)return null;var b=a.charAt(0);if("?"==b||"#"==b)a=a.substring(1);var c={};a.split("&").forEach(function(d){var e=d.indexOf("=");0>e?c[decodeURIComponent(d)]="":c[decodeURIComponent(d.substring(0,e))]=decodeURIComponent(d.substring(e+1))});return c}function ca(){var a=ba(window.location.search),b=ba(window.location.hash);b&&(a=a?Object.assign(a,b):b);return a}
function da(a){if(1024>a)var b="B";else 1048576>a?(b="KB",a=Math.round(a/102.4)/10):1073741824>a?(b="MB",a=Math.round(a/104857.6)/10):(b="GB",a=Math.round(a/1.073741824E8)/10);var c=a.toString();a=c.indexOf(".");var d=c.split(""),e=[];0<=a?e.push(c.slice(a)):a=d.length;for(c=0;0<a;)3==c++&&(e.unshift(","),c=1),e.unshift(d[--a]);return e.join("").concat(b)};function v(a){var b=CryptoJS.MD5(a);return CryptoJS.kdf.OpenSSL.execute(a,8,4,b)}function y(a,b,c){var d=c;"string"==typeof c&&(d=v(c));if(!(d&&d.iv&&d.key))throw Error("Need iv and key. They can be generated by CryptoJS.kdf.OpenSSL.execute from password and salt.");c={mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};Object.assign(c,d);a=a?CryptoJS.algo.AES.createEncryptor(c.key,c):CryptoJS.algo.AES.createDecryptor(c.key,c);b=a.process(b);b.concat(a.finalize());b.clamp();return b}
function ea(a){var b=Array(a.sigBytes);a=a.words;for(var c=0,d=0;d<a.length;d++){for(var e=a[d],f=c+4-1;f>=c;f--)f<b.length&&(b[f]=e&255),e>>=8;c+=4;if(c>=b.length)break}return b}
function fa(a){this.l=0;this.h=this.g=null;a&&a.sa&&(this.h=a.sa);this.j=function(b,c){this.l=b;this.h&&"#"!=this.h.href&&window.URL.revokeObjectURL(this.h.href);c&&c()};this.write=function(b,c){Array.isArray(b)?this.g=this.g?this.g.concat(b):b.concat():(this.g||(this.g=[]),this.g.push(b));c&&c()};this.cancel=function(b){b&&b(!1,!0)};this.i=function(){if(this.g&&0<this.g.length&&(this.g[0]instanceof ArrayBuffer||this.g[0]instanceof Uint8Array)){for(var b=0,c=0;c<this.g.length;c++)b+=this.g[c].byteLength;
b=new Uint8Array(b);var d=0;for(c=0;c<this.g.length;++c){var e=this.g[c];e instanceof ArrayBuffer&&(e=new Uint8Array(e));b.set(e,d);d+=e.byteLength}return b}return this.g};this.download=function(b){var c=this.i();c instanceof Uint8Array||(c=new Uint8Array(c));c=new Blob([c],{type:"application/octet-binary"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(c,b);else if(this.h)this.h.download=b,this.h.href=window.URL.createObjectURL(c),this.h.click();else throw Error("Element for download is not specified.");
};this.v=function(){return this.l}}
function ha(a){this.l=null;if(a.ea)if(a.ea instanceof Blob)this.l=a.ea;else throw Error("blob is not a Blob.");else throw Error("blob must be specified.");this.B=1600;a.U&&(this.B=a.U);this.g=0;this.u=this.i=null;this.F=function(b,c){if(b){if(b>=this.h())throw Error("offset can not be bigger than input size.");this.g=b}this.i=new FileReader;this.i.onload=function(d){d=d.target.result;this.u&&this.u(d,this)}.bind(this);c&&c()};this.v=function(){return this.g};this.h=function(){return this.l.size};
this.C=function(){return this.g>=this.h()};this.j=function(b){if(1!=this.i.readyState){var c=this.g;this.g=b?this.g+b:this.g+this.B;this.i.readAsArrayBuffer(this.l.slice(c,this.g))}}}
function z(a,b){if(!a.ka)if(this.getSuperClass&&"Readable"==this.getSuperClass().name)this.super(b),this.h=1,b&&b.objectMode&&(this.K=!0);else throw Error("writer must be specified in no stream mode.");this.L=this.v=null;this.C=!0;this.g=null;this.i=a.ka;this.iv=this.key=null;this.j=0;this.u=null;this.B=this.l=0;this.speed="-";a.la&&(this.C=!1);if(a.Y)this.g=a.Y;else throw Error("reader must be specified.");if(a.S)b=null,b="string"==typeof a.S?v(a.S):a.S,this.key=b.key,this.iv=b.iv;else throw Error("keycfg must be specified.");
this.start=function(c){if(c){if(this.C)throw Error("Can NOT set offset for encryption.");this.j=c;c-=c%16+16;0>c&&(c=0)}this.g.u=this.J.bind(this);this.g.F(c,function(){var d=16*Math.ceil((this.g.h()+1)/16);this.h||!this.i?this.H():this.i.j(d,this.H.bind(this))}.bind(this))};this.F=function(){Date.now()>this.l&&(this.speed=da(1E3*(this.g.v()-this.B)/(Date.now()-this.l+1E3))+"/s",this.l=Date.now()+1E3,this.B=this.g.v());return this.speed};this._read=function(c){1==this.h?this.h=2:3==this.h&&(this.g.C()?
this.push(null):this.g.j(c))};this.push=function(c){return this.readable?(c&&!this.K?this.superCall("push",new Uint8Array(c)):this.superCall("push",c),!0):!1};this.H=function(){this.l=Date.now()+1E3;(this.B=this.j)?this.g.j(16):1==this.h?this.h=3:2==this.h?(this.h=3,this.push([])):this.g.j()};this.J=function(c){try{var d=new CryptoJS.lib.WordArray.init(c);if(!this.u){var e={iv:this.iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};this.j&&(e.iv=d,d=null);this.u=this.C?CryptoJS.algo.AES.createEncryptor(this.key,
e):CryptoJS.algo.AES.createDecryptor(this.key,e)}if(d){var f=ea(this.u.process(d));this.g.C()&&(f=f.concat(ea(this.u.finalize())));if(this.j<this.g.v()){var g=this.j-(this.g.v()-c.byteLength);0<g&&(f=f.slice(g))}else f=null;this.h?this.push(f):f?this.i&&this.i.write(f,function(){this.g.C()?this.L&&this.L():this.v?this.v()?this.g.j():this.i.cancel(function(h,k){this.L&&(h?this.L(h):this.L(!1,k))}.bind(this)):this.g.j()}.bind(this)):this.g.j()}else this.h?2==this.h?(this.h=3,this.push([])):this.h=3:
this.g.j()}catch(h){if(this.h)throw h;this.L&&this.L(h)}}}function ia(a){const b=zb_require("readable-stream");z.super_!==b.Readable&&zb_inherits(z,b.Readable);this.h={highWaterMark:8E5};Object.assign(this.h,void 0);this.info=a;this.g=null;this.createReadStream=function(c){this.va();this.g=new z(this.info,this.h);var d=0;c&&c.start&&(d=c.start);this.g.start(d);return this.g};this.va=function(){this.g&&(this.g.destroy(),this.g=null)}}
function ja(a,b,c){a.u=function(d){b.write(d,function(){a.C()?c&&c():a.j()})};a.F(0,function(){b.j(a.h(),function(){a.j()})})};function ka(){this.h=!0;this.j=this.g=null;this.l=this.C=!1;this.H=function(){return null!=this.g};this.$=function(a){if(this.h)try{var b=window.sessionStorage.getItem("language"),c=window.sessionStorage.getItem("drive"),d=window.sessionStorage.getItem("skipLogin");window.sessionStorage.clear();b&&window.sessionStorage.setItem("language",b);c&&!a&&window.sessionStorage.setItem("drive",c);d&&!a&&window.sessionStorage.setItem("skipLogin",d)}catch(e){this.h=!1,console.error(e)}};this.u=function(a){var b=
null;if(this.h)try{b=window.sessionStorage.getItem(a)}catch(c){this.h=!1,console.error(c)}return b};this.V=function(a){var b=this.u("login_state");return b&&a==b?!0:!1};this.i=function(a,b){if(this.h)try{return window.sessionStorage.setItem(a,b.toString()),!0}catch(c){this.h=!1,console.error(c)}return!1};this.K=function(a){if(this.h)try{window.sessionStorage.removeItem(a)}catch(b){this.h=!1,console.error(b)}};this.ba=function(){var a=this.u("language"),b=this.u("drive"),c=this.u("skipLogin");this.j=
{};a&&(this.j.language=a,this.M(a));b&&(this.j.T=b,this.da(b));c&&this.ra(c)};this.ya=function(){var a=this.v("drive");a||(this.j||this.ba(),a=this.j.T);return a};this.da=function(a){this.i("drive",a);return this.g?this.g.drive!=a?(this.g.drive=a,this.g[a]||(this.g[a]={}),this.C=!0):!1:!0};this.ra=function(a){a?this.l=this.H():(this.l=!1,this.Aa()&&(this.C=!0));this.i("skipLogin",this.l)};this.aa=function(a){var b=this.v("language");!b&&a&&this.j&&(b=this.j.language);return b};this.M=function(a){this.i("language",
a);this.g&&this.g.language!=a&&(this.g.language=a,this.C=!0)};this.Ba=function(a){if(window.indexedDB){var b=window.indexedDB.open("zgayard1946");b.onerror=function(){if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};b.onupgradeneeded=function(c){c.target.result.createObjectStore("settings",{keyPath:"key"})};b.onsuccess=function(c){var d=c.target.result;c=d.transaction("settings","readwrite");c.oncomplete=function(){d.close();
a&&a()};c.objectStore("settings").getAll().onsuccess=function(e){this.g={};e.target.result.forEach(function(f){this.g[f.key]=f.value}.bind(this));this.l=(e=this.g.drive)&&this.g[e]&&this.g[e].refresh_token?!0:!1}.bind(this)}.bind(this)}else if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};this.ca=function(){this.C&&this.g&&(this.J(function(a){a.clear().onsuccess=function(){for(var b in this.g)a.put({key:b,value:this.g[b]})}.bind(this)}.bind(this)),
this.C=!1)};this.F=function(a){var b=this.v("drive");return b&&(b=this.g[b])?b[a]:null};this.Aa=function(){var a=this.v("drive");return a&&(a=this.g[a])&&a.refresh_token?(delete a.refresh_token,!0):!1};this.B=function(a,b,c){if(this.g){var d=this.v("drive");b?this.g[d][a]=b:delete this.g[d][a];c?(a=null,c instanceof Function&&(a=c),this.J(function(e){e.put({key:d,value:this.g[d]})}.bind(this),a)):this.C=!0}else c&&c instanceof Function&&c()};this.za=function(a){this.$(!0);if(this.g){var b=this.v("drive");
delete this.g[b].refresh_token;delete this.g.drive;this.J(function(c){c.put({key:b,value:this.g[b]});c.delete("drive")}.bind(this),a)}else a&&a()};this.J=function(a,b){window.indexedDB.open("zgayard1946").onsuccess=function(c){var d=c.target.result;c=d.transaction("settings","readwrite");c.oncomplete=function(){d.close();b&&b()};c=c.objectStore("settings");a&&a(c)}};this.v=function(a){return this.g&&this.g[a]?this.g[a]:null}};function la(a,b,c){this.K=c;this.B=b;this.j=null;this.g=a;this.h=function(d){var e="POST",f="https://graph.microsoft.com/v1.0".concat(encodeURI(d.o)),g=new XMLHttpRequest;d&&d.O&&(e=d.O);g.open(e,f,!0);d&&d.N?g.setRequestHeader("Authorization",d.N):d&&d.ha?(e="Bearer",d&&d.ia&&(e=d.ia),g.setRequestHeader("Authorization",e+" "+d.ha)):g.setRequestHeader("Authorization",this.j);if(d&&d.W)for(var h in d.W)g.setRequestHeader(h,d.W[h]);d&&d.m&&(g.onload=function(k){k=k.target;4==k.readyState&&(401==k.status&&
this.g.l&&!d.Ja?this.da(d):d.m({G:k.status,I:k.responseText}))}.bind(this));g.send(d.fa)};this.H=function(d){if(d&&(this.j=this.g.u("access_token")))return!0;d=this.g.l;var e={},f=ca();if(f&&f.token_type&&f.access_token){this.M(f.token_type,f.access_token);if(f&&f.state)if(this.g.V(f.state))this.g.K("login_state");else return B("Unauthorized access to this url."),!1;return!0}f&&f.code?e.code=f.code:d&&(e.qa=this.g.F("refresh_token"));if(e.code||e.qa){if(f&&f.state)if(this.g.V(f.state))this.g.K("login_state");
else return B("Unauthorized access to this url."),!1;if((f=this.F(e))&&f.token_type&&f.access_token)return this.M(f.token_type,f.access_token),d&&e.code&&f.refresh_token&&this.g.B("refresh_token",f.refresh_token),f.logout&&this.g.i("logout_url",f.logout),!0;f&&f.error?B("["+f.error+"] "+f.error_description):B("Unknown error occured when doing authorization.")}else d&&(e.xa=!0),(f=this.F(e))&&f.url?(f.state&&(this.g.i("login_state",f.state)||(f.state=ma)),f.logout&&this.g.i("logout_url",f.logout),
window.location.href=f.url.concat("&state=".concat(encodeURIComponent(f.state)))):f&&f.error?B("["+f.error+"] "+f.error_description):B("Unknown error occured when doing authorization.");return!1};this.ba=function(){this.j=null;this.g.K("access_token");var d=this.g.u("logout_url");if(d)window.location.href=d;else{d=new FormData;d.append("drive_type","onedrive");d.append("action","logout");var e=new XMLHttpRequest;e.open("POST",this.B,!0);e.withCredentials=!0;e.onload=function(f){f=f.target;4==f.readyState&&
200==f.status&&(f=JSON.parse(f.responseText))&&f.logout&&(window.location.href=f.logout)};e.send(d)}};this.$=function(d){var e={O:"GET",o:"/me/drive",m:function(f){var g=null,h=!1;200==f.G?(f=JSON.parse(f.I).quota,g={Ma:f.deleted,La:f.total,Oa:f.used}):h=f;d&&d.m?d.m(h,g):h&&B(JSON.stringify(h))}.bind(this)};this.i(d,e);this.h(e)};this.u=function(d){var e={o:"",O:"GET",m:function(f){var g=null,h=!1;200==f.G?g=this.pa(JSON.parse(f.I)):h=f;d&&d.m?d.m(h,g):h&&alert(JSON.stringify(h))}.bind(this)};if(d&&
d.o)e.o="/me/drive/root:/"+d.o;else if(d&&d.Z)e.o="/me/drive/items/"+d.Z;else throw Error("No path nor id is specified.");this.i(d,e);this.h(e)};this.aa=function(d){var e={o:"/me/drive/root/children",O:"GET",m:function(f){var g=[],h=!1;200==f.G?JSON.parse(f.I).value.forEach(function(k){g.push(this.pa(k))},this):h=f;d&&d.m?d.m(h,g):h&&alert(JSON.stringify(h))}.bind(this)};d&&(d.Na?e.o="/me/drive/root:/"+d.Na+":/children":d.Z&&(e.o="/me/drive/items/"+d.Z+"/children"),this.i(d,e));this.h(e)};this.J=
function(d){if(!d||!d.na)throw Error("Name of new folder is not specified.");var e={W:{"Content-Type":"application/json;charset=UTF-8"},o:"/me/drive/root/children",O:"POST",m:function(f){var g=null,h=!1;201==f.G?g=this.pa(JSON.parse(f.I)):h=f;if(d&&d.m)d.m(h,g);else if(h)throw Error(JSON.stringify(h));}.bind(this)};d.Ia?e.o="/me/drive/root:/"+d.Ia+":/children":d.X&&(e.o="/me/drive/items/"+d.X+"/children");this.i(d,e);e.fa=JSON.stringify({name:d.na,folder:{},"@microsoft.graph.conflictBehavior":"fail"});
this.h(e)};this.ca=function(d){this.V(d)};this.C=function(d){this.V(d)};this.delete=function(d){if(!d||!d.P)throw Error("fid is not specified.");var e={o:"/me/drive/items/".concat(d.P),O:"DELETE",m:function(f){var g=!1;204!=f.G&&(g=f);if(d&&d.m)d.m(g);else if(g)throw Error(JSON.stringify(g));}.bind(this)};this.i(d,e);this.h(e)};this.v=function(d){return new na(d,this)};this.l=function(d){return new oa(d,this)};this.da=function(d){console.log("Retry to send ajax.");d&&(d.Ja=!0,this.H(),d.N=this.j,
this.h(d))};this.pa=function(d){var e={s:d.id,A:d.name,Ka:d.size,Fa:d.lastModifiedDateTime,Ha:d.parentReference.path,ga:"0"};d.folder?e.ga="1":d.file&&(e.ga="2");return e};this.M=function(d,e){this.j=d+" "+e;this.g.i("access_token",this.j)};this.F=function(d){if(!d)throw Error("Options are not specifed when auth onedrive.");var e=new FormData;e.append("drive_type","onedrive");d.clientId&&e.append("client_id",d.clientId);d.Qa&&e.append("redirect_uri",d.Qa);d.Pa&&e.append("client_secret",d.Pa);d.code?
e.append("code",d.code):d.qa?e.append("refresh_token",d.qa):d.xa&&e.append("need_code",d.xa);d=null;var f=new XMLHttpRequest;f.open("POST",this.B,!1);f.withCredentials=!0;f.send(e);if(4==f.readyState)if(200==f.status)d=JSON.parse(f.responseText);else throw Error(f.responseText+" ("+f.status+")");return d};this.V=function(d){if(!d||!d.P)throw Error("fid is not specified.");var e={W:{"Content-Type":"application/json;charset=UTF-8"},o:"/me/drive/items/".concat(d.P),O:"PATCH",m:function(g){var h=!1;200!=
g.G&&(h=g);if(d&&d.m)d.m(h);else if(h)throw Error(JSON.stringify(h));}.bind(this)};this.i(d,e);var f={};d.ua&&(f.name=d.ua);d.X&&(f.parentReference={id:d.X});e.fa=JSON.stringify(f);if("{}"==e.fa)throw Error("No property to be updated.");this.h(e)};this.i=function(d,e){d.ia&&(e.ia=d.ia);d.ha&&(e.ha=d.ha);d.N&&(e.N=d.N)}}
function na(a,b){this.T=b;this.g=a;this.u="";this.h=this.l=0;if(!this.g||!this.g.R)throw Error("fnm is not specified.");this.j=function(c,d){this.l=c;c={o:"/me",O:"POST",N:this.g.N,W:{"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache",Pragma:"no-cache"},m:function(g){200<=g.G&&299>=g.G?(this.u=JSON.parse(g.I).uploadUrl,d&&d(g)):B(JSON.stringify(g))}.bind(this)};this.g.ta?c.o="/me/drive/items/"+this.g.ta+":/":this.g.ma?(this.g.ma.startsWith("/drive/root:")||(c.o+="/drive/root:/"),
c.o+=this.g.ma.concat("/")):c.o+="/drive/root:/";c.o+=this.g.R;c.o+=":/createUploadSession";var e={"@microsoft.graph.conflictBehavior":"replace"},f=this.g.R.lastIndexOf("/");e.name=0<=f?this.g.R.slice(f+1):this.g.R;c.fa=JSON.stringify({item:e});this.T.h(c)};this.write=function(c,d){var e=new Blob([new Uint8Array(c)],{type:"application/octet-binary"}),f="bytes "+this.h+"-";this.h+=e.size;f+=this.h-1+"/"+this.l;var g=0,h=function(){var k=new XMLHttpRequest;k.open("PUT",this.u,!0);k.setRequestHeader("Content-Range",
f);k.onload=function(l){l=l.target;4==l.readyState&&(200<=l.status&&299>=l.status?d&&d(l.responseText):alert(l.responseText+" ("+l.status+")"))}.bind(this);k.onerror=function(){1>g&&(g++,setTimeout(function(){h()},500))};k.send(e)}.bind(this);h()};this.cancel=function(c){var d=new XMLHttpRequest;d.open("DELETE",this.u,!0);d.onload=function(e){e=e.target;if(4==e.readyState){var f={G:e.status,I:e.responseText};200<=e.status&&299>=e.status?c&&c(!1,f):(console.log(e.responseText+" ("+e.status+")"),c&&
c(f))}}.bind(this);d.send()};this.v=function(){return this.l}}
function oa(a,b){this.T=b;this.K=a;this.url="";this.name=null;this.B=this.i=this.g=this.size=0;this.M=!1;this.J=16E3;a.U&&(this.J=a.U);this.l=0;this.u=null;this.F=function(c,d){if(this.M){this.i&&(this.B=this.i,this.i=0);if(c){if(c>=this.h())throw console.log("offset:"+c+",size:"+this.h()),Error("offset can not be bigger than input size.");this.g=c}else this.g=0;d&&d()}else this.T.h({o:"/me/drive/items/"+this.K.s,O:"GET",N:this.K.N,m:function(e){this.M=!0;if(200!=e.G)throw Error(e.I+" ("+e.G+")");
e=JSON.parse(e.I);this.size=e.size;if(c){if(c>=this.h())throw Error("offset can not be bigger than input size.");this.g=c}this.url=e["@microsoft.graph.downloadUrl"];this.name=e.name;d&&d()}.bind(this)})};this.v=function(){return this.g};this.h=function(){return this.size};this.C=function(){return this.g>=this.h()};this.j=function(c){c||(c=this.J);this.H(c)};this.H=function(c){if(!c||!this.i){if(c)this.i=c;else if(this.i)c=this.i;else throw Error("size must be specified.");if(!this.B){var d=this.g+
c-1,e=function(){var f=new XMLHttpRequest;10<=this.l?(f.open("GET",this.T.K,!0),f.setRequestHeader("Zb-Url",this.url)):f.open("GET",this.url,!0);(0<this.g||d<this.size-1)&&f.setRequestHeader("Range","bytes="+this.g+"-"+d);f.responseType="arraybuffer";f.onload=function(g){if(this.B)this.B=0,this.i&&this.H();else if(this.i=0,g=g.target,4==g.readyState)if(this.l=10>this.l?1:11,200==g.status||206==g.status){var h=parseInt(g.getResponseHeader("content-length"),10);if(h)this.g+=h;else{if(h=g.getResponseHeader("content-range")){var k=
h.indexOf("-");if(0>k)h=0;else{k++;var l=h.indexOf("/",k);h=l<=k?0:parseInt(h.slice(k,l),10)}}else h=0;this.g=h?h+1:d+1}200==g.status&&this.g<this.h()?this.g=this.h():this.g>this.h()&&(this.g=this.h());this.u&&this.u(g.response,this)}else throw Error(g.responseText+" ("+g.status+")");}.bind(this);f.onerror=function(){if(0==this.l&&this.T.K)this.l=10,e();else if(1==this.l||11==this.l)this.l++,setTimeout(function(){e()},500)}.bind(this);f.send()}.bind(this);e()}}}}var ma="onedrive";const pa={en:"English",ja:"日本語"};var C={};(function(a){a[ma]={A:"Microsoft OneDrive",Ga:function(b,c,d){return new la(b,c,d)},Ea:function(b){return b&&b.state==ma?!0:!1}}})(C);const qa={bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png"},ra={avi:"video/x-msvideo",mp4:"video/mp4",mpeg:"video/mpeg"};var D=null,E=null,G=[],H=0,I=null,M=[],N=0;function B(a){var b=document.getElementById("spanError");"string"===typeof a?window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a:a&&(b.innerText=JSON.stringify(a));document.getElementById("spanInfo").style.display="none";b.style.display=a?"block":"none"}
function O(a){var b=document.getElementById("spanInfo");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;document.getElementById("spanError").style.display="none";b.style.display=a?"block":"none"}function P(a){var b=document.getElementById("spanNotify");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;a&&(N&&(clearTimeout(N),N=0),b.style.display="",N=setTimeout(function(){b.style.display="none";N=0},3E3))}
function Q(a,b){function c(e){sa--;"error"==e.type&&(Q.wa=!0);if(0==sa){var f=Q.wa;delete Q.wa;b&&b(f)}e=e.target||e.srcElement;e.hasAttribute("temporary")&&e.remove()}sa++;var d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src",a);d.setAttribute("temporary","1");d.addEventListener("load",c);d.addEventListener("error",c);document.body.appendChild(d)}var sa=0;
function ta(a){D.H()&&(document.getElementById("chkSaveKey").checked?ua(function(b){var c="";b&&b.lsauth&&(c=y(!0,a,b.lsauth).toString(CryptoJS.enc.Base64url));D.B("key_words",c,!0)}):D.B("key_words",null,!0))}function va(){D.za(function(){E.ba()})}
function ua(a){var b=new FormData;b.append("drive_type","localstorage");var c=new XMLHttpRequest;c.open("POST","/grantauth.php",!0);c.withCredentials=!0;c.onload=function(d){var e=d.target;4==e.readyState&&(d=null,200==e.status?(e=JSON.parse(e.responseText))?e.error?B("["+e.error+"] "+e.error_description):e.lsauth?d=e:B("lsFailed"):B("lsFailed"):B(e.responseText+" ("+e.status+")"),a&&a(d))};c.send(b)}
function wa(a){var b=document.getElementById("divSet"),c=document.getElementById("selDrive"),d=q(c,"input");a?(c.disabled=!0,d.style.display="",b.setAttribute("cancelAll","1"),R(),document.getElementById("divHeader").style.display="",document.getElementById("tblst").style.display="",document.getElementById("tblQueue").style.display="",document.getElementById("divAction").style.display=""):(c.disabled=!1,d.style.display="none");b.style.display="block"}
function xa(a){if(!window.msgs||window.msgs.lang!=a){var b=window.msgs;window.msgs=null;Q("msg/"+a+".js",function(){window.msgs?(window.msgs.lang=a,D.M(a),ya()):(console.log("Message file of '"+a+"' is missing."),b?window.msgs=b:Q("msg/en.js",function(){window.msgs?(window.msgs.lang="en",D.M(window.msgs.lang),ya()):B("Message file is missing.")}))})}}
function ya(){var a=window.msgs;a.spanConfNotice=a.spanConfNotice.replace("{0}","_zgayard_.conf");for(var b=document.getElementsByTagName("*"),c=0;c<b.length;c++){var d=b[c],e=null;d.hasAttribute("wordid")&&(e=a[d.getAttribute("wordid")]);!e&&d.id&&(e=a[d.id]);e&&("button"==d.type?d.value=e:d.innerText=e)}b=document.getElementById("seLang");for(c in pa)d=document.createElement("option"),d.value=c,d.innerText=pa[c],c==a.lang&&(d.selected=!0),b.appendChild(d)}
function za(a){O("loading");(a=C[a])?(E=a.Ga(D,"/grantauth.php","/relay.php"),E.H(!0)&&(D.ca(),E.u({m:function(b,c){b?404==b.G?R(!0,!0):B(JSON.stringify(b)):Aa(c.s)},o:"_zgayard_.conf"}))):B("unkDrive")}function Ba(){var a=!1;document.getElementById("selDrive").disabled||(a=D.da(document.getElementById("selDrive").value));D.ra(document.getElementById("chkSkipLogin").checked);xa(document.getElementById("seLang").value);a?(D.$(),za(document.getElementById("selDrive").value)):D.ca();Ca()}
function Ca(a){var b=document.getElementById("divSet"),c=!1;a&&"boolean"===typeof a?c=!0:"1"==b.getAttribute("cancelAll")&&(c=!0);c&&(document.getElementById("divPwd").style.display="",document.getElementById("divHeader").style.display="block",document.getElementById("tblst").style.display="block",document.getElementById("tblQueue").style.display="block",document.getElementById("divAction").style.display="block",b.removeAttribute("cancelAll"));b.style.display=""}
function Da(a,b){var c=document.getElementById("divPwd"),d="none";a?(c.setAttribute("addroot","1"),d="block"):c.removeAttribute("addroot");a=c.getElementsByTagName("*");for(c=0;c<a.length;c++){var e=a[c];e.classList.contains("addroot")?e.style.display=d:e.classList.contains("firstep")?e.style.display="none"!=d&&b?"block":"none":e.classList.contains("chgroot")&&(e.style.display="none"==d?"block":"none");"password"==e.type&&(e.value="")}Ea("#lblKeyFile")}
function R(a,b){var c=document.getElementById("divPwd");Da(a,b);c.style.display="block";O()}function Fa(){"1"==document.getElementById("divSet").getAttribute("cancelAll")?Ca(!0):document.getElementById("divPwd").style.display=""}function Ga(){var a=m(),b=a.previousElementSibling.cloneNode();b.value="";a.parentElement.insertBefore(b,a)}function Ea(a){a=m(a).parentElement.getElementsByTagName("input");for(var b=a.length-1;0<b;b--)a[b].remove();a[0].value=""}
function Ha(){O("loading");for(var a=document.getElementById("divPwd").hasAttribute("addroot"),b=document.getElementById("pwdKey").value,c=document.getElementById("divfKey").getElementsByTagName("input"),d=[],e=0;e<c.length;e++)for(var f=c[e].files,g=0;g<f.length;g++)d.push(f[g]);if(b||0<d.length){if(a){c=document.getElementById("pwdKeyRe").value;if((b||c)&&b!=c){B("diffPwd");return}if(!document.getElementById("txtRoot").value){B("noRoot");return}}var h=null;b&&(h=CryptoJS.enc.Utf8.parse(b));if(0<
d.length){e=0;var k=new FileReader,l=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA512,"zb12");k.g=function(){k.readAsArrayBuffer(d[e].slice(0,1023));e++};k.onload=function(u){l.update(new CryptoJS.lib.WordArray.init(u.target.result));e<d.length?k.g():(h?h.concat(l.finalize()):h=l.finalize(),h.clamp(),Ia(h,a))};k.g()}else Ia(h,a)}else B("noPwd")}
function Ia(a,b){var c=CryptoJS.HmacMD5(a,"zgayard").toString(CryptoJS.enc.Base64url).slice(0,8),d=null;if(b){var e={root:document.getElementById("txtRoot").value};document.getElementById("chkEncryFname").checked&&(e.encfname=!0);var f=!1;G.forEach(function(k){k.root==e.root&&(f=!0)});f?B("dupRoot"):(D.B("root",e.root),ta(a),d=CryptoJS.lib.WordArray.random(1024),I=v(d),e.iv=c.concat(Ja(!0,d,a)),H=G.length,G.push(e),Ka(e,!0),La())}else{var g=document.getElementById("selRoot").value,h=-1;G.forEach(function(k,
l){k.root==g&&(h=l)});0<=h&&G[h].iv&&c==G[h].iv.slice(0,c.length)?(H=h,D.B("root",g),ta(a),d=Ja(!1,G[H].iv.slice(c.length),a),I=v(d),Ma()):aa()?B("pwdError"):R()}}function Ja(a,b,c){c=v(c);var d=null;a?d=b:d=CryptoJS.enc.Base64url.parse(b);b=y(a,d,c);return a?b.toString(CryptoJS.enc.Base64url):b}function La(){var a=CryptoJS.enc.Utf8.parse(JSON.stringify(G));a=new Blob([new Uint8Array(ea(a))],{type:"application/octet-binary"});a=new ha({ea:a});var b=E.v({R:"_zgayard_.conf"});ja(a,b,Ma)}
function Aa(a){var b=new fa;ja(E.l({s:a}),b,function(){var c=new CryptoJS.lib.WordArray.init(b.i());c=JSON.parse(c.toString(CryptoJS.enc.Utf8));Array.isArray(c)?G=c:G.push(c);var d=-1,e=D.F("root"),f=document.getElementById("selRoot");f.innerHTML="";G.forEach(function(h,k){var l=!1;e&&h.root==e&&(l=!0);Ka(h,l,f);l&&(d=k)});if(0<=d){H=d;var g=D.F("key_words");g?ua(function(h){h&&h.lsauth&&!h.newkey?(h=y(!1,CryptoJS.enc.Base64url.parse(g),h.lsauth),Ia(h)):R()}):R()}else H=0,R()})}
function Ka(a,b,c){var d=c;c||(d=document.getElementById("selRoot"));c=document.createElement("option");c.value=a.root;c.innerText=a.root;b&&(c.selected=!0);d.appendChild(c)};function Na(a){if(G[H].encfname){var b=I;a=CryptoJS.enc.Utf8.parse(a);b=y(!0,a,b).toString(CryptoJS.enc.Base64url)}else b=a;return b}
function Oa(){D=new ka;D.Ba(function(a){a&&B("IndexedDB is not supported in your browser settings.");a=D.aa();a||(D.ba(),a=D.aa(!0));if(!a){a=navigator.language;var b=a.indexOf("-");0<b&&(a=a.substring(0,b))}xa(a);a=D.ya();b=document.getElementById("selDrive");var c=ca(),d;for(d in C){var e=document.createElement("option");e.value=d;e.innerText=C[d].A;a?a==d&&(e.selected=!0):C[d].Ea(c)&&(a=d,e.selected=!0);b.appendChild(e)}D.H()&&(document.getElementById("divSkipLogin").style.display="block",document.getElementById("divSaveKey").style.display=
"block",D.l&&(document.getElementById("chkSkipLogin").checked=!0),D.F("key_words")&&(document.getElementById("chkSaveKey").checked=!0));a?za(a):wa()})}function Ma(){Fa();Pa(function(){var a=G[H].root;E.u({m:function(b,c){b?404==b.G?E.J({na:a,m:function(d,e){d?B(JSON.stringify(d)):(M=[],M.push(e),T())}}):B(JSON.stringify(b)):(M=[],M.push(c),T())},o:a})})}
function Qa(a){var b=document.getElementById("spanQuota");"string"==typeof a&&(a=parseInt(a,10));var c=parseInt(b.getAttribute("total"),10),d=parseInt(b.getAttribute("trash"),10),e=0;b.hasAttribute("used")&&(e=parseInt(b.getAttribute("used"),10));e+=a;b.setAttribute("used",e);b.innerText=window.msgs.quotaInfo.replace("{0}",da(c-e-d))}function Pa(a){E.$({m:function(b,c){b?B(b):(b=document.getElementById("spanQuota"),b.setAttribute("total",c.La),b.setAttribute("trash",c.Ma),Qa(c.Oa),a&&a())}})}
function T(a,b,c){var d=0;if(!c){if(0>=M.length)return;d=M.length-1;c=M[d]}var e="#tblst";b&&(e="#tblFolder");e=p(e);var f=e.oa,g=e.D;g.innerHTML="";O("loading");e=f.getElementsByTagName("th")[0];var h=t(e,"a",!0);a?h&&h.classList.remove("fnormal"):(h&&(0==d?e.innerHTML="":h.classList.add("fnormal")),a=document.createElement("a"),h=document.createElement("span"),a.href="#",a.innerText=c.A,a.setAttribute("uid",c.s),a.setAttribute("idx",d),a.addEventListener("click",Ra),e.appendChild(a),h.innerText=
">",e.appendChild(h));E.aa({m:function(k,l){if(k)B(k);else{var u=[],J=0;l.forEach(function(w){var r=0,x=u.length;a:{var A=w.A;if(G[H].encfname)try{var K=I,S=CryptoJS.enc.Base64url.parse(A);var L=y(!1,S,K).toString(CryptoJS.enc.Utf8);break a}catch(V){console.error(V)}L=A}w.A=L;for(U(w)?x=J++:r=J;r<x&&!(w.A<u[r].A);)r++;r<u.length?u.splice(r,0,w):u.push(w)});u.forEach(function(w){b&&!U(w)||Sa(g,w,b)});b||(document.getElementById("divHeader").style.display="block",f.style.display="block",document.getElementById("divAction").style.display=
"block",k=document.getElementById("chkAll"),k.checked=!1,k.style.display=0<l.length?"":"none");O()}},Z:c.s})}
function Sa(a,b,c){var d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("a"),g=b.A;if(!c)var h=document.createElement("input"),k=document.createElement("span"),l=document.createElement("span");c||(h.type="checkbox",e.appendChild(h),U(b)?k.innerHTML="&#x1f4c1;":(h=Ta(g),k.innerHTML=qa[h]?"&#x1f5bc;":"&#x1f4c4;"),e.appendChild(k));f.innerText=g;f.href="#";f.setAttribute("uid",b.s);f.setAttribute("utype",b.ga);f.addEventListener("click",W);e.appendChild(f);c||(l.innerHTML=
"&#x1f4dd;",l.setAttribute("class","dropbtn"),l.addEventListener("click",Ua),e.appendChild(l));d.appendChild(e);c||(e=document.createElement("td"),e.innerText=da(b.Ka),e.setAttribute("class","right"),d.appendChild(e),c=e=document.createElement("td"),b=new Date(b.Fa),f=[],g=[],f.push(b.getFullYear()),f.push(b.getMonth()+1),f.push(b.getDate()),g.push("0".concat(b.getHours()).slice(-2)),g.push("0".concat(b.getMinutes()).slice(-2)),g.push("0".concat(b.getSeconds()).slice(-2)),c.innerText=f.join("-")+
" "+g.join(":"),d.appendChild(e));a.appendChild(d)}
function W(a,b){window.event.preventDefault();if(!a||a instanceof Event){b=m();if(U(b)){n(b,"TABLE").getAttribute("onlyfolder")?T(!1,!0,{s:b.getAttribute("uid"),A:b.innerText}):(M.push({s:b.getAttribute("uid"),A:b.innerText}),T());return}var c=p("#tblFileDetail").D;var d=p("#tblst").D.rows;var e=n(b,"TR").rowIndex-d[0].rowIndex}else{c=p("#tblFileDetail").D;d=p("#tblst").D.rows;e=c.rows[0].getAttribute("rowidx");if(1==a)if(0<e)e--;else{if(b)return;e=d.length-1}else if(e++,e>=d.length){if(b)return;
e=0}b=d[e].getElementsByTagName("a")[0];if(U(b)){c.rows[0].setAttribute("rowidx",e);W(a);return}}c.rows[0].cells[1].getElementsByTagName("span")[0].innerText=b.innerText;c.rows[0].setAttribute("uid",b.getAttribute("uid"));c.rows[0].setAttribute("rowidx",e);c.rows[1].cells[0].innerText=window.msgs.thSize+": "+d[e].cells[1].innerText;Va(b.getAttribute("uid"),b.innerText)}
function Ra(){window.event.preventDefault();var a=m(),b=n(a,"TABLE"),c=b.getElementsByTagName("th")[0];if(b.getAttribute("onlyfolder")){b=0;for(var d=a.nextElementSibling;d;)d.tagName==a.tagName&&b++,d=d.nextElementSibling;if(0<b)for(d=0;d<b;d++)c.removeChild(c.lastElementChild),c.removeChild(c.lastElementChild);T(!0,!0,{A:a.innerText,s:a.getAttribute("uid")})}else a=parseInt(a.getAttribute("idx"),10),a<M.length-1&&M.splice(a+1).forEach(function(){c.removeChild(c.lastElementChild);c.removeChild(c.lastElementChild)}),
T(!0)}function U(a){return"1"==(a instanceof HTMLElement?a.getAttribute("utype"):"string"==typeof a?a:a.ga)}function Ta(a){var b=a.lastIndexOf("."),c="";0<=b&&(c=a.slice(b+1));return c.toLowerCase()}function Wa(){for(var a=m().checked,b=p("#tblst").D.getElementsByTagName("input"),c=0;c<b.length;c++)"checkbox"==b[c].type&&(b[c].checked=a)}
function Xa(a){var b=document.getElementById("divGround");1==a?(b.style.backgroundColor="transparent",document.getElementById("tblFileDetail").parentElement.style.display="none"):(b.style.backgroundColor="",document.getElementById("tblFileDetail").parentElement.style.display="",2==a?(document.getElementById("spanGroundTitle").innerText=window.msgs.gtlFDetail,document.getElementById("tblFileDetail").style.display=""):document.getElementById("tblFileDetail").style.display="none",3==a?(document.getElementById("spanGroundTitle").innerText=
window.msgs.gtlMoveto,a=document.getElementById("tblFolder"),a.getElementsByTagName("th")[0].innerHTML=null,a.style.display=""):document.getElementById("tblFolder").style.display="none");b.style.display="table"}
function Ua(){var a=m(),b=p("#tblst").D.rows;b=n(a,"TR").rowIndex-b[0].rowIndex;var c=document.getElementById("divItemenu");a=a.getBoundingClientRect();c.style.left=a.right+"px";c.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+a.top+"px";c.style.display="block";c.setAttribute("rowidx",b);Xa(1)}
function Ya(){var a=m(),b=n(a,"DIV"),c=document.getElementById("divItemenu");var d=p("#tblst").D.rows;c=parseInt(c.getAttribute("rowidx"),10);d=d[c].getElementsByTagName("a")[0];b.style.display="";switch(a.getAttribute("wordid")){case "btnDownload":U(d)?B("noDownFolder"):(b.setAttribute("uid",d.getAttribute("uid")),b.setAttribute("uname",d.innerText),Za(2));Y();break;case "btnRename":a=document.getElementById("divNewName");b=a.getElementsByTagName("input")[0];c=d.getBoundingClientRect();b.value=d.innerText;
a.style.left=c.left+"px";a.style.top=c.top-2+"px";b.style.width=c.width+"px";b.style.height=c.height+"px";a.style.display="block";break;case "btnMove":$a(d.getAttribute("uid"));break;case "btnDelete":ab(d.getAttribute("uid")),Y()}}function $a(a){if("string"==typeof a)document.getElementById("tblFolder").setAttribute("uid",a);else if(Z())document.getElementById("tblFolder").removeAttribute("uid");else return;Xa(3);T(!1,!0,M[0])}
function bb(){var a=window.event;if(13===a.keyCode){if(a.shiftKey||a.ctrlKey||a.altKey)return!0}else return!0;cb();return!1}
function cb(){var a=m();"INPUT"!=a.tagName&&(a=t(a,"INPUT"));if(a.value){var b=document.getElementById("divItemenu"),c=p("#tblst").D.rows;b=parseInt(b.getAttribute("rowidx"),10);var d=c[b].getElementsByTagName("a")[0];a.value!=d.innerText&&(c=Na(a.value),c={m:function(e){e?B(e.I):(d.innerText=a.value,P("renDone"))},P:d.getAttribute("uid"),ua:c},E.ca(c));Y()}else B("noNewName")}
function db(){Y();var a=document.getElementById("tblFolder"),b=t(a.getElementsByTagName("th")[0],"a",!0).getAttribute("uid");if(b!=M[M.length-1].s){var c=null;(a=a.getAttribute("uid"))?(c=[],c.push({s:a,A:""})):c=Z();if(c){O("moving");var d=0,e={m:function(f){f?B(f.I):(d++,d<c.length?(e.P=c[d].s,E.C(e)):(T(!0),P("moveDone")))},P:c[d].s,X:b};E.C(e)}}}
function ab(a){var b=null;"string"==typeof a?(b=[],b.push({s:a,A:""})):b=Z();if(b&&confirm(window.msgs.delConfirm)){O("deleting");var c=0,d={m:function(e){e?B(e.I):(c++,c<b.length?(d.P=b[c].s,E.delete(d)):(T(!0),P("delDone")))},P:b[c].s};E.delete(d)}}function eb(){var a=document.getElementById("txtName").value;if(a){var b={m:function(c,d){c?B(c.I):(d.A=a,Sa(p("#tblst").D,d),P("flDone"))},na:Na(a)};0<M.length&&(b.X=M[M.length-1].s);E.J(b)}else B("noFldName")}
function fb(a){O();var b=null;b=(a=1===a)?document.getElementById("upfolder").files:document.getElementById("upfiles").files;if(0>=b.length)B("noFiles");else{var c=p("#tblQueue"),d=c.oa,e=c.D;e.innerHTML="";d.getElementsByTagName("th")[0].innerText=window.msgs.updQueue;d.style.display="block";var f=[];for(c=0;c<b.length;c++){d=document.createElement("tr");var g=document.createElement("td"),h=document.createElement("span"),k=document.createElement("input"),l="";l=b[c].webkitRelativePath?b[c].webkitRelativePath:
b[c].name;f.push({Da:l,Ca:b[c]});g.innerText=l;d.appendChild(g);g=document.createElement("td");h.innerText=window.msgs.waiting;g.appendChild(h);d.appendChild(g);g=document.createElement("td");k.type="button";k.value=window.msgs.btnCancel;k.style.display="none";k.addEventListener("click",gb);g.appendChild(k);d.appendChild(g);e.appendChild(d)}var u="",J="",w=function(r){for(var x=f[r].Da.split("/"),A=0;A<x.length;A++)x[A]=Na(x[A]);var K=e.rows[r].getElementsByTagName("span")[0],S=e.rows[r].getElementsByTagName("input")[0];
K.innerText="-";S.style.display="";var L=new ha({ea:f[r].Ca,U:16E5});A={R:x[0],ta:J};1<x.length&&(A.R=x.join("/"),A.ma=u);var V=E.v(A),X=new z({S:I,Y:L,ka:V});X.v=function(){K.innerText=X.F()+" "+Math.round(100*L.v()/L.h())+"%";return S.getAttribute("canceled")?!1:!0};X.L=function(F,jb){S.style.display="none";if(F)K.innerText=F.message||F.Ra;else if(jb){for(F=r;F<f.length;F++)e.rows[F].getElementsByTagName("span")[0].innerText=window.msgs.updCanceled;0<r&&T(!0)}else K.innerText=window.msgs.upDone,
Qa(V.v()),r++,r<f.length?w(r):T(!0)};X.start()};a?E.u({Z:M[M.length-1].s,m:function(r,x){u=x.Ha.concat("/").concat(x.A);J=x.s;w(0)}}):(J=M[M.length-1].s,w(0))}}function gb(){m().setAttribute("canceled","1")}function Z(a){for(var b=[],c=p("#tblst").D.getElementsByTagName("input"),d=0;d<c.length;d++){var e=c[d];if("checkbox"==e.type&&e.checked){e=q(e,"a");if(a&&U(e))return B("noDownFolder"),null;b.push({A:e.innerText,s:e.getAttribute("uid")})}}return 0>=b.length?(B("noChecks"),null):b}
function Za(a){O();var b=[];switch(a){case 1:a=p("#tblFileDetail").D.rows[0];b.push({A:a.getElementsByTagName("span")[0].innerText,s:a.getAttribute("uid")});break;case 2:a=document.getElementById("divItemenu");b.push({A:a.getAttribute("uname"),s:a.getAttribute("uid")});break;default:if(b=Z(!0),!b)return}a=p("#tblQueue");var c=a.oa;a=a.D;a.innerHTML="";c.getElementsByTagName("th")[0].innerText=window.msgs.downQueue;c.style.display="block";for(c=0;c<b.length;c++){var d=document.createElement("tr"),
e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("input");e.innerText=b[c].A;d.appendChild(e);e=document.createElement("td");f.innerText=window.msgs.waiting;e.appendChild(f);d.appendChild(e);e=document.createElement("td");g.type="button";g.value=window.msgs.btnCancel;g.style.display="none";g.addEventListener("click",gb);e.appendChild(g);d.appendChild(e);a.appendChild(d)}hb(b,0,a)}
function hb(a,b,c){var d=a[b].A,e=c.rows[b].getElementsByTagName("span")[0],f=c.rows[b].getElementsByTagName("input")[0];e.innerText="-";f.style.display="";var g=E.l({s:a[b].s,U:16E5}),h=new fa({sa:document.getElementById("download")}),k=new z({la:!0,S:I,Y:g,ka:h});k.v=function(){e.innerText=k.F()+" "+Math.round(100*g.v()/g.h())+"%";return f.getAttribute("canceled")?!1:!0};k.L=function(l,u){f.style.display="none";if(l)e.innerText=l.message||l.Ra;else if(u)for(l=b;l<a.length;l++)c.rows[l].getElementsByTagName("span")[0].innerText=
window.msgs.downCanceled;else e.innerText=window.msgs.downDone,h.download(d),b++,b<a.length&&hb(a,b,c)};k.start()}
function Va(a,b){var c=p("#tblFileDetail").D;Xa(2);var d=Ta(b),e=c.rows[0].cells[1].getElementsByTagName("span")[0],f=c.rows[0].cells[1].getElementsByTagName("img")[0],g=qa[d];d=ra[d];e.style.display="";f.style.display="none";f.src="";var h=ib(c);c.rows[1].style.display="";c.rows[2].style.display="";if(d)kb(h,a),h.style.display="",e.style.display="none",c.rows[1].style.display="none",c.rows[2].style.display="none";else if(g){var k=new fa;a=new z({la:!0,S:I,Y:E.l({s:a,U:16E4}),ka:k});a.L=function(l,
u){l||u?console.log(l||u):(l=k.i(),l instanceof Uint8Array||(l=new Uint8Array(l)),g&&(f.src=window.URL.createObjectURL(new Blob([l],{type:g})),f.title=b,f.style.display="",e.style.display="none",c.rows[1].style.display="none",c.rows[2].style.display="none"))};a.start()}}function lb(){var a=m();a&&a.src&&window.URL.revokeObjectURL(a.src)}function kb(a,b){b=E.l({s:b});const c=zb_require("videostream");a.h=new ia({la:!0,S:I,Y:b});a.g=new c(a.h,a)}
function Y(){document.getElementById("divGround").style.display="";ib();document.getElementById("divItemenu").style.display="";document.getElementById("divNewName").style.display=""}function ib(a){a||(a=p("#tblFileDetail").D);a=a.rows[0].cells[1].getElementsByTagName("video")[0];a.style.display="none";a.g&&(a.g.destroy(),a.h.va(),delete a.g,delete a.h);return a};window.addEventListener("load",function(){window.addEventListener("scroll",function(){document.getElementById("divGround").style.top=(document.documentElement.scrollTop||document.body.scrollTop)+"px"});document.getElementById("spanNotify").style.display="none";RegExp("android","i").test(navigator.userAgent)||(document.getElementById("spanMoreKey").style.display="none",document.getElementById("spanClearKey").style.display="none");document.getElementById("tblFileDetail").getElementsByTagName("video")[0].addEventListener("ended",
function(){W(2,!0)});var a=0,b=document.getElementById("spanAddRoot");b.addEventListener("click",Da);var c=document.getElementById("divSet").getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnLogout":b.addEventListener("click",va);break;case "btnCancel":b.addEventListener("click",Ca);break;case "btnOk":b.addEventListener("click",Ba)}document.getElementById("spanMoreKey").addEventListener("click",Ga);document.getElementById("spanClearKey").addEventListener("click",
Ea);c=document.getElementById("divPwd").getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnCancel":b.addEventListener("click",Fa);break;case "btnOk":b.addEventListener("click",Ha)}c=document.getElementById("divHeader").getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnSet":b.addEventListener("click",wa)}document.getElementById("chkAll").addEventListener("click",Wa);c=document.getElementById("divAction").getElementsByTagName("input");
for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnDownfs":b.addEventListener("click",Za);break;case "btnMovefs":b.addEventListener("click",$a);break;case "btnDelfs":b.addEventListener("click",ab);break;case "btnNewFldr":b.addEventListener("click",eb);break;case "btnUpfs":b.addEventListener("click",fb);break;case "btnUpfld":b.addEventListener("click",function(){fb(1)})}document.getElementById("divItemenu").addEventListener("click",Ya);b=document.getElementById("divNewName");b.getElementsByTagName("input")[0].addEventListener("keypress",
bb);b.getElementsByTagName("span")[0].addEventListener("click",cb);b=document.getElementById("divGround").firstElementChild;b.addEventListener("click",Y);b.firstElementChild.addEventListener("click",function(d){d.stopPropagation()});b=q(document.getElementById("spanGroundTitle"),"label");b.addEventListener("click",Y);a=document.getElementById("tblFileDetail").getElementsByTagName("tbody")[0].rows;b=a[0];b.cells[0].addEventListener("click",function(){W(1)});b.cells[2].addEventListener("click",function(){W(2)});
b.getElementsByTagName("img")[0].addEventListener("load",lb);c=a[2].getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnDownload":b.addEventListener("click",function(){Za(1)})}c=document.getElementById("tblFolder").getElementsByTagName("input");for(a=0;a<c.length;a++)switch(b=c[a],b.getAttribute("wordid")){case "btnOk":b.addEventListener("click",db)}Oa()});
