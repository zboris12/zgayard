function n(a){var b=null;if(a)if("string"==typeof a)switch(a.charAt(0)){case "#":b=document.getElementById(a.slice(1))}else a instanceof Event?b=a.srcElement||a.target:b=a;else b=window.event.srcElement||window.event.target;return b}function p(a,b){return(a=a.parentElement)?a.tagName==b?a:p(a,b):null}function aa(){var a=document.getElementById("divPwd");return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function ba(a){if(a=n(a))a.style.display="none"}
function q(a){a=n(a);if(a){var b=a.getElementsByTagName("tbody")[0];return{Z:a,F:b}}return null}function r(a,b){if((a=a.nextElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.nextElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.nextElementSibling}return a}
function t(a,b,d){if((a=d?a.lastElementChild:a.previousElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.previousElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.previousElementSibling}return a}function ca(a,b,d){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,b);else if(d)d.download=b,d.href=window.URL.createObjectURL(a),d.click();else throw Error("Element for download is not specified.");}
function da(a){if(!a)return null;var b=a.charAt(0);if("?"==b||"#"==b)a=a.substring(1);var d={};a.split("&").forEach(function(c){var e=c.indexOf("=");0>e?d[decodeURIComponent(c)]="":d[decodeURIComponent(c.substring(0,e))]=decodeURIComponent(c.substring(e+1))});return d}function ea(){var a=da(window.location.search),b=da(window.location.hash);b&&(a=a?Object.assign(a,b):b);return a}
function w(a){if(1024>a)var b="B";else 1048576>a?(b="KB",a=Math.round(a/102.4)/10):1073741824>a?(b="MB",a=Math.round(a/104857.6)/10):(b="GB",a=Math.round(a/1.073741824E8)/10);var d=a.toString();a=d.indexOf(".");var c=d.split(""),e=[];0<=a?e.push(d.slice(a)):a=c.length;for(d=0;0<a;)3==d++&&(e.unshift(","),d=1),e.unshift(c[--a]);return e.join("").concat(b)};function x(a){var b=CryptoJS.MD5(a);a=CryptoJS.kdf.OpenSSL.execute(a,8,4,b);a.iv.clamp();a.key.clamp();return a}
function y(a,b,d){var c=d;"string"==typeof d&&(c=x(d));if(!(c&&c.iv&&c.key))throw Error("Need iv and key. They can be generated by CryptoJS.kdf.OpenSSL.execute from password and salt.");d={mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};Object.assign(d,c);a=a?CryptoJS.algo.AES.createEncryptor(d.key,d):CryptoJS.algo.AES.createDecryptor(d.key,d);b=a.process(b);b.concat(a.finalize());b.clamp();return b}
function fa(a,b){a=CryptoJS.enc.Utf8.parse(a);return y(!0,a,b).toString(CryptoJS.enc.Base64url)}function z(a){var b=Array(a.sigBytes);a=a.words;for(var d=0,c=0;c<a.length;c++){for(var e=a[c],f=d+4-1;f>=d;f--)f<b.length&&(b[f]=e&255),e>>=8;d+=4;if(d>=b.length)break}return b}
function C(){this.h=0;this.g=null;this.i=function(a,b){this.h=a;b&&b()};this.write=function(a,b){Array.isArray(a)?this.g=this.g?this.g.concat(a):a.concat():(this.g||(this.g=[]),this.g.push(a));b&&b()};this.cancel=function(a){a&&a(!1,!0)};this.j=function(){if(this.g&&0<this.g.length&&(this.g[0]instanceof ArrayBuffer||this.g[0]instanceof Uint8Array)){for(var a=0,b=0;b<this.g.length;b++)a+=this.g[b].byteLength;a=new Uint8Array(a);var d=0;for(b=0;b<this.g.length;++b){var c=this.g[b];c instanceof ArrayBuffer&&
(c=new Uint8Array(c));a.set(c,d);d+=c.byteLength}return a}return this.g};this.l=function(){var a=this.j();a instanceof Uint8Array||(a=new Uint8Array(a));return new Blob([a],{type:"application/octet-binary"})};this.download=function(a){var b=this.l();ca(b,a,null)};this.C=function(){return this.h}}
function ha(a){this.l=null;if(a._blob)if(a._blob instanceof Blob)this.l=a._blob;else throw Error("blob is not a Blob.");else throw Error("blob must be specified.");this.D=1600;a.U&&(this.D=a.U);this.g=0;this.s=this.j=null;this.G=function(b,d){if(b){if(b>=this.h())throw Error("offset can not be bigger than input size.");this.g=b}this.j=new FileReader;this.j.onload=function(c){c=c.target.result;this.s&&this.s(c,this)}.bind(this);d&&d()};this.A=function(){return this.g};this.h=function(){return this.l.size};
this.C=function(){return this.g>=this.h()};this.i=function(b){if(1!=this.j.readyState){var d=this.g;this.g=b?this.g+b:this.g+this.D;this.j.readAsArrayBuffer(this.l.slice(d,this.g))}};this.M=function(){this.l=this.j=null}}
function D(a,b){if(!a.pa)if(this.getSuperClass&&"Readable"==this.getSuperClass().name)this.super(b),this.h=1,b&&b.objectMode&&(this.M=!0);else throw Error("writer must be specified in no stream mode.");this.l=this.G=null;this.C=!0;this.g=null;this.j=a.pa;this.iv=this.key=null;this.i=0;this.A=null;this.D=this.s=0;this.speed="0B/s";a.la&&(this.C=!1);if(a.fa)this.g=a.fa;else throw Error("reader must be specified.");if(a.V)b=null,b="string"==typeof a.V?x(a.V):a.V,this.key=b.key,this.iv=b.iv;else throw Error("keycfg must be specified.");
this.start=function(d){if(d){if(this.C)throw Error("Can NOT set offset for encryption.");this.i=d;d-=d%16+16;0>d&&(d=0)}this.g.s=this.K.bind(this);this.g.G(d,function(){var c=16*Math.ceil((this.g.h()+1)/16);this.h||!this.j?this.I():this.j.i(c,this.I.bind(this))}.bind(this))};this.L=function(){Date.now()>this.s&&(this.speed=w(1E3*(this.g.A()-this.D)/(Date.now()-this.s+1E3))+"/s",this.s=Date.now()+1E3,this.D=this.g.A());return this.speed};this._read=function(d){1==this.h?this.h=2:3==this.h&&(this.g.C()?
this.push(null):this.g.i(d))};this.push=function(d){return this.readable?(d&&!this.M?this.superCall("push",new Uint8Array(d)):this.superCall("push",d),!0):!1};this.I=function(){this.s=Date.now()+1E3;(this.D=this.i)?this.g.i(16):1==this.h?this.h=3:2==this.h?(this.h=3,this.push([])):this.g.i()};this.K=function(d){try{var c=new CryptoJS.lib.WordArray.init(d);if(!this.A){var e={iv:this.iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};this.i&&(e.iv=c,c=null);this.A=this.C?CryptoJS.algo.AES.createEncryptor(this.key,
e):CryptoJS.algo.AES.createDecryptor(this.key,e)}if(c){var f=z(this.A.process(c));this.g.C()&&(f=f.concat(z(this.A.finalize())));if(this.i<this.g.A()){var g=this.i-(this.g.A()-d.byteLength);0<g&&(f=f.slice(g))}else f=null;this.h?this.push(f):f?this.j&&this.j.write(f,function(){this.g.C()?this.qa():this.G?this.G()?this.g.i():this.j.cancel(function(h,k){this.qa(h,k)}.bind(this)):this.g.i()}.bind(this)):this.g.i();f=null}else this.h?2==this.h?(this.h=3,this.push([])):this.h=3:this.g.i()}catch(h){if(this.h)throw h;
this.qa(h)}};this.qa=function(d,c){this.g&&(this.g.M(),this.g=null);this.l&&(d?this.l(d):this.l(!1,c))}}function ia(a){const b=zb_require("readable-stream");D.super_!==b.Readable&&zb_inherits(D,b.Readable);this.h={highWaterMark:8E5};Object.assign(this.h,void 0);this.info=a;this.g=null;this.createReadStream=function(d){this.va();this.g=new D(this.info,this.h);var c=0;d&&d.start&&(c=d.start);this.g.start(c);return this.g};this.va=function(){this.g&&(this.g.destroy(),this.g=null)}}
function ja(a,b,d){a.s=function(c){b.write(c,function(){a.C()?d&&d():a.i()})};a.G(0,function(){b.i(a.h(),function(){a.i()})})};function ka(){this.h=!0;this.i=this.m=null;this.l=this.C=!1;this.I=function(){return null!=this.m};this.P=function(a){if(this.h)try{var b=window.sessionStorage.getItem("language"),d=window.sessionStorage.getItem("drive"),c=window.sessionStorage.getItem("skipLogin");window.sessionStorage.clear();b&&window.sessionStorage.setItem("language",b);d&&!a&&window.sessionStorage.setItem("drive",d);c&&!a&&window.sessionStorage.setItem("skipLogin",c)}catch(e){this.h=!1,console.error(e)}};this.A=function(a){var b=
null;if(this.h)try{b=window.sessionStorage.getItem(a)}catch(d){this.h=!1,console.error(d)}return b};this.M=function(a){var b=this.A("login_state");return b&&a==b?!0:!1};this.j=function(a,b){if(this.h)try{return window.sessionStorage.setItem(a,b.toString()),!0}catch(d){this.h=!1,console.error(d)}return!1};this.K=function(a){if(this.h)try{window.sessionStorage.removeItem(a)}catch(b){this.h=!1,console.error(b)}};this.aa=function(){var a=this.A("language"),b=this.A("drive"),d=this.A("skipLogin");this.i=
{};a&&(this.i.language=a,this.L(a));b&&(this.i.T=b,this.ca(b));d&&this.da(d)};this.ia=function(){var a=this.g("drive");a||(this.i||this.aa(),a=this.i.T);return a};this.ca=function(a){this.j("drive",a);return this.m?this.m.drive!=a?(this.m.drive=a,this.m[a]||(this.m[a]={}),this.C=!0):!1:!0};this.da=function(a){a?this.l=this.I():(this.l=!1,this.za()&&(this.C=!0));this.j("skipLogin",this.l)};this.$=function(a){var b=this.g("language");!b&&a&&this.i&&(b=this.i.language);return b};this.L=function(a){this.j("language",
a);this.m&&this.m.language!=a&&(this.m.language=a,this.C=!0)};this.Ba=function(a){if(window.indexedDB){var b=window.indexedDB.open("zgayard1946");b.onerror=function(){if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};b.onupgradeneeded=function(d){d.target.result.createObjectStore("settings",{keyPath:"key"})};b.onsuccess=function(d){var c=d.target.result;d=c.transaction("settings","readwrite");d.oncomplete=function(){c.close();
a&&a()};d.objectStore("settings").getAll().onsuccess=function(e){this.m={};e.target.result.forEach(function(f){this.m[f.key]=f.value}.bind(this));this.l=(e=this.m.drive)&&this.m[e]&&this.m[e].refresh_token?!0:!1}.bind(this)}.bind(this)}else if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};this.ba=function(){this.C&&this.m&&(this.G(function(a){a.clear().onsuccess=function(){for(var b in this.m)a.put({key:b,value:this.m[b]})}.bind(this)}.bind(this)),
this.C=!1)};this.s=function(a){var b=this.g("drive");return b&&(b=this.m[b])?b[a]:null};this.za=function(){var a=this.g("drive");return a&&(a=this.m[a])&&a.refresh_token?(delete a.refresh_token,!0):!1};this.D=function(a,b,d){if(this.m){var c=this.g("drive");if(b)this.m[c]||(this.m[c]={}),this.m[c][a]=b;else if(this.m[c])delete this.m[c][a];else{d&&d instanceof Function&&d();return}d?(a=void 0,d instanceof Function&&(a=d),this.G(function(e){e.put({key:c,value:this.m[c]})}.bind(this),a)):this.C=!0}else d&&
d instanceof Function&&d()};this.ya=function(a){this.P(!0);if(this.m){var b=this.g("drive");delete this.m[b].refresh_token;delete this.m.drive;this.G(function(d){d.put({key:b,value:this.m[b]});d.delete("drive")}.bind(this),a)}else a&&a()};this.Ca=function(a,b){this.ka({drive:this.g("drive"),root:this.s("root"),fid:a,time:b})};this.Aa=function(){var a=this.g("recent");return a&&a.drive==this.g("drive")&&a.root==this.s("root")?a:null};this.G=function(a,b){window.indexedDB.open("zgayard1946").onsuccess=
function(d){var c=d.target.result;d=c.transaction("settings","readwrite");d.oncomplete=function(){c.close();b&&b()};d=d.objectStore("settings");a&&a(d)}};this.g=function(a){return this.m&&this.m[a]?this.m[a]:null};this.ka=function(a){this.m&&(this.m.recent=a);this.G(function(b){b.put({key:"recent",value:a})}.bind(this),void 0)}};function la(a,b,d){this.L=d;this.D=b;this.h=null;this.g=a;this.aa=function(){return E};this.i=function(c){var e="POST",f="https://graph.microsoft.com/v1.0".concat(encodeURI(c.v)),g=new XMLHttpRequest;c&&c.O&&(e=c.O);g.open(e,f,!0);c&&c.N?g.setRequestHeader("Authorization",c.N):c&&c.ga?(e="Bearer",c&&c.ha&&(e=c.ha),g.setRequestHeader("Authorization",e+" "+c.ga)):g.setRequestHeader("Authorization",this.h);if(c&&c.X)for(var h in c.X)g.setRequestHeader(h,c.X[h]);c&&c.o&&(g.onload=function(k){k=k.target;
4==k.readyState&&(401==k.status&&this.g.l&&!c.Ia?this.ka(c):c.o({H:k.status,J:k.responseText}))}.bind(this));g.send(c.ea)};this.ba=function(){return this.h?this.h:""};this.I=function(c){if(c&&(this.h=this.g.A("access_token")))return null;c=this.g.l;var e={},f=ea();if(f&&f.token_type&&f.access_token){this.M(f.token_type,f.access_token);if(f&&f.state)if(this.g.M(f.state))this.g.K("login_state");else return"Unauthorized access to this url.";return null}f&&f.code?e.code=f.code:c&&(e.sa=this.g.s("refresh_token"));
if(e.code||e.sa){if(f&&f.state)if(this.g.M(f.state))this.g.K("login_state");else return"Unauthorized access to this url.";if((f=this.G(e))&&f.token_type&&f.access_token)this.M(f.token_type,f.access_token),c&&e.code&&f.refresh_token&&this.g.D("refresh_token",f.refresh_token),f.logout&&this.g.j("logout_url",f.logout);else return f&&f.error?"["+f.error+"] "+f.error_description:"Unknown error occured when doing authorization."}else if(c&&(e.xa=!0),(f=this.G(e))&&f.url)f.state&&(this.g.j("login_state",
f.state)||(f.state=E)),f.logout&&this.g.j("logout_url",f.logout),window.location.href=f.url.concat("&state=".concat(encodeURIComponent(f.state)));else return f&&f.error?"["+f.error+"] "+f.error_description:"Unknown error occured when doing authorization.";return null};this.da=function(){this.h=null;this.g.K("access_token");var c=this.g.A("logout_url");if(c)window.location.href=c;else{c=new FormData;c.append("drive_type","onedrive");c.append("action","logout");var e=new XMLHttpRequest;e.open("POST",
this.D,!0);e.withCredentials=!0;e.onload=function(f){f=f.target;4==f.readyState&&200==f.status&&(f=JSON.parse(f.responseText))&&f.logout&&(window.location.href=f.logout)};e.send(c)}};this.$=function(c){var e={O:"GET",v:"/me/drive",o:function(f){var g=null,h=!1;200==f.H?(f=JSON.parse(f.J).quota,g={Ka:f.deleted,Ja:f.total,Ma:f.used}):h=f;c&&c.o?c.o(h,g):h&&console.error(JSON.stringify(h))}.bind(this)};this.j(c,e);this.i(e)};this.l=function(c){var e={v:"",O:"GET",o:function(f){var g=null,h=!1;200==f.H?
g=this.ra(JSON.parse(f.J)):h=f;c&&c.o?c.o(h,g):h&&alert(JSON.stringify(h))}.bind(this)};if(c&&c.v)e.v="/me/drive/root:/"+c.v;else if(c&&c.W)e.v="/me/drive/items/"+c.W;else throw Error("No path nor id is specified.");this.j(c,e);this.i(e)};this.ca=function(c){var e={v:"/me/drive/root/children",O:"GET",o:function(f){var g=[],h=!1;200==f.H?JSON.parse(f.J).value.forEach(function(k){g.push(this.ra(k))},this):h=f;c&&c.o?c.o(h,g):h&&alert(JSON.stringify(h))}.bind(this)};c&&(c.La?e.v="/me/drive/root:/"+c.La+
":/children":c.W&&(e.v="/me/drive/items/"+c.W+"/children"),this.j(c,e));this.i(e)};this.K=function(c){if(!c||!c.na)throw Error("Name of new folder is not specified.");var e={X:{"Content-Type":"application/json;charset=UTF-8"},v:"/me/drive/root/children",O:"POST",o:function(f){var g=null,h=!1;201==f.H?g=this.ra(JSON.parse(f.J)):h=f;if(c&&c.o)c.o(h,g);else if(h)throw Error(JSON.stringify(h));}.bind(this)};c.Ha?e.v="/me/drive/root:/"+c.Ha+":/children":c.Y&&(e.v="/me/drive/items/"+c.Y+"/children");this.j(c,
e);e.ea=JSON.stringify({name:c.na,folder:{},"@microsoft.graph.conflictBehavior":"fail"});this.i(e)};this.ia=function(c){this.P(c)};this.C=function(c){this.P(c)};this.delete=function(c){if(!c||!c.R)throw Error("fid is not specified.");var e={v:"/me/drive/items/".concat(c.R),O:"DELETE",o:function(f){var g=!1;204!=f.H&&(g=f);if(c&&c.o)c.o(g);else if(g)throw Error(JSON.stringify(g));}.bind(this)};this.j(c,e);this.i(e)};this.A=function(c){return new ma(c,this)};this.s=function(c){return new na(c,this)};
this.ka=function(c){console.log("Retry to send ajax.");c&&(c.Ia=!0,this.I(),c.N=this.h,this.i(c))};this.ra=function(c){var e={u:c.id,B:c.name,_size:c.size,Fa:c.lastModifiedDateTime,oa:c.parentReference.path,_type:"0"};c.folder?e._type="1":c.file&&(e._type="2");return e};this.M=function(c,e){this.h=c+" "+e;this.g.j("access_token",this.h)};this.G=function(c){if(!c)throw Error("Options are not specifed when auth onedrive.");var e=new FormData;e.append("drive_type","onedrive");c.clientId&&e.append("client_id",
c.clientId);c.Pa&&e.append("redirect_uri",c.Pa);c.Na&&e.append("client_secret",c.Na);c.code?e.append("code",c.code):c.sa?e.append("refresh_token",c.sa):c.xa&&e.append("need_code",c.xa);c=null;var f=new XMLHttpRequest;f.open("POST",this.D,!1);f.withCredentials=!0;f.send(e);if(4==f.readyState)if(200==f.status)c=JSON.parse(f.responseText);else throw Error(f.responseText+" ("+f.status+")");return c};this.P=function(c){if(!c||!c.R)throw Error("fid is not specified.");var e={X:{"Content-Type":"application/json;charset=UTF-8"},
v:"/me/drive/items/".concat(c.R),O:"PATCH",o:function(g){var h=!1;200!=g.H&&(h=g);if(c&&c.o)c.o(h);else if(h)throw Error(JSON.stringify(h));}.bind(this)};this.j(c,e);var f={};c.ua&&(f.name=c.ua);c.Y&&(f.parentReference={id:c.Y});e.ea=JSON.stringify(f);if("{}"==e.ea)throw Error("No property to be updated.");this.i(e)};this.j=function(c,e){c.ha&&(e.ha=c.ha);c.ga&&(e.ga=c.ga);c.N&&(e.N=c.N)}}
function ma(a,b){this.T=b;this.g=a;this.A="";this.h=this.s=0;if(!this.g||!this.g.S)throw Error("fnm is not specified.");this.i=function(d,c){this.s=d;d={v:"/me",O:"POST",N:this.g.N,X:{"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache",Pragma:"no-cache"},o:function(g){200<=g.H&&299>=g.H?(this.A=JSON.parse(g.J).uploadUrl,c&&c(g)):(console.error(g),alert(JSON.stringify(g)))}.bind(this)};this.g.ta?d.v="/me/drive/items/"+this.g.ta+":/":this.g.ma?(this.g.ma.startsWith("/drive/root:")||
(d.v+="/drive/root:/"),d.v+=this.g.ma.concat("/")):d.v+="/drive/root:/";d.v+=this.g.S;d.v+=":/createUploadSession";var e={"@microsoft.graph.conflictBehavior":"replace"},f=this.g.S.lastIndexOf("/");e.name=0<=f?this.g.S.slice(f+1):this.g.S;d.ea=JSON.stringify({item:e});this.T.i(d)};this.write=function(d,c){var e=new Blob([new Uint8Array(d)],{type:"application/octet-binary"}),f="bytes "+this.h+"-";this.h+=e.size;f+=this.h-1+"/"+this.s;var g=0,h=function(){var k=new XMLHttpRequest;k.open("PUT",this.A,
!0);k.setRequestHeader("Content-Range",f);k.onload=function(l){e=d=null;l=l.target;4==l.readyState&&(200<=l.status&&299>=l.status?c&&c(l.responseText):alert(l.responseText+" ("+l.status+")"))}.bind(this);k.onerror=function(){1>g?(g++,setTimeout(function(){h()},500)):e=d=null};k.send(e)}.bind(this);h()};this.cancel=function(d){var c=new XMLHttpRequest;c.open("DELETE",this.A,!0);c.onload=function(e){e=e.target;if(4==e.readyState){var f={H:e.status,J:e.responseText};200<=e.status&&299>=e.status?d&&d(!1,
f):(console.log(e.responseText+" ("+e.status+")"),d&&d(f))}}.bind(this);c.send()};this.C=function(){return this.s}}
function na(a,b){this.T=b;this.L=a;this.url="";this.name=null;this.D=this.j=this.g=this.size=0;this.P=!1;this.K=16E3;a.U&&(this.K=a.U);this.l=0;this.s=null;this.G=function(d,c){if(this.P){this.j&&(this.D=this.j,this.j=0);if(d){if(d>=this.h())throw console.log("offset:"+d+",size:"+this.h()),Error("offset can not be bigger than input size.");this.g=d}else this.g=0;c&&c()}else this.T.i({v:"/me/drive/items/"+this.L.u,O:"GET",N:this.L.N,o:function(e){this.P=!0;if(200!=e.H)throw Error(e.J+" ("+e.H+")");
e=JSON.parse(e.J);this.size=e.size;if(d){if(d>=this.h())throw Error("offset can not be bigger than input size.");this.g=d}this.url=e["@microsoft.graph.downloadUrl"];this.name=e.name;c&&c()}.bind(this)})};this.A=function(){return this.g};this.h=function(){return this.size};this.C=function(){return this.g>=this.h()};this.i=function(d){d||(d=this.K);this.I(d)};this.M=function(){};this.I=function(d){if(!d||!this.j){if(d)this.j=d;else if(this.j)d=this.j;else throw Error("size must be specified.");if(!this.D){var c=
this.g+d-1,e=function(){var f=new XMLHttpRequest;10<=this.l?(f.open("GET",this.T.L,!0),f.setRequestHeader("Zb-Url",this.url)):f.open("GET",this.url,!0);(0<this.g||c<this.size-1)&&f.setRequestHeader("Range","bytes="+this.g+"-"+c);f.responseType="arraybuffer";f.onload=function(g){if(this.D)this.D=0,this.j&&this.I();else if(this.j=0,g=g.target,4==g.readyState)if(this.l=10>this.l?1:11,200==g.status||206==g.status){var h=parseInt(g.getResponseHeader("content-length"),10);if(h)this.g+=h;else{if(h=g.getResponseHeader("content-range")){var k=
h.indexOf("-");if(0>k)h=0;else{k++;var l=h.indexOf("/",k);h=l<=k?0:parseInt(h.slice(k,l),10)}}else h=0;this.g=h?h+1:c+1}200==g.status&&this.g<this.h()?this.g=this.h():this.g>this.h()&&(this.g=this.h());this.s&&this.s(g.response,this);g.response=null}else throw Error(g.responseText+" ("+g.status+")");}.bind(this);f.onerror=function(){if(0==this.l&&this.T.L)this.l=10,e();else if(1==this.l||11==this.l)this.l++,setTimeout(function(){e()},500)}.bind(this);f.send()}.bind(this);e()}}}}var E="onedrive";const oa={en:"English",ja:"日本語"};var F={};(function(a){a[E]={B:"Microsoft OneDrive",Ga:function(b,d,c){return new la(b,d,c)},Ea:function(b){return b&&b.state==E?!0:!1}}})(F);const pa={bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png"},qa={avi:"video/x-msvideo",mp4:"video/mp4",mpeg:"video/mpeg"};var G=null,H=null,I=[],J=0,K=null,L=[],M=0;function N(a){var b=document.getElementById("spanError");"string"===typeof a?window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a:a&&(b.innerText=JSON.stringify(a));document.getElementById("spanInfo").style.display="none";b.style.display=a?"block":"none"}
function O(a){var b=document.getElementById("spanInfo");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;document.getElementById("spanError").style.display="none";b.style.display=a?"block":"none"}function P(a){var b=document.getElementById("spanNotify");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;a&&(M&&(clearTimeout(M),M=0),b.style.display="",M=setTimeout(function(){b.style.display="none";M=0},3E3))}
function Q(a,b){function d(e){R--;"error"==e.type&&(Q.wa=!0);if(0==R){var f=Q.wa;delete Q.wa;b&&b(f)}e=e.target||e.srcElement;e.hasAttribute("temporary")&&e.remove()}R++;var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a);c.setAttribute("temporary","1");c.addEventListener("load",d);c.addEventListener("error",d);document.body.appendChild(c)}var R=0;
function ra(a){G.I()&&(document.getElementById("chkSaveKey").checked?sa(function(b){var d="";b&&b.lsauth&&(d=y(!0,a,b.lsauth).toString(CryptoJS.enc.Base64url));G.D("key_words",d,!0)}):G.D("key_words",null,!0))}function ta(){G.ya(function(){H.da()})}
function sa(a){var b=new FormData;b.append("drive_type","localstorage");var d=new XMLHttpRequest;d.open("POST","https://zgayard.f5.si/grantauth.php",!0);d.withCredentials=!0;d.onload=function(c){var e=c.target;4==e.readyState&&(c=null,200==e.status?(e=JSON.parse(e.responseText))?e.error?N("["+e.error+"] "+e.error_description):e.lsauth?c=e:N("lsFailed"):N("lsFailed"):N(e.responseText+" ("+e.status+")"),a&&a(c))};d.send(b)}
function ua(a){var b=document.getElementById("divSet"),d=document.getElementById("selDrive"),c=r(d,"input");a?(d.disabled=!0,c.style.display="",b.setAttribute("cancelAll","1"),S(),document.getElementById("divHeader").style.display="",document.getElementById("tblst").style.display="",document.getElementById("tblQueue").style.display="",document.getElementById("divAction").style.display=""):(d.disabled=!1,c.style.display="none");b.style.display="block"}
function va(a){if(!window.msgs||window.msgs.lang!=a){var b=window.msgs;window.msgs=null;Q("msg/"+a+".js",function(){window.msgs?(window.msgs.lang=a,G.L(a),wa()):(console.log("Message file of '"+a+"' is missing."),b?window.msgs=b:Q("msg/en.js",function(){window.msgs?(window.msgs.lang="en",G.L(window.msgs.lang),wa()):N("Message file is missing.")}))})}}
function wa(){var a=window.msgs;a.spanConfNotice=a.spanConfNotice.replace("{0}","_zgayard_.conf");for(var b=document.getElementsByTagName("*"),d=0;d<b.length;d++){var c=b[d],e=null;c.hasAttribute("wordid")&&(e=a[c.getAttribute("wordid")]);!e&&c.id&&(e=a[c.id]);e&&("button"==c.type?c.value=e:c.innerText=e);c.hasAttribute("tid")&&(e=a[c.getAttribute("tid")])&&(c.title=e)}b=document.getElementById("seLang");for(d in oa)c=document.createElement("option"),c.value=d,c.innerText=oa[d],d==a.lang&&(c.selected=
!0),b.appendChild(c)}function xa(a){O("loading");(a=F[a])?(H=a.Ga(G,"https://zgayard.f5.si/grantauth.php","https://zgayard.f5.si/relay.php"),(a=H.I(!0))?N(a):(G.ba(),H.l({o:function(b,d){b?404==b.H?S(!0,!0):N(JSON.stringify(b)):ya(d.u)},v:"_zgayard_.conf"}))):N("unkDrive")}
function za(){var a=!1;document.getElementById("selDrive").disabled||(a=G.ca(document.getElementById("selDrive").value));G.da(document.getElementById("chkSkipLogin").checked);va(document.getElementById("seLang").value);a?(G.P(),xa(document.getElementById("selDrive").value)):G.ba();Aa()}
function Aa(a){var b=document.getElementById("divSet"),d=!1;a&&"boolean"===typeof a?d=!0:"1"==b.getAttribute("cancelAll")&&(d=!0);d&&(document.getElementById("divPwd").style.display="",document.getElementById("divHeader").style.display="block",document.getElementById("tblst").style.display="block",document.getElementById("tblQueue").style.display="block",document.getElementById("divAction").style.display="block",b.removeAttribute("cancelAll"));b.style.display=""}
function Ba(a,b){var d=document.getElementById("divPwd"),c="none";a?(d.setAttribute("addroot","1"),c="block"):d.removeAttribute("addroot");a=d.getElementsByTagName("*");for(d=0;d<a.length;d++){var e=a[d];e.classList.contains("addroot")?e.style.display=c:e.classList.contains("firstep")?e.style.display="none"!=c&&b?"block":"none":e.classList.contains("chgroot")&&(e.style.display="none"==c?"block":"none");"password"==e.type&&(e.value="")}Ca("#lblKeyFile")}
function S(a,b){var d=document.getElementById("divPwd");Ba(a,b);d.style.display="block";O()}function Da(){"1"==document.getElementById("divSet").getAttribute("cancelAll")?Aa(!0):document.getElementById("divPwd").style.display=""}function Ea(){var a=n(),b=a.previousElementSibling.cloneNode();b.value="";a.parentElement.insertBefore(b,a)}function Ca(a){a=n(a).parentElement.getElementsByTagName("input");for(var b=a.length-1;0<b;b--)a[b].remove();a[0].value=""}
function Ga(){O("loading");for(var a=document.getElementById("divPwd").hasAttribute("addroot"),b=document.getElementById("pwdKey").value,d=document.getElementById("divfKey").getElementsByTagName("input"),c=[],e=0;e<d.length;e++)for(var f=d[e].files,g=0;g<f.length;g++)c.push(f[g]);if(b||0<c.length){if(a){d=document.getElementById("pwdKeyRe").value;if((b||d)&&b!=d){N("diffPwd");return}if(!document.getElementById("txtRoot").value){N("noRoot");return}}var h=null;b&&(h=CryptoJS.enc.Utf8.parse(b));if(0<
c.length){e=0;var k=new FileReader,l=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA512,"zb12");k.h=function(){k.readAsArrayBuffer(c[e].slice(0,1023));e++};k.onload=function(B){l.update(new CryptoJS.lib.WordArray.init(B.target.result));e<c.length?k.h():(h?h.concat(l.finalize()):h=l.finalize(),h.clamp(),Ha(h,a))};k.h()}else Ha(h,a)}else N("noPwd")}
function Ha(a,b){var d=CryptoJS.HmacMD5(a,"zgayard").toString(CryptoJS.enc.Base64url).slice(0,8),c=null;if(b){var e={root:document.getElementById("txtRoot").value};document.getElementById("chkEncryFname").checked&&(e.encfname=!0);var f=!1;I.forEach(function(k){k.root==e.root&&(f=!0)});f?N("dupRoot"):(G.D("root",e.root),ra(a),c=CryptoJS.lib.WordArray.random(1024),K=x(c),e.iv=d.concat(Ia(!0,c,a)),J=I.length,I.push(e),Ja(e,!0),Ka())}else{var g=document.getElementById("selRoot").value,h=-1;I.forEach(function(k,
l){k.root==g&&(h=l)});0<=h&&I[h].iv&&d==I[h].iv.slice(0,d.length)?(J=h,G.D("root",g),ra(a),c=Ia(!1,I[J].iv.slice(d.length),a),K=x(c),La()):aa()?N("pwdError"):S()}}function Ia(a,b,d){d=x(d);var c=null;a?c=b:c=CryptoJS.enc.Base64url.parse(b);b=y(a,c,d);return a?b.toString(CryptoJS.enc.Base64url):b}function Ka(){var a=CryptoJS.enc.Utf8.parse(JSON.stringify(I));a=new Blob([new Uint8Array(z(a))],{type:"application/octet-binary"});a=new ha({_blob:a});var b=H.A({S:"_zgayard_.conf"});ja(a,b,La)}
function ya(a){var b=new C;ja(H.s({u:a}),b,function(){var d=new CryptoJS.lib.WordArray.init(b.j());d=JSON.parse(d.toString(CryptoJS.enc.Utf8));Array.isArray(d)?I=d:I.push(d);var c=-1,e=G.s("root"),f=document.getElementById("selRoot");f.innerHTML="";I.forEach(function(h,k){var l=!1;e&&h.root==e&&(l=!0);Ja(h,l,f);l&&(c=k)});if(0<=c){J=c;var g=G.s("key_words");g?sa(function(h){h&&h.lsauth&&!h.newkey?(h=y(!1,CryptoJS.enc.Base64url.parse(g),h.lsauth),Ha(h)):S()}):S()}else J=0,S()})}
function Ja(a,b,d){d=d||document.getElementById("selRoot");var c=document.createElement("option");c.value=a.root;c.innerText=a.root;b&&(c.selected=!0);d.appendChild(c)};function Ma(a){return I[J].encfname?fa(a,K):a}function Na(a){if(I[J].encfname)try{var b=K,d=CryptoJS.enc.Base64url.parse(a);return y(!1,d,b).toString(CryptoJS.enc.Utf8)}catch(c){console.error(c)}return a}
function Oa(){G=new ka;G.Ba(function(a){a&&N("IndexedDB is not supported in your browser settings.");a=G.$();a||(G.aa(),a=G.$(!0));if(!a){a=navigator.language;var b=a.indexOf("-");0<b&&(a=a.substring(0,b))}va(a);a=G.ia();b=document.getElementById("selDrive");var d=ea(),c;for(c in F){var e=document.createElement("option");e.value=c;e.innerText=F[c].B;a?a==c&&(e.selected=!0):F[c].Ea(d)&&(a=c,e.selected=!0);b.appendChild(e)}G.I()&&(document.getElementById("divSkipLogin").style.display="block",document.getElementById("divSaveKey").style.display=
"block",G.l&&(document.getElementById("chkSkipLogin").checked=!0),G.s("key_words")&&(document.getElementById("chkSaveKey").checked=!0));a?xa(a):ua()})}function La(){Da();Pa(function(){var a=I[J].root;H.l({o:function(b,d){b?404==b.H?H.K({na:a,o:function(c,e){c?N(JSON.stringify(c)):(L=[],L.push(e),T())}}):N(JSON.stringify(b)):(L=[],L.push(d),T(),Qa())},v:a})})}
function Pa(a){H.$({o:function(b,d){if(b)N(b);else{b=document.getElementById("spanQuota");b.setAttribute("total",d.Ja);b.setAttribute("trash",d.Ka);d=d.Ma;b=document.getElementById("spanQuota");"string"==typeof d&&(d=parseInt(d,10));var c=parseInt(b.getAttribute("total"),10),e=parseInt(b.getAttribute("trash"),10),f=0;b.hasAttribute("used")&&(f=parseInt(b.getAttribute("used"),10));f+=d;b.setAttribute("used",f);b.innerText=window.msgs.quotaInfo.replace("{0}",w(c-f-e));a&&a()}}})}
function Qa(){var a=document.getElementById("divHistory");a.style.display="";var b=G.Aa();b&&H.l({W:b.fid,o:function(d,c){if(!d){d=a.getElementsByTagName("a")[0];d.innerText=Na(c.B);d.setAttribute("fid",c.u);c.oa&&d.setAttribute("parent",c.oa);if(b.time){d.setAttribute("time",b.time);c=d.innerText.concat(" [");var e=c.concat,f=Math.floor(b.time),g=Math.floor(f/3600);f-=3600*g;var h=Math.floor(f/60);f-=60*h;var k=[];0<g?(k.push(g.toString()),k.push("0".concat(h).slice(-2))):k.push(h.toString());k.push("0".concat(f).slice(-2));
d.innerText=e.call(c,k.join(":")).concat("]")}a.style.display="block"}}})}
function T(a,b,d,c){var e=0;if(!d){if(0>=L.length)return;e=L.length-1;d=L[e]}var f="#tblst";b&&(f="#tblFolder");f=q(f);var g=f.Z,h=f.F;h.innerHTML="";O("loading");f=g.getElementsByTagName("th")[0];var k=t(f,"a",!0);a?k&&k.classList.remove("fnormal"):(k&&(0!=e||b?k.classList.add("fnormal"):f.innerHTML=""),Ra(f,d,e));H.ca({o:function(l,B){if(l)N(l);else{var v=[],A=0;B.forEach(function(m){var u=0,Fa=v.length;m.B=Na(m.B);for(U(m)?Fa=A++:u=A;u<Fa&&!(m.B<v[u].B);)u++;u<v.length?v.splice(u,0,m):v.push(m)});
v.forEach(function(m){b&&!U(m)||Sa(h,m,b)});b||(document.getElementById("divHeader").style.display="block",g.style.display="block",document.getElementById("divAction").style.display="block",l=document.getElementById("chkAll"),l.checked=!1,l.style.display=0<B.length?"":"none");c&&c(v);O()}},W:d.u})}
function Ra(a,b,d,c){var e=document.createElement("a"),f=document.createElement("span");e.href="#";e.innerText=b.B;e.setAttribute("uid",b.u);e.setAttribute("idx",d);e.addEventListener("click",Ta);c&&e.classList.add("fnormal");a.appendChild(e);f.innerText=">";a.appendChild(f)}
function Sa(a,b,d){var c=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("a"),g=b.B;if(!d)var h=document.createElement("input"),k=document.createElement("span"),l=document.createElement("span");d||(h.type="checkbox",e.appendChild(h),U(b)?k.innerHTML="&#x1f4c1;":(h=Ua(g),k.innerHTML=pa[h]?"&#x1f5bc;":"&#x1f4c4;"),e.appendChild(k));f.innerText=g;f.href="#";f.setAttribute("uid",b.u);f.setAttribute("utype",b._type);f.addEventListener("click",V);e.appendChild(f);d||
(l.innerHTML="&#x1f4dd;",l.setAttribute("class","dropbtn"),l.addEventListener("click",Va),e.appendChild(l));c.appendChild(e);d||(e=document.createElement("td"),e.innerText=w(b._size),e.setAttribute("class","right"),c.appendChild(e),d=e=document.createElement("td"),b=new Date(b.Fa),f=[],g=[],f.push(b.getFullYear()),f.push(b.getMonth()+1),f.push(b.getDate()),g.push("0".concat(b.getHours()).slice(-2)),g.push("0".concat(b.getMinutes()).slice(-2)),g.push("0".concat(b.getSeconds()).slice(-2)),d.innerText=
f.join("-")+" "+g.join(":"),c.appendChild(e));a.appendChild(c)}
function V(a,b){if(!a||a instanceof Event){window.event.preventDefault();b=n();if(U(b)){p(b,"TABLE").getAttribute("onlyfolder")?T(!1,!0,{u:b.getAttribute("uid"),B:b.innerText}):(L.push({u:b.getAttribute("uid"),B:b.innerText}),T());return}var d=q("#tblFileDetail").F;var c=q("#tblst").F.rows;var e=p(b,"TR").rowIndex-c[0].rowIndex}else{d=q("#tblFileDetail").F;c=q("#tblst").F.rows;e=d.rows[0].getAttribute("rowidx");if(1==a)if(0<e)e--;else{if(b)return;e=c.length-1}else if(e++,e>=c.length){if(b)return;
e=0}b=c[e].getElementsByTagName("a")[0];if(U(b)){d.rows[0].setAttribute("rowidx",e);V(a);return}}d.rows[0].cells[1].getElementsByTagName("span")[0].innerText=b.innerText;d.rows[0].setAttribute("uid",b.getAttribute("uid"));d.rows[0].setAttribute("rowidx",e);d.rows[1].cells[0].innerText=window.msgs.thSize+": "+c[e].cells[1].innerText;Wa(b.getAttribute("uid"),b.innerText)}
function Ta(){window.event.preventDefault();var a=n(),b=p(a,"TABLE"),d=b.getElementsByTagName("th")[0];if(b.getAttribute("onlyfolder")){b=0;for(var c=a.nextElementSibling;c;)c.tagName==a.tagName&&b++,c=c.nextElementSibling;if(0<b)for(c=0;c<b;c++)d.removeChild(d.lastElementChild),d.removeChild(d.lastElementChild);T(!0,!0,{B:a.innerText,u:a.getAttribute("uid")})}else a=parseInt(a.getAttribute("idx"),10),a<L.length-1&&L.splice(a+1).forEach(function(){d.removeChild(d.lastElementChild);d.removeChild(d.lastElementChild)}),
T(!0)}function U(a){return"1"==(a instanceof HTMLElement?a.getAttribute("utype"):"string"==typeof a?a:a._type)}function Ua(a){var b=a.lastIndexOf("."),d="";0<=b&&(d=a.slice(b+1));return d.toLowerCase()}function Xa(){for(var a=n().checked,b=q("#tblst").F.getElementsByTagName("input"),d=0;d<b.length;d++)"checkbox"==b[d].type&&(b[d].checked=a)}
function Ya(a){var b=document.getElementById("divGround");1==a?(b.style.backgroundColor="transparent",document.getElementById("tblFileDetail").parentElement.style.display="none"):(b.style.backgroundColor="",document.getElementById("tblFileDetail").parentElement.style.display="",2==a?(document.getElementById("spanGroundTitle").innerText=window.msgs.gtlFDetail,document.getElementById("tblFileDetail").style.display=""):document.getElementById("tblFileDetail").style.display="none",3==a?(document.getElementById("spanGroundTitle").innerText=
window.msgs.gtlMoveto,a=document.getElementById("tblFolder"),a.getElementsByTagName("th")[0].innerHTML=null,a.style.display=""):document.getElementById("tblFolder").style.display="none");b.style.display="table"}
function Va(){var a=n(),b=q("#tblst").F.rows;b=p(a,"TR").rowIndex-b[0].rowIndex;var d=document.getElementById("divItemenu");a=a.getBoundingClientRect();d.style.left=a.right+"px";d.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+a.top+"px";d.style.display="block";d.setAttribute("rowidx",b);Ya(1)}
function Za(){var a=n(),b=p(a,"DIV"),d=document.getElementById("divItemenu");var c=q("#tblst").F.rows;d=parseInt(d.getAttribute("rowidx"),10);c=c[d].getElementsByTagName("a")[0];b.style.display="";switch(a.getAttribute("wordid")){case "btnDownload":U(c)?N("noDownFolder"):(b.setAttribute("uid",c.getAttribute("uid")),b.setAttribute("uname",c.innerText),$a(2));W();break;case "btnRename":a=document.getElementById("divNewName");b=a.getElementsByTagName("input")[0];d=c.getBoundingClientRect();b.value=c.innerText;
a.style.left=d.left+"px";a.style.top=d.top-2+"px";b.style.width=d.width+"px";b.style.height=d.height+"px";a.style.display="block";break;case "btnMove":ab(c.getAttribute("uid"));break;case "btnDelete":bb(c.getAttribute("uid")),W()}}function ab(a){if("string"==typeof a)document.getElementById("tblFolder").setAttribute("uid",a);else if(X())document.getElementById("tblFolder").removeAttribute("uid");else return;Ya(3);T(!1,!0,L[0])}
function cb(){var a=window.event;if(13===a.keyCode){if(a.shiftKey||a.ctrlKey||a.altKey)return!0}else return!0;db();return!1}
function db(){var a=n();"INPUT"!=a.tagName&&(a=t(a,"INPUT"));if(a.value){var b=document.getElementById("divItemenu"),d=q("#tblst").F.rows;b=parseInt(b.getAttribute("rowidx"),10);var c=d[b].getElementsByTagName("a")[0];a.value!=c.innerText&&(d=Ma(a.value),d={o:function(e){e?N(e.J):(c.innerText=a.value,P("renDone"))},R:c.getAttribute("uid"),ua:d},H.ia(d));W()}else N("noNewName")}
function eb(){W();var a=document.getElementById("tblFolder"),b=t(a.getElementsByTagName("th")[0],"a",!0).getAttribute("uid");if(b!=L[L.length-1].u){var d=null;(a=a.getAttribute("uid"))?(d=[],d.push({u:a,B:""})):d=X();if(d){O("moving");var c=0,e={o:function(f){f?N(f.J):(c++,c<d.length?(e.R=d[c].u,H.C(e)):(T(!0),P("moveDone")))},R:d[c].u,Y:b};H.C(e)}}}
function bb(a){var b=null;"string"==typeof a?(b=[],b.push({u:a,B:""})):b=X();if(b&&confirm(window.msgs.delConfirm)){O("deleting");var d=0,c={o:function(e){e?N(e.J):(d++,d<b.length?(c.R=b[d].u,H.delete(c)):(T(!0),P("delDone")))},R:b[d].u};H.delete(c)}}function fb(){var a=document.getElementById("txtName").value;if(a){var b={o:function(d,c){d?N(d.J):(c.B=a,Sa(q("#tblst").F,c),P("flDone"))},na:Ma(a)};0<L.length&&(b.Y=L[L.length-1].u);H.K(b)}else N("noFldName")}
function X(a){for(var b=[],d=q("#tblst").F.getElementsByTagName("input"),c=0;c<d.length;c++){var e=d[c];if("checkbox"==e.type&&e.checked){e=r(e,"a");if(a&&U(e))return N("noDownFolder"),null;b.push({B:e.innerText,u:e.getAttribute("uid")})}}return 0>=b.length?(N("noChecks"),null):b}
function Wa(a,b){var d=q("#tblFileDetail").F;Ya(2);var c=Ua(b),e=d.rows[0].cells[1].getElementsByTagName("span")[0],f=d.rows[0].cells[1].getElementsByTagName("img")[0],g=pa[c];c=qa[c];e.style.display="";f.style.display="none";f.src="";var h=gb(d);d.rows[1].style.display="";d.rows[2].style.display="";if(c)hb(h,a),h.style.display="",e.style.display="none",d.rows[1].style.display="none",d.rows[2].style.display="none";else if(g){var k=new C;a=new D({la:!0,V:K,fa:H.s({u:a,U:16E4}),pa:k});a.l=function(l,
B){l||B?console.log(l||B):(l=k.j(),l instanceof Uint8Array||(l=new Uint8Array(l)),g&&(f.src=window.URL.createObjectURL(new Blob([l],{type:g})),f.title=b,f.style.display="",e.style.display="none",d.rows[1].style.display="none",d.rows[2].style.display="none"))};a.start()}}function ib(){var a=n();a&&a.src&&window.URL.revokeObjectURL(a.src)}function hb(a,b){var d=H.s({u:b});const c=zb_require("videostream");a.g=b;a.i=new ia({la:!0,V:K,fa:d});a.h=new c(a.i,a)}
function W(){document.getElementById("divGround").style.display="";gb();document.getElementById("divItemenu").style.display="";document.getElementById("divNewName").style.display=""}function gb(a){a||(a=q("#tblFileDetail").F);a=a.rows[0].cells[1].getElementsByTagName("video")[0];a.g&&G.Ca(a.g,a.currentTime);a.style.display="none";a.h&&(a.h.destroy(),a.i.va(),delete a.h,delete a.i);return a}function jb(a){window.event.preventDefault();a=n(a);kb(a)}function lb(a){a=n(a);a=t(a,"a");kb(a,!0)}
function kb(a,b){document.getElementById("divHistory").style.display="";var d=a.getAttribute("fid");if(d){var c=a.getAttribute("parent"),e=a.getAttribute("time");if(c){var f=c.indexOf(":");0<=f&&(c=c.slice(f+1));"/"==c.charAt(0)&&(c=c.slice(1));var g=c.split("/");if(g[0]==L[0].B){O("loading");var h=L[0].B,k=[];k.push(L[0]);f=1;var l=function(){h=h.concat("/").concat(g[f++]);H.l({v:h,o:function(v,A){v||(A.B=Na(A.B),k.push(A),f<g.length?l():B())}})},B=function(){var v=0,A=q("#tblst").Z.getElementsByTagName("th")[0];
A.innerHTML="";for(v=0;v<k.length;v++)Ra(A,k[v],v,!0);L=k;T(!0,!1,void 0,function(m){var u;for(u=0;u<m.length&&m[u].u!=d;u++);u<m.length&&(m=q("#tblFileDetail").F.rows[0],b?(m.setAttribute("rowidx",u),V(2,!0)):(m.getElementsByTagName("video")[0].setAttribute("ctime",e),0==u?(m.setAttribute("rowidx",1),V(1,!0)):(m.setAttribute("rowidx",u-1),V(2,!0))))})};l()}}}}
function mb(a){a=n(a);var b=a.getAttribute("ctime");b&&(a.removeAttribute("ctime"),document.getElementById("divHistory").getElementsByTagName("a")[0].getAttribute("fid")==a.g&&(a.currentTime=b))};function nb(a,b){var d=K;this.g=this.h=null;this.j=d;this.i=1;this.A=a;this.l=b;this.s=function(){var c=new D({la:1==this.i,V:this.j,fa:this.h,pa:this.g});c.G=function(){var e={_type:1,_wtype:this.i,_speed:c.L(),_pos:this.h.A(),_size:this.h.h()};this.l(e);return this.A()?!1:!0}.bind(this);c.l=function(e,f){var g={_type:2,_wtype:this.i,_size:this.g.C()};e?g._err=e.message||e.Ra:f?g._type=3:this.g.l&&(g._blob=this.g.l());this.l(g)}.bind(this);c.start()};this.Oa=function(c){var e=H;this.i=1;this.h=e.s({u:c,
U:16E5});this.g=new C;this.s()};this.Qa=function(c,e,f,g,h){var k=H;e=e.split("/");if(c)for(c=0;c<e.length;c++)e[c]=fa(e[c],this.j);this.i=2;this.h=new ha({_blob:f,U:16E5});f={S:e[0],ta:g};1<e.length&&(f.S=e.join("/"),f.ma=h);this.g=k.A(f);this.s()}};const ob=window.Worker?!0:!1;var Y=null;function pb(){var a=n();a.disabled=!0;Y?(a={_type:9,_rowIdx:parseInt(p(a,"TR").getAttribute("rowIdx"),10)},Y.postMessage(a)):a.setAttribute("canceled","1")}function qb(){var a=q("#tblQueue"),b=a.Z;a=a.F;var d=!1,c;for(c=0;c<a.rows.length;c++)a.rows[c].getAttribute("end")?ba(a.rows[c]):d=!0;d||ba(b)}
function rb(a,b,d){var c=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("input");e.innerText=d;c.appendChild(e);e=document.createElement("td");f.innerText=window.msgs.waiting;e.appendChild(f);c.appendChild(e);e=document.createElement("td");g.type="button";g.value=window.msgs.btnCancel;g.style.display="none";g.addEventListener("click",pb);e.appendChild(g);c.appendChild(e);c.setAttribute("rowIdx",b);a.appendChild(c)}
function Z(a,b,d){var c=a;0<=b&&(c=a.rows[b].getElementsByTagName("span")[0]);c.innerText=d}function sb(a,b){var d=a;0<=b?(d=a.rows[b].getElementsByTagName("input")[0],a.rows[b].setAttribute("end","1")):(a=p(a,"TR"))&&a.setAttribute("end","1");d.style.display="none"}
function tb(a,b){var d=!1,c=b._rowIdx;switch(b._type){case 0:b=a.rows[c].getElementsByTagName("input")[0];a.rows[c].getElementsByTagName("span")[0].innerText="0%";b.style.display="";break;case 1:Z(a,c,b._speed+" "+Math.round(100*b._pos/b._size)+"%");break;case 2:b._finished&&Y&&ub();sb(a,c);b._err?Z(a,c,b._err):1==b._wtype?(Z(a,c,window.msgs.downDone),b._blob&&ca(b._blob,a.rows[c].cells[0].innerText,document.getElementById("download"))):Z(a,c,window.msgs.upDone);d=!0;break;case 3:b._finished&&Y&&
ub(),sb(a,c),1==b._wtype?Z(a,c,window.msgs.downCanceled):Z(a,c,window.msgs.updCanceled),d=!0}return d}function ub(){var a=Y;Y=null;a.terminate();a.h&&T(!0)}function vb(a){if(!Y){var b=q("#tblQueue").F;Y=new Worker("worker.js");Y.i={_token:H.ba(),_iv:K.iv.toString(CryptoJS.enc.Base64url),_key:K.key.toString(CryptoJS.enc.Base64url),_drvnm:H.aa(),_encfname:I[J].encfname?!0:!1};Y.addEventListener("message",function(d){tb(b,d.data)})}a._cominf=Y.i;2!=a._type||Y.h||(Y.h=!0);Y.postMessage(a)}
function wb(a,b,d){tb(a,{_type:0,_wtype:1,_size:0,_rowIdx:b});var c=a.rows[b].getElementsByTagName("input")[0];return new nb(function(){return c.getAttribute("canceled")?!0:!1},function(e){e._rowIdx=b;tb(a,e)&&d()})}
function $a(a){O();var b=[];switch(a){case 1:a=q("#tblFileDetail").F.rows[0];b.push({B:a.getElementsByTagName("span")[0].innerText,u:a.getAttribute("uid")});break;case 2:a=document.getElementById("divItemenu");b.push({B:a.getAttribute("uname"),u:a.getAttribute("uid")});break;default:if(b=X(!0),!b)return}a=q("#tblQueue");var d=a.F;a.Z.style.display="block";var c=d.rows.length,e=c;b.forEach(function(g){rb(d,e,g.B);ob&&vb({_type:1,_rowIdx:e,_downinf:{_targetId:g.u}});e++});if(!ob){var f=function(g){wb(d,
c+g,function(){g++;g<b.length&&f(g)}).Oa(b[g].u)};f(0)}}
function xb(a){O();var b=null;b=(a=1===a)?document.getElementById("upfolder").files:document.getElementById("upfiles").files;if(0>=b.length)N("noFiles");else{var d=q("#tblQueue"),c=d.F;d.Z.style.display="block";var e=c.rows.length;d=e;for(var f=[],g=0;g<b.length;g++){var h="";h=b[g].webkitRelativePath?b[g].webkitRelativePath:b[g].name;f.push({_fpath:h,_file:b[g],Da:d});rb(c,d,h);d++}var k="",l="",B=I[J].encfname?!0:!1,v=function(m){wb(c,e+m,function(){m++;m<b.length?v(m):T(!0)}).Qa(B,f[m]._fpath,
f[m]._file,l,k)},A=function(){ob?f.forEach(function(m){vb({_type:2,_rowIdx:m.Da,_upinf:{_fpath:m._fpath,_file:m._file,_baseId:l,_basePath:k}})}):v(0)};a?H.l({W:L[L.length-1].u,o:function(m,u){k=u.oa.concat("/").concat(u.B);l=u.u;A()}}):(l=L[L.length-1].u,A())}};window.addEventListener("load",function(){window.addEventListener("scroll",function(){document.getElementById("divGround").style.top=(document.documentElement.scrollTop||document.body.scrollTop)+"px"});document.getElementById("spanNotify").style.display="none";RegExp("android","i").test(navigator.userAgent)||(document.getElementById("spanMoreKey").style.display="none",document.getElementById("spanClearKey").style.display="none");var a=0,b=document.getElementById("spanAddRoot");b.addEventListener("click",
Ba);var d=document.getElementById("divSet").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnLogout":b.addEventListener("click",ta);break;case "btnCancel":b.addEventListener("click",Aa);break;case "btnOk":b.addEventListener("click",za)}document.getElementById("spanMoreKey").addEventListener("click",Ea);document.getElementById("spanClearKey").addEventListener("click",Ca);d=document.getElementById("divPwd").getElementsByTagName("input");for(a=0;a<
d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnCancel":b.addEventListener("click",Da);break;case "btnOk":b.addEventListener("click",Ga)}d=document.getElementById("divHeader").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnSet":b.addEventListener("click",ua)}document.getElementById("chkAll").addEventListener("click",Xa);d=document.getElementById("divAction").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnDownfs":b.addEventListener("click",
$a);break;case "btnMovefs":b.addEventListener("click",ab);break;case "btnDelfs":b.addEventListener("click",bb);break;case "btnNewFldr":b.addEventListener("click",fb);break;case "btnUpfs":b.addEventListener("click",xb);break;case "btnUpfld":b.addEventListener("click",function(){xb(1)})}b=document.getElementById("tblQueue").getElementsByTagName("th")[0];b.getElementsByTagName("label")[0].addEventListener("click",qb);b=document.getElementById("divHistory");b.getElementsByTagName("a")[0].addEventListener("click",
jb);d=b.getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnPHNext":b.addEventListener("click",lb)}document.getElementById("divItemenu").addEventListener("click",Za);b=document.getElementById("divNewName");b.getElementsByTagName("input")[0].addEventListener("keypress",cb);b.getElementsByTagName("span")[0].addEventListener("click",db);b=document.getElementById("divGround").firstElementChild;b.addEventListener("click",W);b.firstElementChild.addEventListener("click",
function(c){c.stopPropagation()});b=r(document.getElementById("spanGroundTitle"),"label");b.addEventListener("click",W);a=document.getElementById("tblFileDetail").getElementsByTagName("tbody")[0].rows;b=a[0];b.cells[0].addEventListener("click",function(){V(1)});b.cells[2].addEventListener("click",function(){V(2)});b.getElementsByTagName("img")[0].addEventListener("load",ib);b=b.getElementsByTagName("video")[0];b.addEventListener("canplay",mb);b.addEventListener("ended",function(){V(2,!0)});d=a[2].getElementsByTagName("input");
for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnDownload":b.addEventListener("click",function(){$a(1)})}d=document.getElementById("tblFolder").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnOk":b.addEventListener("click",eb)}Oa()});
