function n(a){var b=null;if(a)if("string"==typeof a)switch(a.charAt(0)){case "#":b=document.getElementById(a.slice(1))}else a instanceof Event?b=a.srcElement||a.target:b=a;else b=window.event.srcElement||window.event.target;return b}function p(a,b){return(a=a.parentElement)?a.tagName==b?a:p(a,b):null}function aa(){var a=document.getElementById("divPwd");return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function ba(a){if(a=n(a))a.style.display="none"}
function r(a){a=n(a);if(a){var b=a.getElementsByTagName("tbody")[0];return{$:a,F:b}}return null}function t(a,b){if((a=a.nextElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.nextElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.nextElementSibling}return a}
function u(a,b,d){if((a=d?a.lastElementChild:a.previousElementSibling)&&b)switch(b.charAt(0)){case "#":for(b=b.slice(1);a&&a.id!=b;)a=a.previousElementSibling;break;default:for(b=b.toUpperCase();a&&a.tagName!=b;)a=a.previousElementSibling}return a}function ca(a,b,d){if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,b);else if(d)d.download=b,d.href=window.URL.createObjectURL(a),d.click();else throw Error("Element for download is not specified.");}
function da(a){if(!a)return null;var b=a.charAt(0);if("?"==b||"#"==b)a=a.substring(1);var d={};a.split("&").forEach(function(c){var e=c.indexOf("=");0>e?d[decodeURIComponent(c)]="":d[decodeURIComponent(c.substring(0,e))]=decodeURIComponent(c.substring(e+1))});return d}function ea(){var a=da(window.location.search),b=da(window.location.hash);b&&(a=a?Object.assign(a,b):b);return a}
function fa(a){if(1024>a)var b="B";else 1048576>a?(b="KB",a=Math.round(a/102.4)/10):1073741824>a?(b="MB",a=Math.round(a/104857.6)/10):(b="GB",a=Math.round(a/1.073741824E8)/10);var d=a.toString();a=d.indexOf(".");var c=d.split(""),e=[];0<=a?e.push(d.slice(a)):a=c.length;for(d=0;0<a;)3==d++&&(e.unshift(","),d=1),e.unshift(c[--a]);return e.join("").concat(b)};function x(a){var b=CryptoJS.MD5(a);a=CryptoJS.kdf.OpenSSL.execute(a,8,4,b);a.iv.clamp();a.key.clamp();return a}
function y(a,b,d){var c=d;"string"==typeof d&&(c=x(d));if(!(c&&c.iv&&c.key))throw Error("Need iv and key. They can be generated by CryptoJS.kdf.OpenSSL.execute from password and salt.");d={mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};Object.assign(d,c);a=a?CryptoJS.algo.AES.createEncryptor(d.key,d):CryptoJS.algo.AES.createDecryptor(d.key,d);b=a.process(b);b.concat(a.finalize());b.clamp();return b}
function ha(a){var b=Array(a.sigBytes);a=a.words;for(var d=0,c=0;c<a.length;c++){for(var e=a[c],f=d+4-1;f>=d;f--)f<b.length&&(b[f]=e&255),e>>=8;d+=4;if(d>=b.length)break}return b}
function ia(a){this.l=0;this.h=this.g=null;a&&a.ta&&(this.h=a.ta);this.i=function(b,d){this.l=b;this.h&&"#"!=this.h.href&&window.URL.revokeObjectURL(this.h.href);d&&d()};this.write=function(b,d){Array.isArray(b)?this.g=this.g?this.g.concat(b):b.concat():(this.g||(this.g=[]),this.g.push(b));d&&d()};this.cancel=function(b){b&&b(!1,!0)};this.j=function(){if(this.g&&0<this.g.length&&(this.g[0]instanceof ArrayBuffer||this.g[0]instanceof Uint8Array)){for(var b=0,d=0;d<this.g.length;d++)b+=this.g[d].byteLength;
b=new Uint8Array(b);var c=0;for(d=0;d<this.g.length;++d){var e=this.g[d];e instanceof ArrayBuffer&&(e=new Uint8Array(e));b.set(e,c);c+=e.byteLength}return b}return this.g};this.v=function(){var b=this.j();b instanceof Uint8Array||(b=new Uint8Array(b));return new Blob([b],{type:"application/octet-binary"})};this.download=function(b){var d=this.v();ca(d,b,this.h)};this.B=function(){return this.l}}
function ja(a){this.l=null;if(a._blob)if(a._blob instanceof Blob)this.l=a._blob;else throw Error("blob is not a Blob.");else throw Error("blob must be specified.");this.D=1600;a.V&&(this.D=a.V);this.g=0;this.v=this.j=null;this.G=function(b,d){if(b){if(b>=this.h())throw Error("offset can not be bigger than input size.");this.g=b}this.j=new FileReader;this.j.onload=function(c){c=c.target.result;this.v&&this.v(c,this)}.bind(this);d&&d()};this.B=function(){return this.g};this.h=function(){return this.l.size};
this.C=function(){return this.g>=this.h()};this.i=function(b){if(1!=this.j.readyState){var d=this.g;this.g=b?this.g+b:this.g+this.D;this.j.readAsArrayBuffer(this.l.slice(d,this.g))}};this.M=function(){this.l=this.j=null}}
function A(a,b){if(!a.ia)if(this.getSuperClass&&"Readable"==this.getSuperClass().name)this.super(b),this.h=1,b&&b.objectMode&&(this.M=!0);else throw Error("writer must be specified in no stream mode.");this.i=this.C=null;this.D=!0;this.g=null;this.l=a.ia;this.iv=this.key=null;this.j=0;this.B=null;this.G=this.v=0;this.speed="-";a.ma&&(this.D=!1);if(a.Z)this.g=a.Z;else throw Error("reader must be specified.");if(a.T)b=null,b="string"==typeof a.T?x(a.T):a.T,this.key=b.key,this.iv=b.iv;else throw Error("keycfg must be specified.");
this.start=function(d){if(d){if(this.D)throw Error("Can NOT set offset for encryption.");this.j=d;d-=d%16+16;0>d&&(d=0)}this.g.v=this.L.bind(this);this.g.G(d,function(){var c=16*Math.ceil((this.g.h()+1)/16);this.h||!this.l?this.J():this.l.i(c,this.J.bind(this))}.bind(this))};this.I=function(){Date.now()>this.v&&(this.speed=fa(1E3*(this.g.B()-this.G)/(Date.now()-this.v+1E3))+"/s",this.v=Date.now()+1E3,this.G=this.g.B());return this.speed};this._read=function(d){1==this.h?this.h=2:3==this.h&&(this.g.C()?
this.push(null):this.g.i(d))};this.push=function(d){return this.readable?(d&&!this.M?this.superCall("push",new Uint8Array(d)):this.superCall("push",d),!0):!1};this.J=function(){this.v=Date.now()+1E3;(this.G=this.j)?this.g.i(16):1==this.h?this.h=3:2==this.h?(this.h=3,this.push([])):this.g.i()};this.L=function(d){try{var c=new CryptoJS.lib.WordArray.init(d);if(!this.B){var e={iv:this.iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7};this.j&&(e.iv=c,c=null);this.B=this.D?CryptoJS.algo.AES.createEncryptor(this.key,
e):CryptoJS.algo.AES.createDecryptor(this.key,e)}if(c){var f=ha(this.B.process(c));this.g.C()&&(f=f.concat(ha(this.B.finalize())));if(this.j<this.g.B()){var g=this.j-(this.g.B()-d.byteLength);0<g&&(f=f.slice(g))}else f=null;this.h?this.push(f):f?this.l&&this.l.write(f,function(){this.g.C()?this.qa():this.C?this.C()?this.g.i():this.l.cancel(function(h,k){this.qa(h,k)}.bind(this)):this.g.i()}.bind(this)):this.g.i();f=null}else this.h?2==this.h?(this.h=3,this.push([])):this.h=3:this.g.i()}catch(h){if(this.h)throw h;
this.qa(h)}};this.qa=function(d,c){this.g&&(this.g.M(),this.g=null);this.i&&(d?this.i(d):this.i(!1,c))}}function ka(a){const b=zb_require("readable-stream");A.super_!==b.Readable&&zb_inherits(A,b.Readable);this.h={highWaterMark:8E5};Object.assign(this.h,void 0);this.info=a;this.g=null;this.createReadStream=function(d){this.wa();this.g=new A(this.info,this.h);var c=0;d&&d.start&&(c=d.start);this.g.start(c);return this.g};this.wa=function(){this.g&&(this.g.destroy(),this.g=null)}}
function la(a,b,d){a.v=function(c){b.write(c,function(){a.C()?d&&d():a.i()})};a.G(0,function(){b.i(a.h(),function(){a.i()})})};function na(){this.h=!0;this.i=this.m=null;this.l=this.C=!1;this.I=function(){return null!=this.m};this.P=function(a){if(this.h)try{var b=window.sessionStorage.getItem("language"),d=window.sessionStorage.getItem("drive"),c=window.sessionStorage.getItem("skipLogin");window.sessionStorage.clear();b&&window.sessionStorage.setItem("language",b);d&&!a&&window.sessionStorage.setItem("drive",d);c&&!a&&window.sessionStorage.setItem("skipLogin",c)}catch(e){this.h=!1,console.error(e)}};this.B=function(a){var b=
null;if(this.h)try{b=window.sessionStorage.getItem(a)}catch(d){this.h=!1,console.error(d)}return b};this.M=function(a){var b=this.B("login_state");return b&&a==b?!0:!1};this.j=function(a,b){if(this.h)try{return window.sessionStorage.setItem(a,b.toString()),!0}catch(d){this.h=!1,console.error(d)}return!1};this.J=function(a){if(this.h)try{window.sessionStorage.removeItem(a)}catch(b){this.h=!1,console.error(b)}};this.ba=function(){var a=this.B("language"),b=this.B("drive"),d=this.B("skipLogin");this.i=
{};a&&(this.i.language=a,this.L(a));b&&(this.i.U=b,this.da(b));d&&this.ea(d)};this.ka=function(){var a=this.g("drive");a||(this.i||this.ba(),a=this.i.U);return a};this.da=function(a){this.j("drive",a);return this.m?this.m.drive!=a?(this.m.drive=a,this.m[a]||(this.m[a]={}),this.C=!0):!1:!0};this.ea=function(a){a?this.l=this.I():(this.l=!1,this.Aa()&&(this.C=!0));this.j("skipLogin",this.l)};this.aa=function(a){var b=this.g("language");!b&&a&&this.i&&(b=this.i.language);return b};this.L=function(a){this.j("language",
a);this.m&&this.m.language!=a&&(this.m.language=a,this.C=!0)};this.Ca=function(a){if(window.indexedDB){var b=window.indexedDB.open("zgayard1946");b.onerror=function(){if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};b.onupgradeneeded=function(d){d.target.result.createObjectStore("settings",{keyPath:"key"})};b.onsuccess=function(d){var c=d.target.result;d=c.transaction("settings","readwrite");d.oncomplete=function(){c.close();
a&&a()};d.objectStore("settings").getAll().onsuccess=function(e){this.m={};e.target.result.forEach(function(f){this.m[f.key]=f.value}.bind(this));this.l=(e=this.m.drive)&&this.m[e]&&this.m[e].refresh_token?!0:!1}.bind(this)}.bind(this)}else if(a)a("IndexedDB is not supported in your browser settings.");else throw Error("IndexedDB is not supported in your browser settings.");};this.ca=function(){this.C&&this.m&&(this.G(function(a){a.clear().onsuccess=function(){for(var b in this.m)a.put({key:b,value:this.m[b]})}.bind(this)}.bind(this)),
this.C=!1)};this.v=function(a){var b=this.g("drive");return b&&(b=this.m[b])?b[a]:null};this.Aa=function(){var a=this.g("drive");return a&&(a=this.m[a])&&a.refresh_token?(delete a.refresh_token,!0):!1};this.D=function(a,b,d){if(this.m){var c=this.g("drive");if(b)this.m[c]||(this.m[c]={}),this.m[c][a]=b;else if(this.m[c])delete this.m[c][a];else{d&&d instanceof Function&&d();return}d?(a=void 0,d instanceof Function&&(a=d),this.G(function(e){e.put({key:c,value:this.m[c]})}.bind(this),a)):this.C=!0}else d&&
d instanceof Function&&d()};this.za=function(a){this.P(!0);if(this.m){var b=this.g("drive");delete this.m[b].refresh_token;delete this.m.drive;this.G(function(d){d.put({key:b,value:this.m[b]});d.delete("drive")}.bind(this),a)}else a&&a()};this.Da=function(a,b){this.la({drive:this.g("drive"),root:this.v("root"),fid:a,time:b})};this.Ba=function(){var a=this.g("recent");return a&&a.drive==this.g("drive")&&a.root==this.v("root")?a:null};this.G=function(a,b){window.indexedDB.open("zgayard1946").onsuccess=
function(d){var c=d.target.result;d=c.transaction("settings","readwrite");d.oncomplete=function(){c.close();b&&b()};d=d.objectStore("settings");a&&a(d)}};this.g=function(a){return this.m&&this.m[a]?this.m[a]:null};this.la=function(a){this.m&&(this.m.recent=a);this.G(function(b){b.put({key:"recent",value:a})}.bind(this),void 0)}};function oa(a,b,d){this.L=d;this.D=b;this.h=null;this.g=a;this.ba=function(){return B};this.i=function(c){var e="POST",f="https://graph.microsoft.com/v1.0".concat(encodeURI(c.u)),g=new XMLHttpRequest;c&&c.O&&(e=c.O);g.open(e,f,!0);c&&c.N?g.setRequestHeader("Authorization",c.N):c&&c.ga?(e="Bearer",c&&c.ha&&(e=c.ha),g.setRequestHeader("Authorization",e+" "+c.ga)):g.setRequestHeader("Authorization",this.h);if(c&&c.X)for(var h in c.X)g.setRequestHeader(h,c.X[h]);c&&c.o&&(g.onload=function(k){k=k.target;
4==k.readyState&&(401==k.status&&this.g.l&&!c.Ja?this.la(c):c.o({H:k.status,K:k.responseText}))}.bind(this));g.send(c.fa)};this.ca=function(){return this.h?this.h:""};this.I=function(c){if(c&&(this.h=this.g.B("access_token")))return null;c=this.g.l;var e={},f=ea();if(f&&f.token_type&&f.access_token){this.M(f.token_type,f.access_token);if(f&&f.state)if(this.g.M(f.state))this.g.J("login_state");else return"Unauthorized access to this url.";return null}f&&f.code?e.code=f.code:c&&(e.sa=this.g.v("refresh_token"));
if(e.code||e.sa){if(f&&f.state)if(this.g.M(f.state))this.g.J("login_state");else return"Unauthorized access to this url.";if((f=this.G(e))&&f.token_type&&f.access_token)this.M(f.token_type,f.access_token),c&&e.code&&f.refresh_token&&this.g.D("refresh_token",f.refresh_token),f.logout&&this.g.j("logout_url",f.logout);else return f&&f.error?"["+f.error+"] "+f.error_description:"Unknown error occured when doing authorization."}else if(c&&(e.ya=!0),(f=this.G(e))&&f.url)f.state&&(this.g.j("login_state",
f.state)||(f.state=B)),f.logout&&this.g.j("logout_url",f.logout),window.location.href=f.url.concat("&state=".concat(encodeURIComponent(f.state)));else return f&&f.error?"["+f.error+"] "+f.error_description:"Unknown error occured when doing authorization.";return null};this.ea=function(){this.h=null;this.g.J("access_token");var c=this.g.B("logout_url");if(c)window.location.href=c;else{c=new FormData;c.append("drive_type","onedrive");c.append("action","logout");var e=new XMLHttpRequest;e.open("POST",
this.D,!0);e.withCredentials=!0;e.onload=function(f){f=f.target;4==f.readyState&&200==f.status&&(f=JSON.parse(f.responseText))&&f.logout&&(window.location.href=f.logout)};e.send(c)}};this.aa=function(c){var e={O:"GET",u:"/me/drive",o:function(f){var g=null,h=!1;200==f.H?(f=JSON.parse(f.K).quota,g={La:f.deleted,Ka:f.total,Na:f.used}):h=f;c&&c.o?c.o(h,g):h&&console.error(JSON.stringify(h))}.bind(this)};this.j(c,e);this.i(e)};this.l=function(c){var e={u:"",O:"GET",o:function(f){var g=null,h=!1;200==
f.H?g=this.ra(JSON.parse(f.K)):h=f;c&&c.o?c.o(h,g):h&&alert(JSON.stringify(h))}.bind(this)};if(c&&c.u)e.u="/me/drive/root:/"+c.u;else if(c&&c.W)e.u="/me/drive/items/"+c.W;else throw Error("No path nor id is specified.");this.j(c,e);this.i(e)};this.da=function(c){var e={u:"/me/drive/root/children",O:"GET",o:function(f){var g=[],h=!1;200==f.H?JSON.parse(f.K).value.forEach(function(k){g.push(this.ra(k))},this):h=f;c&&c.o?c.o(h,g):h&&alert(JSON.stringify(h))}.bind(this)};c&&(c.Ma?e.u="/me/drive/root:/"+
c.Ma+":/children":c.W&&(e.u="/me/drive/items/"+c.W+"/children"),this.j(c,e));this.i(e)};this.J=function(c){if(!c||!c.oa)throw Error("Name of new folder is not specified.");var e={X:{"Content-Type":"application/json;charset=UTF-8"},u:"/me/drive/root/children",O:"POST",o:function(f){var g=null,h=!1;201==f.H?g=this.ra(JSON.parse(f.K)):h=f;if(c&&c.o)c.o(h,g);else if(h)throw Error(JSON.stringify(h));}.bind(this)};c.Ia?e.u="/me/drive/root:/"+c.Ia+":/children":c.Y&&(e.u="/me/drive/items/"+c.Y+"/children");
this.j(c,e);e.fa=JSON.stringify({name:c.oa,folder:{},"@microsoft.graph.conflictBehavior":"fail"});this.i(e)};this.ka=function(c){this.P(c)};this.C=function(c){this.P(c)};this.delete=function(c){if(!c||!c.R)throw Error("fid is not specified.");var e={u:"/me/drive/items/".concat(c.R),O:"DELETE",o:function(f){var g=!1;204!=f.H&&(g=f);if(c&&c.o)c.o(g);else if(g)throw Error(JSON.stringify(g));}.bind(this)};this.j(c,e);this.i(e)};this.B=function(c){return new pa(c,this)};this.v=function(c){return new qa(c,
this)};this.la=function(c){console.log("Retry to send ajax.");c&&(c.Ja=!0,this.I(),c.N=this.h,this.i(c))};this.ra=function(c){var e={s:c.id,A:c.name,_size:c.size,Ga:c.lastModifiedDateTime,pa:c.parentReference.path,_type:"0"};c.folder?e._type="1":c.file&&(e._type="2");return e};this.M=function(c,e){this.h=c+" "+e;this.g.j("access_token",this.h)};this.G=function(c){if(!c)throw Error("Options are not specifed when auth onedrive.");var e=new FormData;e.append("drive_type","onedrive");c.clientId&&e.append("client_id",
c.clientId);c.Pa&&e.append("redirect_uri",c.Pa);c.Oa&&e.append("client_secret",c.Oa);c.code?e.append("code",c.code):c.sa?e.append("refresh_token",c.sa):c.ya&&e.append("need_code",c.ya);c=null;var f=new XMLHttpRequest;f.open("POST",this.D,!1);f.withCredentials=!0;f.send(e);if(4==f.readyState)if(200==f.status)c=JSON.parse(f.responseText);else throw Error(f.responseText+" ("+f.status+")");return c};this.P=function(c){if(!c||!c.R)throw Error("fid is not specified.");var e={X:{"Content-Type":"application/json;charset=UTF-8"},
u:"/me/drive/items/".concat(c.R),O:"PATCH",o:function(g){var h=!1;200!=g.H&&(h=g);if(c&&c.o)c.o(h);else if(h)throw Error(JSON.stringify(h));}.bind(this)};this.j(c,e);var f={};c.va&&(f.name=c.va);c.Y&&(f.parentReference={id:c.Y});e.fa=JSON.stringify(f);if("{}"==e.fa)throw Error("No property to be updated.");this.i(e)};this.j=function(c,e){c.ha&&(e.ha=c.ha);c.ga&&(e.ga=c.ga);c.N&&(e.N=c.N)}}
function pa(a,b){this.U=b;this.g=a;this.v="";this.h=this.l=0;if(!this.g||!this.g.S)throw Error("fnm is not specified.");this.i=function(d,c){this.l=d;d={u:"/me",O:"POST",N:this.g.N,X:{"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache",Pragma:"no-cache"},o:function(g){200<=g.H&&299>=g.H?(this.v=JSON.parse(g.K).uploadUrl,c&&c(g)):(console.error(g),alert(JSON.stringify(g)))}.bind(this)};this.g.ua?d.u="/me/drive/items/"+this.g.ua+":/":this.g.na?(this.g.na.startsWith("/drive/root:")||
(d.u+="/drive/root:/"),d.u+=this.g.na.concat("/")):d.u+="/drive/root:/";d.u+=this.g.S;d.u+=":/createUploadSession";var e={"@microsoft.graph.conflictBehavior":"replace"},f=this.g.S.lastIndexOf("/");e.name=0<=f?this.g.S.slice(f+1):this.g.S;d.fa=JSON.stringify({item:e});this.U.i(d)};this.write=function(d,c){var e=new Blob([new Uint8Array(d)],{type:"application/octet-binary"}),f="bytes "+this.h+"-";this.h+=e.size;f+=this.h-1+"/"+this.l;var g=0,h=function(){var k=new XMLHttpRequest;k.open("PUT",this.v,
!0);k.setRequestHeader("Content-Range",f);k.onload=function(l){e=d=null;l=l.target;4==l.readyState&&(200<=l.status&&299>=l.status?c&&c(l.responseText):alert(l.responseText+" ("+l.status+")"))}.bind(this);k.onerror=function(){1>g?(g++,setTimeout(function(){h()},500)):e=d=null};k.send(e)}.bind(this);h()};this.cancel=function(d){var c=new XMLHttpRequest;c.open("DELETE",this.v,!0);c.onload=function(e){e=e.target;if(4==e.readyState){var f={H:e.status,K:e.responseText};200<=e.status&&299>=e.status?d&&d(!1,
f):(console.log(e.responseText+" ("+e.status+")"),d&&d(f))}}.bind(this);c.send()};this.B=function(){return this.l}}
function qa(a,b){this.U=b;this.L=a;this.url="";this.name=null;this.D=this.j=this.g=this.size=0;this.P=!1;this.J=16E3;a.V&&(this.J=a.V);this.l=0;this.v=null;this.G=function(d,c){if(this.P){this.j&&(this.D=this.j,this.j=0);if(d){if(d>=this.h())throw console.log("offset:"+d+",size:"+this.h()),Error("offset can not be bigger than input size.");this.g=d}else this.g=0;c&&c()}else this.U.i({u:"/me/drive/items/"+this.L.s,O:"GET",N:this.L.N,o:function(e){this.P=!0;if(200!=e.H)throw Error(e.K+" ("+e.H+")");
e=JSON.parse(e.K);this.size=e.size;if(d){if(d>=this.h())throw Error("offset can not be bigger than input size.");this.g=d}this.url=e["@microsoft.graph.downloadUrl"];this.name=e.name;c&&c()}.bind(this)})};this.B=function(){return this.g};this.h=function(){return this.size};this.C=function(){return this.g>=this.h()};this.i=function(d){d||(d=this.J);this.I(d)};this.M=function(){};this.I=function(d){if(!d||!this.j){if(d)this.j=d;else if(this.j)d=this.j;else throw Error("size must be specified.");if(!this.D){var c=
this.g+d-1,e=function(){var f=new XMLHttpRequest;10<=this.l?(f.open("GET",this.U.L,!0),f.setRequestHeader("Zb-Url",this.url)):f.open("GET",this.url,!0);(0<this.g||c<this.size-1)&&f.setRequestHeader("Range","bytes="+this.g+"-"+c);f.responseType="arraybuffer";f.onload=function(g){if(this.D)this.D=0,this.j&&this.I();else if(this.j=0,g=g.target,4==g.readyState)if(this.l=10>this.l?1:11,200==g.status||206==g.status){var h=parseInt(g.getResponseHeader("content-length"),10);if(h)this.g+=h;else{if(h=g.getResponseHeader("content-range")){var k=
h.indexOf("-");if(0>k)h=0;else{k++;var l=h.indexOf("/",k);h=l<=k?0:parseInt(h.slice(k,l),10)}}else h=0;this.g=h?h+1:c+1}200==g.status&&this.g<this.h()?this.g=this.h():this.g>this.h()&&(this.g=this.h());this.v&&this.v(g.response,this);g.response=null}else throw Error(g.responseText+" ("+g.status+")");}.bind(this);f.onerror=function(){if(0==this.l&&this.U.L)this.l=10,e();else if(1==this.l||11==this.l)this.l++,setTimeout(function(){e()},500)}.bind(this);f.send()}.bind(this);e()}}}}var B="onedrive";const ra={en:"English",ja:"日本語"};var C={};(function(a){a[B]={A:"Microsoft OneDrive",Ha:function(b,d,c){return new oa(b,d,c)},Fa:function(b){return b&&b.state==B?!0:!1}}})(C);const sa={bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png"},ta={avi:"video/x-msvideo",mp4:"video/mp4",mpeg:"video/mpeg"};var D=null,E=null,G=[],H=0,I=null,J=[],K=0;function L(a){var b=document.getElementById("spanError");"string"===typeof a?window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a:a&&(b.innerText=JSON.stringify(a));document.getElementById("spanInfo").style.display="none";b.style.display=a?"block":"none"}
function N(a){var b=document.getElementById("spanInfo");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;document.getElementById("spanError").style.display="none";b.style.display=a?"block":"none"}function O(a){var b=document.getElementById("spanNotify");window.msgs&&a&&window.msgs[a]?b.innerText=window.msgs[a]:b.innerText=a;a&&(K&&(clearTimeout(K),K=0),b.style.display="",K=setTimeout(function(){b.style.display="none";K=0},3E3))}
function P(a,b){function d(e){ua--;"error"==e.type&&(P.xa=!0);if(0==ua){var f=P.xa;delete P.xa;b&&b(f)}e=e.target||e.srcElement;e.hasAttribute("temporary")&&e.remove()}ua++;var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a);c.setAttribute("temporary","1");c.addEventListener("load",d);c.addEventListener("error",d);document.body.appendChild(c)}var ua=0;
function va(a){D.I()&&(document.getElementById("chkSaveKey").checked?wa(function(b){var d="";b&&b.lsauth&&(d=y(!0,a,b.lsauth).toString(CryptoJS.enc.Base64url));D.D("key_words",d,!0)}):D.D("key_words",null,!0))}function xa(){D.za(function(){E.ea()})}
function wa(a){var b=new FormData;b.append("drive_type","localstorage");var d=new XMLHttpRequest;d.open("POST","https://zgayard.f5.si/grantauth.php",!0);d.withCredentials=!0;d.onload=function(c){var e=c.target;4==e.readyState&&(c=null,200==e.status?(e=JSON.parse(e.responseText))?e.error?L("["+e.error+"] "+e.error_description):e.lsauth?c=e:L("lsFailed"):L("lsFailed"):L(e.responseText+" ("+e.status+")"),a&&a(c))};d.send(b)}
function ya(a){var b=document.getElementById("divSet"),d=document.getElementById("selDrive"),c=t(d,"input");a?(d.disabled=!0,c.style.display="",b.setAttribute("cancelAll","1"),Q(),document.getElementById("divHeader").style.display="",document.getElementById("tblst").style.display="",document.getElementById("tblQueue").style.display="",document.getElementById("divAction").style.display=""):(d.disabled=!1,c.style.display="none");b.style.display="block"}
function za(a){if(!window.msgs||window.msgs.lang!=a){var b=window.msgs;window.msgs=null;P("msg/"+a+".js",function(){window.msgs?(window.msgs.lang=a,D.L(a),Aa()):(console.log("Message file of '"+a+"' is missing."),b?window.msgs=b:P("msg/en.js",function(){window.msgs?(window.msgs.lang="en",D.L(window.msgs.lang),Aa()):L("Message file is missing.")}))})}}
function Aa(){var a=window.msgs;a.spanConfNotice=a.spanConfNotice.replace("{0}","_zgayard_.conf");for(var b=document.getElementsByTagName("*"),d=0;d<b.length;d++){var c=b[d],e=null;c.hasAttribute("wordid")&&(e=a[c.getAttribute("wordid")]);!e&&c.id&&(e=a[c.id]);e&&("button"==c.type?c.value=e:c.innerText=e);c.hasAttribute("tid")&&(e=a[c.getAttribute("tid")])&&(c.title=e)}b=document.getElementById("seLang");for(d in ra)c=document.createElement("option"),c.value=d,c.innerText=ra[d],d==a.lang&&(c.selected=
!0),b.appendChild(c)}function Ba(a){N("loading");(a=C[a])?(E=a.Ha(D,"https://zgayard.f5.si/grantauth.php","https://zgayard.f5.si/relay.php"),(a=E.I(!0))?L(a):(D.ca(),E.l({o:function(b,d){b?404==b.H?Q(!0,!0):L(JSON.stringify(b)):Ca(d.s)},u:"_zgayard_.conf"}))):L("unkDrive")}
function Da(){var a=!1;document.getElementById("selDrive").disabled||(a=D.da(document.getElementById("selDrive").value));D.ea(document.getElementById("chkSkipLogin").checked);za(document.getElementById("seLang").value);a?(D.P(),Ba(document.getElementById("selDrive").value)):D.ca();Ea()}
function Ea(a){var b=document.getElementById("divSet"),d=!1;a&&"boolean"===typeof a?d=!0:"1"==b.getAttribute("cancelAll")&&(d=!0);d&&(document.getElementById("divPwd").style.display="",document.getElementById("divHeader").style.display="block",document.getElementById("tblst").style.display="block",document.getElementById("tblQueue").style.display="block",document.getElementById("divAction").style.display="block",b.removeAttribute("cancelAll"));b.style.display=""}
function Fa(a,b){var d=document.getElementById("divPwd"),c="none";a?(d.setAttribute("addroot","1"),c="block"):d.removeAttribute("addroot");a=d.getElementsByTagName("*");for(d=0;d<a.length;d++){var e=a[d];e.classList.contains("addroot")?e.style.display=c:e.classList.contains("firstep")?e.style.display="none"!=c&&b?"block":"none":e.classList.contains("chgroot")&&(e.style.display="none"==c?"block":"none");"password"==e.type&&(e.value="")}Ga("#lblKeyFile")}
function Q(a,b){var d=document.getElementById("divPwd");Fa(a,b);d.style.display="block";N()}function Ha(){"1"==document.getElementById("divSet").getAttribute("cancelAll")?Ea(!0):document.getElementById("divPwd").style.display=""}function Ia(){var a=n(),b=a.previousElementSibling.cloneNode();b.value="";a.parentElement.insertBefore(b,a)}function Ga(a){a=n(a).parentElement.getElementsByTagName("input");for(var b=a.length-1;0<b;b--)a[b].remove();a[0].value=""}
function Ja(){N("loading");for(var a=document.getElementById("divPwd").hasAttribute("addroot"),b=document.getElementById("pwdKey").value,d=document.getElementById("divfKey").getElementsByTagName("input"),c=[],e=0;e<d.length;e++)for(var f=d[e].files,g=0;g<f.length;g++)c.push(f[g]);if(b||0<c.length){if(a){d=document.getElementById("pwdKeyRe").value;if((b||d)&&b!=d){L("diffPwd");return}if(!document.getElementById("txtRoot").value){L("noRoot");return}}var h=null;b&&(h=CryptoJS.enc.Utf8.parse(b));if(0<
c.length){e=0;var k=new FileReader,l=CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA512,"zb12");k.h=function(){k.readAsArrayBuffer(c[e].slice(0,1023));e++};k.onload=function(z){l.update(new CryptoJS.lib.WordArray.init(z.target.result));e<c.length?k.h():(h?h.concat(l.finalize()):h=l.finalize(),h.clamp(),Ka(h,a))};k.h()}else Ka(h,a)}else L("noPwd")}
function Ka(a,b){var d=CryptoJS.HmacMD5(a,"zgayard").toString(CryptoJS.enc.Base64url).slice(0,8),c=null;if(b){var e={root:document.getElementById("txtRoot").value};document.getElementById("chkEncryFname").checked&&(e.encfname=!0);var f=!1;G.forEach(function(k){k.root==e.root&&(f=!0)});f?L("dupRoot"):(D.D("root",e.root),va(a),c=CryptoJS.lib.WordArray.random(1024),I=x(c),e.iv=d.concat(La(!0,c,a)),H=G.length,G.push(e),Ma(e,!0),Na())}else{var g=document.getElementById("selRoot").value,h=-1;G.forEach(function(k,
l){k.root==g&&(h=l)});0<=h&&G[h].iv&&d==G[h].iv.slice(0,d.length)?(H=h,D.D("root",g),va(a),c=La(!1,G[H].iv.slice(d.length),a),I=x(c),Oa()):aa()?L("pwdError"):Q()}}function La(a,b,d){d=x(d);var c=null;a?c=b:c=CryptoJS.enc.Base64url.parse(b);b=y(a,c,d);return a?b.toString(CryptoJS.enc.Base64url):b}function Na(){var a=CryptoJS.enc.Utf8.parse(JSON.stringify(G));a=new Blob([new Uint8Array(ha(a))],{type:"application/octet-binary"});a=new ja({_blob:a});var b=E.B({S:"_zgayard_.conf"});la(a,b,Oa)}
function Ca(a){var b=new ia;la(E.v({s:a}),b,function(){var d=new CryptoJS.lib.WordArray.init(b.j());d=JSON.parse(d.toString(CryptoJS.enc.Utf8));Array.isArray(d)?G=d:G.push(d);var c=-1,e=D.v("root"),f=document.getElementById("selRoot");f.innerHTML="";G.forEach(function(h,k){var l=!1;e&&h.root==e&&(l=!0);Ma(h,l,f);l&&(c=k)});if(0<=c){H=c;var g=D.v("key_words");g?wa(function(h){h&&h.lsauth&&!h.newkey?(h=y(!1,CryptoJS.enc.Base64url.parse(g),h.lsauth),Ka(h)):Q()}):Q()}else H=0,Q()})}
function Ma(a,b,d){d=d||document.getElementById("selRoot");var c=document.createElement("option");c.value=a.root;c.innerText=a.root;b&&(c.selected=!0);d.appendChild(c)};function Pa(a){if(G[H].encfname){var b=I;a=CryptoJS.enc.Utf8.parse(a);b=y(!0,a,b).toString(CryptoJS.enc.Base64url)}else b=a;return b}function Qa(a){if(G[H].encfname)try{var b=I,d=CryptoJS.enc.Base64url.parse(a);return y(!1,d,b).toString(CryptoJS.enc.Utf8)}catch(c){console.error(c)}return a}
function Ra(){D=new na;D.Ca(function(a){a&&L("IndexedDB is not supported in your browser settings.");a=D.aa();a||(D.ba(),a=D.aa(!0));if(!a){a=navigator.language;var b=a.indexOf("-");0<b&&(a=a.substring(0,b))}za(a);a=D.ka();b=document.getElementById("selDrive");var d=ea(),c;for(c in C){var e=document.createElement("option");e.value=c;e.innerText=C[c].A;a?a==c&&(e.selected=!0):C[c].Fa(d)&&(a=c,e.selected=!0);b.appendChild(e)}D.I()&&(document.getElementById("divSkipLogin").style.display="block",document.getElementById("divSaveKey").style.display=
"block",D.l&&(document.getElementById("chkSkipLogin").checked=!0),D.v("key_words")&&(document.getElementById("chkSaveKey").checked=!0));a?Ba(a):ya()})}function Oa(){Ha();Sa(function(){var a=G[H].root;E.l({o:function(b,d){b?404==b.H?E.J({oa:a,o:function(c,e){c?L(JSON.stringify(c)):(J=[],J.push(e),R())}}):L(JSON.stringify(b)):(J=[],J.push(d),R(),Ta())},u:a})})}
function Ua(a){var b=document.getElementById("spanQuota");"string"==typeof a&&(a=parseInt(a,10));var d=parseInt(b.getAttribute("total"),10),c=parseInt(b.getAttribute("trash"),10),e=0;b.hasAttribute("used")&&(e=parseInt(b.getAttribute("used"),10));e+=a;b.setAttribute("used",e);b.innerText=window.msgs.quotaInfo.replace("{0}",fa(d-e-c))}function Sa(a){E.aa({o:function(b,d){b?L(b):(b=document.getElementById("spanQuota"),b.setAttribute("total",d.Ka),b.setAttribute("trash",d.La),Ua(d.Na),a&&a())}})}
function Ta(){var a=document.getElementById("divHistory");a.style.display="";var b=D.Ba();b&&E.l({W:b.fid,o:function(d,c){if(!d){d=a.getElementsByTagName("a")[0];d.innerText=Qa(c.A);d.setAttribute("fid",c.s);c.pa&&d.setAttribute("parent",c.pa);if(b.time){d.setAttribute("time",b.time);c=d.innerText.concat(" [");var e=c.concat,f=Math.floor(b.time),g=Math.floor(f/3600);f-=3600*g;var h=Math.floor(f/60);f-=60*h;var k=[];0<g?(k.push(g.toString()),k.push("0".concat(h).slice(-2))):k.push(h.toString());k.push("0".concat(f).slice(-2));
d.innerText=e.call(c,k.join(":")).concat("]")}a.style.display="block"}}})}
function R(a,b,d,c){var e=0;if(!d){if(0>=J.length)return;e=J.length-1;d=J[e]}var f="#tblst";b&&(f="#tblFolder");f=r(f);var g=f.$,h=f.F;h.innerHTML="";N("loading");f=g.getElementsByTagName("th")[0];var k=u(f,"a",!0);a?k&&k.classList.remove("fnormal"):(k&&(0!=e||b?k.classList.add("fnormal"):f.innerHTML=""),Wa(f,d,e));E.da({o:function(l,z){if(l)L(l);else{var m=[],v=0;z.forEach(function(q){var w=0,M=m.length;q.A=Qa(q.A);for(S(q)?M=v++:w=v;w<M&&!(q.A<m[w].A);)w++;w<m.length?m.splice(w,0,q):m.push(q)});
m.forEach(function(q){b&&!S(q)||Xa(h,q,b)});b||(document.getElementById("divHeader").style.display="block",g.style.display="block",document.getElementById("divAction").style.display="block",l=document.getElementById("chkAll"),l.checked=!1,l.style.display=0<z.length?"":"none");c&&c(m);N()}},W:d.s})}
function Wa(a,b,d,c){var e=document.createElement("a"),f=document.createElement("span");e.href="#";e.innerText=b.A;e.setAttribute("uid",b.s);e.setAttribute("idx",d);e.addEventListener("click",Ya);c&&e.classList.add("fnormal");a.appendChild(e);f.innerText=">";a.appendChild(f)}
function Xa(a,b,d){var c=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("a"),g=b.A;if(!d)var h=document.createElement("input"),k=document.createElement("span"),l=document.createElement("span");d||(h.type="checkbox",e.appendChild(h),S(b)?k.innerHTML="&#x1f4c1;":(h=Za(g),k.innerHTML=sa[h]?"&#x1f5bc;":"&#x1f4c4;"),e.appendChild(k));f.innerText=g;f.href="#";f.setAttribute("uid",b.s);f.setAttribute("utype",b._type);f.addEventListener("click",T);e.appendChild(f);d||
(l.innerHTML="&#x1f4dd;",l.setAttribute("class","dropbtn"),l.addEventListener("click",$a),e.appendChild(l));c.appendChild(e);d||(e=document.createElement("td"),e.innerText=fa(b._size),e.setAttribute("class","right"),c.appendChild(e),d=e=document.createElement("td"),b=new Date(b.Ga),f=[],g=[],f.push(b.getFullYear()),f.push(b.getMonth()+1),f.push(b.getDate()),g.push("0".concat(b.getHours()).slice(-2)),g.push("0".concat(b.getMinutes()).slice(-2)),g.push("0".concat(b.getSeconds()).slice(-2)),d.innerText=
f.join("-")+" "+g.join(":"),c.appendChild(e));a.appendChild(c)}
function T(a,b){if(!a||a instanceof Event){window.event.preventDefault();b=n();if(S(b)){p(b,"TABLE").getAttribute("onlyfolder")?R(!1,!0,{s:b.getAttribute("uid"),A:b.innerText}):(J.push({s:b.getAttribute("uid"),A:b.innerText}),R());return}var d=r("#tblFileDetail").F;var c=r("#tblst").F.rows;var e=p(b,"TR").rowIndex-c[0].rowIndex}else{d=r("#tblFileDetail").F;c=r("#tblst").F.rows;e=d.rows[0].getAttribute("rowidx");if(1==a)if(0<e)e--;else{if(b)return;e=c.length-1}else if(e++,e>=c.length){if(b)return;
e=0}b=c[e].getElementsByTagName("a")[0];if(S(b)){d.rows[0].setAttribute("rowidx",e);T(a);return}}d.rows[0].cells[1].getElementsByTagName("span")[0].innerText=b.innerText;d.rows[0].setAttribute("uid",b.getAttribute("uid"));d.rows[0].setAttribute("rowidx",e);d.rows[1].cells[0].innerText=window.msgs.thSize+": "+c[e].cells[1].innerText;ab(b.getAttribute("uid"),b.innerText)}
function Ya(){window.event.preventDefault();var a=n(),b=p(a,"TABLE"),d=b.getElementsByTagName("th")[0];if(b.getAttribute("onlyfolder")){b=0;for(var c=a.nextElementSibling;c;)c.tagName==a.tagName&&b++,c=c.nextElementSibling;if(0<b)for(c=0;c<b;c++)d.removeChild(d.lastElementChild),d.removeChild(d.lastElementChild);R(!0,!0,{A:a.innerText,s:a.getAttribute("uid")})}else a=parseInt(a.getAttribute("idx"),10),a<J.length-1&&J.splice(a+1).forEach(function(){d.removeChild(d.lastElementChild);d.removeChild(d.lastElementChild)}),
R(!0)}function S(a){return"1"==(a instanceof HTMLElement?a.getAttribute("utype"):"string"==typeof a?a:a._type)}function Za(a){var b=a.lastIndexOf("."),d="";0<=b&&(d=a.slice(b+1));return d.toLowerCase()}function bb(){for(var a=n().checked,b=r("#tblst").F.getElementsByTagName("input"),d=0;d<b.length;d++)"checkbox"==b[d].type&&(b[d].checked=a)}
function cb(a){var b=document.getElementById("divGround");1==a?(b.style.backgroundColor="transparent",document.getElementById("tblFileDetail").parentElement.style.display="none"):(b.style.backgroundColor="",document.getElementById("tblFileDetail").parentElement.style.display="",2==a?(document.getElementById("spanGroundTitle").innerText=window.msgs.gtlFDetail,document.getElementById("tblFileDetail").style.display=""):document.getElementById("tblFileDetail").style.display="none",3==a?(document.getElementById("spanGroundTitle").innerText=
window.msgs.gtlMoveto,a=document.getElementById("tblFolder"),a.getElementsByTagName("th")[0].innerHTML=null,a.style.display=""):document.getElementById("tblFolder").style.display="none");b.style.display="table"}
function $a(){var a=n(),b=r("#tblst").F.rows;b=p(a,"TR").rowIndex-b[0].rowIndex;var d=document.getElementById("divItemenu");a=a.getBoundingClientRect();d.style.left=a.right+"px";d.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+a.top+"px";d.style.display="block";d.setAttribute("rowidx",b);cb(1)}
function db(){var a=n(),b=p(a,"DIV"),d=document.getElementById("divItemenu");var c=r("#tblst").F.rows;d=parseInt(d.getAttribute("rowidx"),10);c=c[d].getElementsByTagName("a")[0];b.style.display="";switch(a.getAttribute("wordid")){case "btnDownload":S(c)?L("noDownFolder"):(b.setAttribute("uid",c.getAttribute("uid")),b.setAttribute("uname",c.innerText),eb(2));U();break;case "btnRename":a=document.getElementById("divNewName");b=a.getElementsByTagName("input")[0];d=c.getBoundingClientRect();b.value=c.innerText;
a.style.left=d.left+"px";a.style.top=d.top-2+"px";b.style.width=d.width+"px";b.style.height=d.height+"px";a.style.display="block";break;case "btnMove":fb(c.getAttribute("uid"));break;case "btnDelete":gb(c.getAttribute("uid")),U()}}function fb(a){if("string"==typeof a)document.getElementById("tblFolder").setAttribute("uid",a);else if(V())document.getElementById("tblFolder").removeAttribute("uid");else return;cb(3);R(!1,!0,J[0])}
function hb(){var a=window.event;if(13===a.keyCode){if(a.shiftKey||a.ctrlKey||a.altKey)return!0}else return!0;ib();return!1}
function ib(){var a=n();"INPUT"!=a.tagName&&(a=u(a,"INPUT"));if(a.value){var b=document.getElementById("divItemenu"),d=r("#tblst").F.rows;b=parseInt(b.getAttribute("rowidx"),10);var c=d[b].getElementsByTagName("a")[0];a.value!=c.innerText&&(d=Pa(a.value),d={o:function(e){e?L(e.K):(c.innerText=a.value,O("renDone"))},R:c.getAttribute("uid"),va:d},E.ka(d));U()}else L("noNewName")}
function jb(){U();var a=document.getElementById("tblFolder"),b=u(a.getElementsByTagName("th")[0],"a",!0).getAttribute("uid");if(b!=J[J.length-1].s){var d=null;(a=a.getAttribute("uid"))?(d=[],d.push({s:a,A:""})):d=V();if(d){N("moving");var c=0,e={o:function(f){f?L(f.K):(c++,c<d.length?(e.R=d[c].s,E.C(e)):(R(!0),O("moveDone")))},R:d[c].s,Y:b};E.C(e)}}}
function gb(a){var b=null;"string"==typeof a?(b=[],b.push({s:a,A:""})):b=V();if(b&&confirm(window.msgs.delConfirm)){N("deleting");var d=0,c={o:function(e){e?L(e.K):(d++,d<b.length?(c.R=b[d].s,E.delete(c)):(R(!0),O("delDone")))},R:b[d].s};E.delete(c)}}function kb(){var a=document.getElementById("txtName").value;if(a){var b={o:function(d,c){d?L(d.K):(c.A=a,Xa(r("#tblst").F,c),O("flDone"))},oa:Pa(a)};0<J.length&&(b.Y=J[J.length-1].s);E.J(b)}else L("noFldName")}
function V(a){for(var b=[],d=r("#tblst").F.getElementsByTagName("input"),c=0;c<d.length;c++){var e=d[c];if("checkbox"==e.type&&e.checked){e=t(e,"a");if(a&&S(e))return L("noDownFolder"),null;b.push({A:e.innerText,s:e.getAttribute("uid")})}}return 0>=b.length?(L("noChecks"),null):b}
function ab(a,b){var d=r("#tblFileDetail").F;cb(2);var c=Za(b),e=d.rows[0].cells[1].getElementsByTagName("span")[0],f=d.rows[0].cells[1].getElementsByTagName("img")[0],g=sa[c];c=ta[c];e.style.display="";f.style.display="none";f.src="";var h=lb(d);d.rows[1].style.display="";d.rows[2].style.display="";if(c)mb(h,a),h.style.display="",e.style.display="none",d.rows[1].style.display="none",d.rows[2].style.display="none";else if(g){var k=new ia;a=new A({ma:!0,T:I,Z:E.v({s:a,V:16E4}),ia:k});a.i=function(l,
z){l||z?console.log(l||z):(l=k.j(),l instanceof Uint8Array||(l=new Uint8Array(l)),g&&(f.src=window.URL.createObjectURL(new Blob([l],{type:g})),f.title=b,f.style.display="",e.style.display="none",d.rows[1].style.display="none",d.rows[2].style.display="none"))};a.start()}}function nb(){var a=n();a&&a.src&&window.URL.revokeObjectURL(a.src)}function mb(a,b){var d=E.v({s:b});const c=zb_require("videostream");a.g=b;a.i=new ka({ma:!0,T:I,Z:d});a.h=new c(a.i,a)}
function U(){document.getElementById("divGround").style.display="";lb();document.getElementById("divItemenu").style.display="";document.getElementById("divNewName").style.display=""}function lb(a){a||(a=r("#tblFileDetail").F);a=a.rows[0].cells[1].getElementsByTagName("video")[0];a.g&&D.Da(a.g,a.currentTime);a.style.display="none";a.h&&(a.h.destroy(),a.i.wa(),delete a.h,delete a.i);return a}function ob(a){window.event.preventDefault();a=n(a);pb(a)}function qb(a){a=n(a);a=u(a,"a");pb(a,!0)}
function pb(a,b){document.getElementById("divHistory").style.display="";var d=a.getAttribute("fid");if(d){var c=a.getAttribute("parent"),e=a.getAttribute("time");if(c){var f=c.indexOf(":");0<=f&&(c=c.slice(f+1));"/"==c.charAt(0)&&(c=c.slice(1));var g=c.split("/");if(g[0]==J[0].A){N("loading");var h=J[0].A,k=[];k.push(J[0]);f=1;var l=function(){h=h.concat("/").concat(g[f++]);E.l({u:h,o:function(m,v){m||(v.A=Qa(v.A),k.push(v),f<g.length?l():z())}})},z=function(){var m=0,v=r("#tblst").$.getElementsByTagName("th")[0];
v.innerHTML="";for(m=0;m<k.length;m++)Wa(v,k[m],m,!0);J=k;R(!0,!1,void 0,function(q){var w;for(w=0;w<q.length&&q[w].s!=d;w++);w<q.length&&(q=r("#tblFileDetail").F.rows[0],b?(q.setAttribute("rowidx",w),T(2,!0)):(q.getElementsByTagName("video")[0].setAttribute("ctime",e),0==w?(q.setAttribute("rowidx",1),T(1,!0)):(q.setAttribute("rowidx",w-1),T(2,!0))))})};l()}}}}
function rb(a){a=n(a);var b=a.getAttribute("ctime");b&&(a.removeAttribute("ctime"),document.getElementById("divHistory").getElementsByTagName("a")[0].getAttribute("fid")==a.g&&(a.currentTime=b))};const sb=window.Worker?!0:!1;var W=null;function tb(){var a=n();W?(a={_type:9,_rowIdx:parseInt(p(a,"TR").getAttribute("rowIdx"),10)},W.postMessage(a)):a.setAttribute("canceled","1")}function ub(){var a=r("#tblQueue"),b=a.$;a=a.F;var d=!1,c;for(c=0;c<a.rows.length;c++)a.rows[c].getAttribute("end")?ba(a.rows[c]):d=!0;d||ba(b)}
function vb(a,b,d){var c=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("span"),g=document.createElement("input");e.innerText=d;c.appendChild(e);e=document.createElement("td");f.innerText=window.msgs.waiting;e.appendChild(f);c.appendChild(e);e=document.createElement("td");g.type="button";g.value=window.msgs.btnCancel;g.style.display="none";g.addEventListener("click",tb);e.appendChild(g);c.appendChild(e);c.setAttribute("rowIdx",b);a.appendChild(c)}
function X(a,b,d){var c=a;0<=b&&(c=a.rows[b].getElementsByTagName("span")[0]);c.innerText=d}function Z(a,b){var d=a;0<=b?(d=a.rows[b].getElementsByTagName("input")[0],a.rows[b].setAttribute("end","1")):(a=p(a,"TR"))&&a.setAttribute("end","1");d.style.display="none"}function wb(){var a=W;W=null;a.terminate();a.h&&R(!0)}
function xb(a){if(!W){var b=r("#tblQueue").F;W=new Worker("worker.js");W.i={_token:E.ca(),_iv:I.iv.toString(CryptoJS.enc.Base64url),_key:I.key.toString(CryptoJS.enc.Base64url),_drvnm:E.ba(),_encfname:G[H].encfname?!0:!1};W.addEventListener("message",function(d){var c=d.data;d=c._rowIdx;switch(c._type){case 0:c=b.rows[d].getElementsByTagName("input")[0];b.rows[d].getElementsByTagName("span")[0].innerText="-";c.style.display="";break;case 1:X(b,d,c._speed+" "+Math.round(100*c._pos/c._size)+"%");break;
case 2:c._finished&&wb();Z(b,d);c._err?X(b,d,c._err):1==c._wtype?(X(b,d,window.msgs.downDone),c._blob&&ca(c._blob,b.rows[d].cells[0].innerText,document.getElementById("download"))):X(b,d,window.msgs.upDone);break;case 3:c._finished&&wb(),Z(b,d),1==c._wtype?X(b,d,window.msgs.downCanceled):X(b,d,window.msgs.updCanceled)}})}a._cominf=W.i;2!=a._type||W.h||(W.h=!0);W.postMessage(a)}
function eb(a){N();var b=[];switch(a){case 1:a=r("#tblFileDetail").F.rows[0];b.push({A:a.getElementsByTagName("span")[0].innerText,s:a.getAttribute("uid")});break;case 2:a=document.getElementById("divItemenu");b.push({A:a.getAttribute("uname"),s:a.getAttribute("uid")});break;default:if(b=V(!0),!b)return}a=r("#tblQueue");var d=a.F;a.$.style.display="block";var c=d.rows.length;b.forEach(function(e){vb(d,c,e.A);sb&&xb({_type:1,_rowIdx:c,_downinf:{_targetId:e.s}});c++});sb||yb(b,0,d)}
function yb(a,b,d){var c=a[b].A,e=d.rows[b].getElementsByTagName("span")[0],f=d.rows[b].getElementsByTagName("input")[0];e.innerText="-";f.style.display="";var g=E.v({s:a[b].s,V:16E5}),h=new ia({ta:document.getElementById("download")}),k=new A({ma:!0,T:I,Z:g,ia:h});k.C=function(){var l=k.I();X(e,-1,l+" "+Math.round(100*g.B()/g.h())+"%");return f.getAttribute("canceled")?!1:!0};k.i=function(l,z){Z(f,-1);if(l)e.innerText=l.message||l.Qa;else if(z)for(l=b;l<a.length;l++)d.rows[l].getElementsByTagName("span")[0].innerText=
window.msgs.downCanceled;else e.innerText=window.msgs.downDone,h.download(c),b++,b<a.length&&yb(a,b,d)};k.start()}
function zb(a){N();var b=null;b=(a=1===a)?document.getElementById("upfolder").files:document.getElementById("upfiles").files;if(0>=b.length)L("noFiles");else{var d=r("#tblQueue"),c=d.F;d.$.style.display="block";d=c.rows.length;for(var e=[],f=0;f<b.length;f++){var g="";g=b[f].webkitRelativePath?b[f].webkitRelativePath:b[f].name;e.push({_fpath:g,_file:b[f],Ea:d});vb(c,d,g);d++}var h="",k="",l=function(m){for(var v=e[m]._fpath.split("/"),q=0;q<v.length;q++)v[q]=Pa(v[q]);var w=c.rows[m].getElementsByTagName("span")[0],
M=c.rows[m].getElementsByTagName("input")[0];w.innerText="-";M.style.display="";var ma=new ja({_blob:e[m]._file,V:16E5});q={S:v[0],ua:k};1<v.length&&(q.S=v.join("/"),q.na=h);var Va=E.B(q),Y=new A({T:I,Z:ma,ia:Va});Y.C=function(){var F=Y.I();X(w,-1,F+" "+Math.round(100*ma.B()/ma.h())+"%");return M.getAttribute("canceled")?!1:!0};Y.i=function(F,Ab){Z(M,-1);if(F)w.innerText=F.message||F.Qa;else if(Ab){for(F=m;F<e.length;F++)c.rows[F].getElementsByTagName("span")[0].innerText=window.msgs.updCanceled;
0<m&&R(!0)}else w.innerText=window.msgs.upDone,Ua(Va.B()),m++,m<e.length?l(m):R(!0)};Y.start()},z=function(){sb?e.forEach(function(m){xb({_type:2,_rowIdx:m.Ea,_upinf:{_fpath:m._fpath,_file:m._file,_baseId:k,_basePath:h}})}):l(0)};a?E.l({W:J[J.length-1].s,o:function(m,v){h=v.pa.concat("/").concat(v.A);k=v.s;z()}}):(k=J[J.length-1].s,z())}};window.addEventListener("load",function(){window.addEventListener("scroll",function(){document.getElementById("divGround").style.top=(document.documentElement.scrollTop||document.body.scrollTop)+"px"});document.getElementById("spanNotify").style.display="none";RegExp("android","i").test(navigator.userAgent)||(document.getElementById("spanMoreKey").style.display="none",document.getElementById("spanClearKey").style.display="none");var a=0,b=document.getElementById("spanAddRoot");b.addEventListener("click",
Fa);var d=document.getElementById("divSet").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnLogout":b.addEventListener("click",xa);break;case "btnCancel":b.addEventListener("click",Ea);break;case "btnOk":b.addEventListener("click",Da)}document.getElementById("spanMoreKey").addEventListener("click",Ia);document.getElementById("spanClearKey").addEventListener("click",Ga);d=document.getElementById("divPwd").getElementsByTagName("input");for(a=0;a<
d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnCancel":b.addEventListener("click",Ha);break;case "btnOk":b.addEventListener("click",Ja)}d=document.getElementById("divHeader").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnSet":b.addEventListener("click",ya)}document.getElementById("chkAll").addEventListener("click",bb);d=document.getElementById("divAction").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnDownfs":b.addEventListener("click",
eb);break;case "btnMovefs":b.addEventListener("click",fb);break;case "btnDelfs":b.addEventListener("click",gb);break;case "btnNewFldr":b.addEventListener("click",kb);break;case "btnUpfs":b.addEventListener("click",zb);break;case "btnUpfld":b.addEventListener("click",function(){zb(1)})}b=document.getElementById("tblQueue").getElementsByTagName("th")[0];b.getElementsByTagName("label")[0].addEventListener("click",ub);b=document.getElementById("divHistory");b.getElementsByTagName("a")[0].addEventListener("click",
ob);d=b.getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnPHNext":b.addEventListener("click",qb)}document.getElementById("divItemenu").addEventListener("click",db);b=document.getElementById("divNewName");b.getElementsByTagName("input")[0].addEventListener("keypress",hb);b.getElementsByTagName("span")[0].addEventListener("click",ib);b=document.getElementById("divGround").firstElementChild;b.addEventListener("click",U);b.firstElementChild.addEventListener("click",
function(c){c.stopPropagation()});b=t(document.getElementById("spanGroundTitle"),"label");b.addEventListener("click",U);a=document.getElementById("tblFileDetail").getElementsByTagName("tbody")[0].rows;b=a[0];b.cells[0].addEventListener("click",function(){T(1)});b.cells[2].addEventListener("click",function(){T(2)});b.getElementsByTagName("img")[0].addEventListener("load",nb);b=b.getElementsByTagName("video")[0];b.addEventListener("canplay",rb);b.addEventListener("ended",function(){T(2,!0)});d=a[2].getElementsByTagName("input");
for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnDownload":b.addEventListener("click",function(){eb(1)})}d=document.getElementById("tblFolder").getElementsByTagName("input");for(a=0;a<d.length;a++)switch(b=d[a],b.getAttribute("wordid")){case "btnOk":b.addEventListener("click",jb)}Ra()});
